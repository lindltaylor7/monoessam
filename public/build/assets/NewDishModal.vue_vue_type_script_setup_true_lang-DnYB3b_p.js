import{_ as V}from"./index-_9tT-Ssz.js";import{_ as j,a as z,b as A,c as G}from"./DialogTitle.vue_vue_type_script_setup_true_lang-N9wvyaPx.js";import{_ as K}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CxwbNqpJ.js";import{_ as H}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-12uSUoh3.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-CfK0OICe.js";import{_ as J,a as Q,b as R,c as X,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-C356LrdR.js";import{_ as Y,a as Z}from"./SelectLabel.vue_vue_type_script_setup_true_lang-Zj6gsin1.js";import{e as h,_ as ee,a as S,b as c,c as te,d as v}from"./TableHeader.vue_vue_type_script_setup_true_lang-BQcZ5z2j.js";import{_ as le}from"./TableCaption.vue_vue_type_script_setup_true_lang-C2cpM043.js";import{d as ae,r as d,C as se,g as q,o as m,w as a,a as l,u as t,b as n,e as r,c as T,F as M,l as N,t as u}from"./app-CcswF23t.js";import{_ as oe}from"./CalcPopover.vue_vue_type_script_setup_true_lang-DC-uoCfe.js";import{P as re}from"./plus-D3CFLYEQ.js";import{T as ie}from"./trash-DGK45MVU.js";const ne={class:"flex w-full flex-row"},ue={class:"flex flex-col"},de={class:"grid grid-cols-3 gap-4"},fe={class:""},me={class:"col-span-2"},pe={class:"flex w-full flex-col"},qe=ae({__name:"NewDishModal",props:{cafes:{type:Array,required:!0},headquarters:{type:Array,required:!0},ingredients:{type:Array}},setup(W){const D=W,g=d(0),y=d(0),C=d(0),$=d(0),w=d(0),x=d(0),P=d(!1),b=d([]),o=se({name:"",description:"",mesearument_unit:"",ingredients:[]}),L=()=>{o.post(route("dish-category-insert"),{onSuccess:()=>{P.value=!1,o.reset()}})},B=(i,e)=>{const s=[{property:"gross_weight",totalProperty:g,resultCalc:e[0]},{property:"solid_waste",totalProperty:y,resultCalc:e[1]},{property:"liquid_waste",totalProperty:C,resultCalc:e[2]},{property:"calories",totalProperty:$,resultCalc:e[3]},{property:"cost",totalProperty:w,resultCalc:e[4]},{property:"final_product",totalProperty:x,resultCalc:e[5]}],p=o.ingredients.findIndex(f=>f.id==i);s.forEach(f=>{p!==-1&&(o.ingredients[p][f.property]=f.resultCalc,f.totalProperty.value=o.ingredients.reduce((E,O)=>E+(parseFloat(O[f.property])||0),0))})},F=i=>{i.originalValues={liquid_waste:i.liquid_waste,solid_waste:i.solid_waste,calories:i.calories},o.ingredients=[...o.ingredients||[],i]},I=i=>{o.ingredients=o.ingredients.filter(e=>e.id!==i)},U=i=>{var e;i.target.value==""?b.value=[]:b.value=(e=D.ingredients)==null?void 0:e.filter(s=>s.name.toLowerCase().includes(i.target.value)).slice(0,10)};return(i,e)=>(m(),q(t(G),{open:P.value,"onUpdate:open":e[3]||(e[3]=s=>P.value=s)},{default:a(()=>[l(t(H),null,{default:a(()=>[l(V,{title:"Agregar Area",class:"h-full w-auto bg-green-400"},{default:a(()=>[l(t(re))]),_:1})]),_:1}),l(t(j),{class:"w-full max-w-[90vw] lg:max-w-[1200px]"},{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(A),null,{default:a(()=>e[4]||(e[4]=[r("Nuevo Plato")])),_:1}),l(t(k),{modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=s=>t(o).name=s),type:"text",placeholder:"Nombre"},null,8,["modelValue"]),l(t(k),{modelValue:t(o).description,"onUpdate:modelValue":e[1]||(e[1]=s=>t(o).description=s),type:"text",placeholder:"Descripción"},null,8,["modelValue"])]),_:1}),n("div",ne,[l(t(J),{modelValue:t(o).mesearument_unit,"onUpdate:modelValue":e[2]||(e[2]=s=>t(o).mesearument_unit=s)},{default:a(()=>[l(t(Q),null,{default:a(()=>[l(t(R),{placeholder:"Seleccione nivel de Plato"})]),_:1}),l(t(X),null,{default:a(()=>[l(t(Y),null,{default:a(()=>[l(t(Z),null,{default:a(()=>e[5]||(e[5]=[r("Unidades")])),_:1}),l(t(_),{value:"1"},{default:a(()=>e[6]||(e[6]=[r("Master")])),_:1}),l(t(_),{value:"2"},{default:a(()=>e[7]||(e[7]=[r("Staff")])),_:1}),l(t(_),{value:"3"},{default:a(()=>e[8]||(e[8]=[r("Empleado")])),_:1}),l(t(_),{value:"4"},{default:a(()=>e[9]||(e[9]=[r("Obrero")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),n("div",ue,[l(t(k),{type:"text",placeholder:"Buscar ingrediente",onKeyup:U}),n("div",de,[n("div",fe,[(m(!0),T(M,null,N(b.value,s=>(m(),q(V,{key:s.id,class:"my-1 w-full bg-red-400",title:s.name,onClick:p=>F(s)},{default:a(()=>[r(u(s.name.length>35?s.name.substring(0,35)+"...":s.name),1)]),_:2},1032,["title","onClick"]))),128))]),n("div",me,[l(t(h),null,{default:a(()=>[l(t(le),null,{default:a(()=>e[10]||(e[10]=[r("Lista de Categoría de Platos.")])),_:1}),l(t(ee),null,{default:a(()=>[l(t(S),null,{default:a(()=>[l(t(c),{class:"w-[200px]"},{default:a(()=>e[11]||(e[11]=[r("Nombre")])),_:1}),l(t(c),{class:"w-[100px]"},{default:a(()=>e[12]||(e[12]=[r("Descripción")])),_:1}),l(t(c),{class:"w-[100px]"},{default:a(()=>e[13]||(e[13]=[r("Precio unitario")])),_:1}),l(t(c),{class:"text-right"},{default:a(()=>e[14]||(e[14]=[r("Opciones")])),_:1})]),_:1})]),_:1}),l(t(te),null,{default:a(()=>[(m(!0),T(M,null,N(t(o).ingredients,s=>(m(),q(t(S),{key:s.id},{default:a(()=>[l(t(v),{class:"font-medium"},{default:a(()=>[r(u(s.name),1)]),_:2},1024),l(t(v),{class:"font-medium"},{default:a(()=>[r(u(s.description),1)]),_:2},1024),l(t(v),{class:"font-medium"},{default:a(()=>[r(u(s.presentation),1)]),_:2},1024),l(t(v),{class:"text-right"},{default:a(()=>[l(V,{onClick:p=>I(s.id),size:"sm",class:"bg-red-500"},{default:a(()=>[l(t(ie),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),l(oe,{ingredient:s,totalMateriaPrima:g.value,totalSolidWaste:y.value,totalLiquidWaste:C.value,totalCalories:$.value,totalCost:w.value,totalfinalProduct:x.value,onCalcMassiveProperties:B},null,8,["ingredient","totalMateriaPrima","totalSolidWaste","totalLiquidWaste","totalCalories","totalCost","totalfinalProduct"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),n("div",pe,[n("p",null,"Total Materia Prima: "+u(g.value)+" gramos",1),n("p",null,"Total Desechos solidos: "+u(y.value)+" gramos",1),n("p",null,"Total Desechos liquidos: "+u(C.value)+" gramos",1),n("p",null,"Total Calorias: "+u($.value),1),n("p",null,"Costo total: S./ "+u(w.value),1),n("p",null,"Producto Final: "+u(x.value),1)]),l(t(K),{onClick:L},{default:a(()=>e[15]||(e[15]=[r(" Agregar ")])),_:1})]),_:1})]),_:1},8,["open"]))}});export{qe as _};
