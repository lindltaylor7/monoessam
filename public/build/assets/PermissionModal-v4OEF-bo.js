import{d as y,C,q as P,g as c,o as d,w as p,a as m,u as s,b as r,e as a,t as u,c as g,F as S,l as B,n as I}from"./app-D-LqQbZa.js";import{_}from"./index-DpgMMlKQ.js";import{_ as M,a as N,b as V,c as j}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DwCCe1VU.js";import{_ as z}from"./DialogDescription.vue_vue_type_script_setup_true_lang-LhN1IvpN.js";import{_ as F}from"./DialogFooter.vue_vue_type_script_setup_true_lang-B0NV6Kd9.js";import{_ as L}from"./Checkbox.vue_vue_type_script_setup_true_lang-C-N8GeW7.js";import{_ as b}from"./Icon.vue_vue_type_script_setup_true_lang-gEMWzwnX.js";import{S as U}from"./shield-CoKnK0eR.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Primitive-D2E4zh-F.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Presence-5rM4SnOx.js";import"./useForwardExpose-C0s566w4.js";import"./DialogTitle-CIiJ2IkS.js";import"./Teleport-C90D5m2n.js";import"./utils-DrB2bsOv.js";import"./x-b92faefF.js";import"./createLucideIcon-Ds2iLTpM.js";import"./DialogDescription-zqXnhQK4.js";import"./useFormControl-CdIo0Tlf.js";import"./RovingFocusItem-1ihwZVcP.js";import"./Collection-D9d2Sq_a.js";import"./usePrimitiveElement-EZ5wwPph.js";import"./RovingFocusGroup-D3Tsaytf.js";import"./VisuallyHidden-BMVg-pqG.js";import"./check-DoDSKdKK.js";import"./settings-2-B1OirUe9.js";import"./briefcase-Xmtl9DiM.js";import"./lock-VA-0N1cL.js";import"./shopping-bag-DFapWeEq.js";import"./zap-BNzybbBh.js";import"./between-horizontal-start-xyVwXBMu.js";import"./user-round-CISTvNYs.js";import"./building-2-BVTNxSIJ.js";import"./person-standing-COxu-rZm.js";import"./scale-CZ8pgDg-.js";import"./paperclip-CyL3-0Wt.js";import"./calendar-CWgTl_K1.js";import"./chevron-down-CLUrzGV_.js";import"./chevron-left-qEn28Xtk.js";import"./chevron-right-Cq55BZVf.js";import"./chevron-up-a8bJVb19.js";import"./utensils-BSk9kXbm.js";import"./circle-alert-52ZMIOm6.js";import"./triangle-alert-BPPxmAm6.js";import"./circle-check-VP-ZzmRA.js";import"./circle-plus-DkW3G8dO.js";import"./shirt-D5iYOZ7I.js";import"./copy-BNuVN1l6.js";import"./dollar-sign-pfe3naiy.js";import"./message-square-lUeyvym4.js";import"./eye-mSdyq9CV.js";import"./file-chart-column-BNBba-8G.js";import"./file-BvbRlJBE.js";import"./hand-helping-B2OrTdtM.js";import"./info-CA5ot4fU.js";import"./lamp-desk-BC4R8tFo.js";import"./list-check-CEU2RqGa.js";import"./sheet-CTwanoGL.js";import"./loader-circle-DpQTt_Uh.js";import"./mail-DnloGrzi.js";import"./monitor-CAzvVKRW.js";import"./sun-viAVOpRf.js";import"./package-plus-BAuL2zDf.js";import"./package-CR6_iB-i.js";import"./pencil-Bs-09YM6.js";import"./phone-DvDUiVmq.js";import"./plus-D4e7NBze.js";import"./search-B5XbEvtW.js";import"./shopping-cart-BlNgnin8.js";import"./soup-C33LeQjk.js";import"./trash-2-BCJ-1ccr.js";import"./trash-BvV3zZaY.js";import"./truck-B8h0KZmM.js";import"./upload-BciA0lU5.js";import"./user-plus-giM89TS3.js";import"./user-Cwyi-5P7.js";const D={class:"bg-orange-600 px-6 py-8 text-white relative"},E={class:"font-bold text-white"},G={class:"absolute -bottom-6 right-6 h-12 w-12 rounded-full bg-background flex items-center justify-center shadow-lg border"},O={class:"px-6 pt-10 pb-6 bg-background"},T={class:"mb-4 flex items-center justify-between"},A={class:"text-xs text-muted-foreground"},H={class:"font-bold text-orange-600"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-[50vh] overflow-y-auto pr-2 custom-scrollbar border rounded-xl p-4 bg-muted/5"},K=["for"],Q=y({__name:"PermissionModal",props:{open:{type:Boolean},user:{},permissions:{}},emits:["update:open"],setup(x,{emit:v}){const n=x,w=v,i=C({permissions:[],user_id:null});P(()=>n.open,e=>{if(e&&n.user){i.user_id=n.user.id;const o=n.user.permissions.map(l=>l.id),t=n.user.roles.flatMap(l=>l.permissions.map($=>$.id));i.permissions=[...new Set([...o,...t])]}});const f=e=>i.permissions.includes(e),h=e=>{const o=[...i.permissions],t=o.indexOf(e);t>-1?o.splice(t,1):o.push(e),i.permissions=o},k=()=>{n.user&&i.post(route("permissions.user.update",n.user.id),{preserveScroll:!0,onSuccess:()=>{w("update:open",!1)}})};return(e,o)=>(d(),c(s(j),{open:e.open,"onUpdate:open":o[1]||(o[1]=t=>e.$emit("update:open",t))},{default:p(()=>[m(s(M),{class:"sm:max-w-[700px] overflow-hidden p-0 gap-0 border-none shadow-2xl"},{default:p(()=>[r("div",D,[m(s(N),null,{default:p(()=>[m(s(V),{class:"text-2xl font-bold"},{default:p(()=>o[2]||(o[2]=[a("Permisos de Usuario")])),_:1}),m(s(z),{class:"text-orange-100"},{default:p(()=>{var t;return[o[3]||(o[3]=a(" Gestiona los permisos especÃ­ficos para ")),r("span",E,u((t=e.user)==null?void 0:t.name),1),o[4]||(o[4]=a(". "))]}),_:1})]),_:1}),r("div",G,[m(s(U),{class:"h-6 w-6 text-orange-600"})])]),r("div",O,[r("div",T,[o[6]||(o[6]=r("h3",{class:"text-sm font-bold uppercase tracking-wider text-muted-foreground"},"Listado de Permisos",-1)),r("div",A,[r("span",H,u(s(i).permissions.length),1),o[5]||(o[5]=a(" seleccionados "))])]),r("div",J,[(d(!0),g(S,null,B(e.permissions,t=>(d(),g("div",{key:t.id,class:I(["flex items-center space-x-3 p-2 rounded-lg transition-colors hover:bg-muted/10 border border-transparent",{"bg-orange-50 border-orange-100":f(t.id)}])},[m(s(L),{id:"perm-"+t.id,checked:f(t.id),onClick:l=>h(t.id)},null,8,["id","checked","onClick"]),r("label",{for:"perm-"+t.id,class:"text-sm font-medium leading-none cursor-pointer flex-1"},u(t.sidebar_name||t.name),9,K)],2))),128))]),m(s(F),{class:"pt-8 flex gap-2"},{default:p(()=>[m(s(_),{type:"button",variant:"ghost",onClick:o[0]||(o[0]=t=>e.$emit("update:open",!1)),class:"border"},{default:p(()=>o[7]||(o[7]=[a("Cancelar")])),_:1}),m(s(_),{onClick:k,disabled:s(i).processing,class:"flex-1 bg-orange-600 hover:bg-orange-700 shadow-md text-white font-semibold"},{default:p(()=>[s(i).processing?(d(),c(b,{key:0,name:"loader-2",class:"mr-2 h-4 w-4 animate-spin"})):(d(),c(b,{key:1,name:"save",class:"mr-2 h-4 w-4"})),o[8]||(o[8]=a(" Sincronizar Permisos "))]),_:1},8,["disabled"])]),_:1})])]),_:1})]),_:1},8,["open"]))}}),wt=q(Q,[["__scopeId","data-v-dd36ca41"]]);export{wt as default};
