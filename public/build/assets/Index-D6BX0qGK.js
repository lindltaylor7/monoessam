import{_ as w}from"./index-CN-HqOWX.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-DI-DE2jc.js";import{_ as F,a as M,b as U,c as A,d as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-CccX3lWm.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-9Z96ajT5.js";import{z as R,d as I,j as k,s as V,v as C,c as d,o as p,a as o,u as t,m as O,w as n,b as a,x as P,e as g,F as S,p as z,g as N,t as f,i as B}from"./app-B7WdqXcl.js";import{_ as Q}from"./StaffRegistrationDialog.vue_vue_type_script_setup_true_lang-BoxEj78N.js";import{_ as T}from"./StaffTable.vue_vue_type_script_setup_true_lang-Bn1TplwJ.js";import{_ as q}from"./StaffMobileCard.vue_vue_type_script_setup_true_lang-PA6BQj0H.js";import{u as G}from"./useStaffFilter-ym1FGFgx.js";import{C as H}from"./chevron-left--KUrm2hn.js";import{C as J}from"./chevron-right-DcpXLV7w.js";import"./Primitive-HxoesleM.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Presence-BDi5Z3rN.js";import"./useForwardExpose-B4-SmJpO.js";import"./Teleport-DHLrd6YJ.js";import"./chevron-down-DOPp-MoB.js";import"./createLucideIcon-BM0Y5dgR.js";import"./chevron-up-BMZL74tZ.js";import"./Collection-C1XaxlYL.js";import"./usePrimitiveElement-BENlFLak.js";import"./check-B-Pf2WUn.js";import"./PopperContent-M-OCLf11.js";import"./useTypeahead-DpMvQGoG.js";import"./utils-B3dR3Fkc.js";import"./useFormControl-DkuT1R3v.js";import"./VisuallyHidden-Ojn2niG0.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CJtIWAuU.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CIt6i1ie.js";import"./RovingFocusGroup-8CdnFVCO.js";import"./utensils-BJTnrLi0.js";import"./DialogTitle-DWITSh2Y.js";import"./x-Ckj070SL.js";import"./DialogDescription-53vnFDH4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hand-helping-Bzwoaxl-.js";import"./building-2-hef9Saeb.js";import"./user-snDpyLrB.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DvhPyUG9.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-BlaYTFSp.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-D7HAM9qi.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Dwh_DAG2.js";import"./TabsTrigger.vue_vue_type_script_setup_true_lang-BpWOlF0x.js";import"./RovingFocusItem-Bjz3iU7E.js";import"./AlertErrors.vue_vue_type_script_setup_true_lang-E55JEL40.js";import"./AttachmentsTab.vue_vue_type_script_setup_true_lang-DwnYhCZn.js";import"./index-CUvHgtj7.js";import"./FileUploadItem-BVpJPeDY.js";import"./paperclip-XR-iQcxM.js";import"./calendar-CxnSCOIT.js";import"./circle-alert-DZLq6OZ1.js";import"./FinancialDataTab.vue_vue_type_script_setup_true_lang-j2-grQHV.js";import"./Label.vue_vue_type_script_setup_true_lang-wMASokdh.js";import"./FamilyLoadSection.vue_vue_type_script_setup_true_lang-Dge1R5NS.js";import"./PersonalDataTab.vue_vue_type_script_setup_true_lang-vKZFC8KE.js";import"./EmergencyContactSection.vue_vue_type_script_setup_true_lang-B0sx1Kdz.js";import"./triangle-alert-D0OAwW88.js";import"./info-DoZUXwt2.js";import"./PhotoUploadSection.vue_vue_type_script_setup_true_lang-3fM_stvJ.js";import"./InputSearchRole.vue_vue_type_script_setup_true_lang-D_v81Zdx.js";import"./plus-BNrKV-Js.js";import"./InputSearchSelectable.vue_vue_type_script_setup_true_lang-G6YoyRTs.js";import"./InputSelectableUnit.vue_vue_type_script_setup_true_lang-CX0Ei1L1.js";import"./user-round-CEUgVfG_.js";import"./eye-24CjmhB_.js";import"./person-standing-WbxGskIT.js";import"./mail-VAH0x7xf.js";import"./SizesTab.vue_vue_type_script_setup_true_lang-BvTXUm2M.js";import"./pencil-D1OyW6n_.js";import"./useStaffConstants-le5qxccj.js";import"./index-Dvt3lMNB.js";import"./ChangeStatusModal.vue_vue_type_script_setup_true_lang-zwpSgJwf.js";import"./FilesModal.vue_vue_type_script_setup_true_lang-Dcwl5fir.js";import"./upload-DRhQBLJt.js";import"./trash-2-Dt4t2p18.js";function K(b){return{deleteStaff:async m=>{if(confirm("¿Estás seguro de eliminar a este personal?"))try{await R.delete(`/staff/${m}`),b(m)}catch(u){console.error("Error al eliminar personal:",u),alert("Ocurrió un error al intentar eliminar el registro.")}}}}const W={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4"},X={class:"flex items-center justify-between"},Y={class:"flex items-center"},Z={class:"bg-card rounded-xl border shadow-sm"},ee={class:"space-y-4 md:hidden p-4"},te={key:0,class:"py-12 text-center"},se={key:0,class:"flex items-center justify-between border-t p-4"},oe={class:"text-sm text-muted-foreground"},re={class:"flex items-center gap-2"},ie={class:"text-sm font-medium"},c=10,Pt=I({__name:"Index",props:{cafes:{},staff:{},roles:{},units:{},businneses:{}},setup(b){const s=b,m=k(s.staff);V(()=>s.staff,l=>{m.value=l});const{filteredStaff:u,searchQuery:h,selectedUnitId:x}=G(m),{deleteStaff:y}=K(l=>{m.value=m.value.filter(e=>e.id!==l)}),r=k(1),v=C(()=>Math.ceil(u.value.length/c)),_=C(()=>{const l=(r.value-1)*c,e=l+c;return u.value.slice(l,e)}),D=()=>{r.value<v.value&&r.value++},j=()=>{r.value>1&&r.value--};return V(u,()=>{r.value=1}),(l,e)=>(p(),d(S,null,[o(t(O),{title:"Personal"}),o(L,null,{default:n(()=>[a("div",W,[a("div",X,[e[2]||(e[2]=a("h1",{class:"text-2xl font-semibold tracking-tight"},"Personal",-1)),o(Q,{cafes:s.cafes,roles:s.roles,units:s.units,businneses:s.businneses},null,8,["cafes","roles","units","businneses"])]),a("div",Y,[o(E,{type:"text",placeholder:"Buscar personal por dni o nombre",modelValue:t(h),"onUpdate:modelValue":e[0]||(e[0]=i=>P(h)?h.value=i:null)},null,8,["modelValue"]),o(t(F),{modelValue:t(x),"onUpdate:modelValue":e[1]||(e[1]=i=>P(x)?x.value=i:null)},{default:n(()=>[o(t(M),{class:"h-10 border-zinc-200 bg-white hover:bg-zinc-50 ml-2 w-[200px]"},{default:n(()=>[o(t(U),{placeholder:"Seleccionar unidad"})]),_:1}),o(t(A),{class:"border-zinc-200 bg-white shadow-lg"},{default:n(()=>[o(t($),{value:"0",class:"hover:bg-zinc-50"},{default:n(()=>e[3]||(e[3]=[g(" Ninguna ")])),_:1}),(p(!0),d(S,null,z(l.units,i=>(p(),N(t($),{value:String(i.id),class:"hover:bg-zinc-50",key:i.id},{default:n(()=>[g(f(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),a("div",Z,[o(T,{"staff-list":_.value,cafes:s.cafes,roles:s.roles,units:s.units,businesses:s.businneses,onDeleteStaff:t(y)},null,8,["staff-list","cafes","roles","units","businesses","onDeleteStaff"]),a("div",ee,[(p(!0),d(S,null,z(_.value,i=>(p(),N(q,{key:i.id,staff:i,cafes:s.cafes,roles:s.roles,units:s.units,businesses:s.businneses,onDeleteStaff:t(y)},null,8,["staff","cafes","roles","units","businesses","onDeleteStaff"]))),128)),!_.value||_.value.length===0?(p(),d("div",te,e[4]||(e[4]=[a("p",{class:"text-muted-foreground"},"No hay personal registrado",-1)]))):B("",!0)]),v.value>1?(p(),d("div",se,[a("div",oe," Mostrando "+f((r.value-1)*c+1)+" - "+f(Math.min(r.value*c,t(u).length))+" de "+f(t(u).length)+" registros ",1),a("div",re,[o(t(w),{variant:"outline",size:"sm",disabled:r.value===1,onClick:j},{default:n(()=>[o(t(H),{class:"h-4 w-4"}),e[5]||(e[5]=g(" Anterior "))]),_:1},8,["disabled"]),a("div",ie," Página "+f(r.value)+" de "+f(v.value),1),o(t(w),{variant:"outline",size:"sm",disabled:r.value===v.value,onClick:D},{default:n(()=>[e[6]||(e[6]=g(" Siguiente ")),o(t(J),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):B("",!0)])])]),_:1})],64))}});export{Pt as default};
