import{d as K,r as C,s as z,c as u,o as i,a as s,u as t,m as H,w as o,b as e,P as D,t as d,F as x,l as v,g as b,e as f,x as Q,i as S,n as F,W as V}from"./app-B1UaLdox.js";import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-tB2LFg85.js";import{_ as $}from"./index-V6DVQKWY.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-BH8Fewpj.js";import{_ as A}from"./index-COEeMTj3.js";import{_ as w}from"./Card.vue_vue_type_script_setup_true_lang-yNduM--B.js";import{_ as y}from"./CardContent.vue_vue_type_script_setup_true_lang-CEIqxrqg.js";import{_ as G,a as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cyd_QCSk.js";import{_ as J,a as O,b as Y,c as Z,d as ee}from"./SelectValue.vue_vue_type_script_setup_true_lang-G63AOEOC.js";import{B as _,A as te}from"./briefcase-DItwDouI.js";import{P as se}from"./package-DGtqqQpG.js";import{S as P,C as le}from"./shirt-BY2pHJHv.js";import{C as ae}from"./check-CfOBMbGs.js";import{P as T}from"./plus-BGKrB74n.js";import{X as U}from"./x-DWJuEs6G.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-bRKmu4jq.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BOoBQx1v.js";import"./Presence-DObgtBG2.js";import"./Primitive-CdPTFqKH.js";import"./useForwardExpose--c-L2hpQ.js";import"./PopperContent-BEQQBugc.js";import"./Teleport-nMAfT253.js";import"./VisuallyHidden-Dut3rQg1.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-dOZOXa37.js";import"./utils-Dnoe29ML.js";import"./useTypeahead-BwBClMeY.js";import"./RovingFocusGroup-uZsQqghL.js";import"./usePrimitiveElement-DLaEkCZk.js";import"./Collection-CTxjRTpa.js";import"./utensils-DiNw7AYZ.js";import"./createLucideIcon-C1KSzqJD.js";import"./DialogTitle-cvFzU5XT.js";import"./DialogDescription-BKmOG1t3.js";import"./hand-helping-BFAOPNeZ.js";import"./building-2-zI7l74eW.js";import"./user-DSIvdlxx.js";import"./chevron-right-DYq5Jm9W.js";import"./chevron-down-B66uAN2e.js";import"./chevron-up-COChD-d-.js";import"./useFormControl-C-L4jwb2.js";const re={class:"flex flex-col h-full w-full overflow-hidden p-4 sm:p-6 gap-6"},ie={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 flex-none"},ne={class:"min-w-0 flex-1"},de={class:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2"},ue={class:"flex items-center gap-2"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4 flex-none"},me={class:"text-2xl font-bold text-blue-900 mt-1"},fe={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},pe={class:"text-2xl font-bold text-green-900 mt-1"},ge={class:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center"},xe={class:"text-2xl font-bold text-purple-900 mt-1"},_e={class:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center"},he={class:"bg-card text-card-foreground rounded-xl border shadow-sm p-4 bg-white flex flex-col sm:flex-row gap-4 items-center flex-none"},ve={class:"flex-1 w-full flex flex-col sm:flex-row gap-4"},be={class:"flex-1"},we={class:"relative max-w-md"},ye={class:"flex-1"},ke={class:"relative max-w-md"},Ce={class:"flex-1 flex gap-4"},Se={class:"relative flex-1 max-w-md"},Ae={class:"flex flex-wrap gap-2"},Pe={class:"text-xs text-muted-foreground ml-1"},Re={key:0,class:"text-center py-4 text-muted-foreground"},Ve={class:"flex-1 overflow-auto custom-scrollbar"},$e={key:0,class:"text-center py-12"},Ne={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-4"},je={class:"flex justify-between items-start"},Be=["title"],Ie={class:"mb-4"},ze={class:"flex flex-wrap gap-2 min-h-[32px]"},De={key:0,class:"text-xs text-gray-400 italic py-1"},Fe={class:"space-y-2"},Ee=["onClick"],Ge={class:"flex items-center gap-2"},Le={class:"h-6 w-6 rounded-full border border-gray-200 flex items-center justify-center group-hover/item:border-blue-300"},Te={class:"text-sm"},Ue={key:0,class:"text-center py-4 text-gray-400 text-sm"},We={class:"p-4 border-t bg-gray-50 text-sm text-muted-foreground flex flex-col sm:flex-row justify-between items-center gap-2 flex-none"},qe={class:"flex items-center gap-4"},Me={class:"flex items-center gap-1"},Ke={class:"flex items-center gap-1"},He=K({__name:"Manage",props:{roles:{},clothes:{},cafes:{}},setup(W){const c=W,p=C(""),h=C(!1),k=C(""),g=C(c.cafes.length>0?String(c.cafes[0].id):""),N=z(()=>k.value?c.roles.filter(r=>r.name.toLowerCase().includes(k.value.toLowerCase())):c.roles),m=r=>c.clothes.filter(l=>l.roles.some(a=>a.id===r&&String(a.pivot.cafe_id)===g.value)),j=(r,l)=>r.roles.some(a=>a.id===l&&String(a.pivot.cafe_id)===g.value),B=()=>{p.value&&(h.value=!0,V.post(route("clothes.store"),{name:p.value},{onSuccess:()=>p.value="",onFinish:()=>h.value=!1}))},q=r=>{confirm("¿Seguro que deseas eliminar esta prenda y todas sus asignaciones?")&&V.delete(route("clothes.destroy",r),{preserveScroll:!0})},I=(r,l,a)=>{if(!g.value){alert("Por favor selecciona un café primero");return}V.post(route("clothes.assign-role"),{cloth_id:r,role_id:l,cafe_id:g.value,action:a?"detach":"attach"},{preserveScroll:!0,preserveState:!0})},R=z(()=>{const r=c.roles.reduce((a,n)=>a+m(n.id).length,0),l=c.roles.length>0?(r/c.roles.length).toFixed(1):"0";return{totalAssignments:r,averagePerRole:l,rolesWithAssignments:c.roles.filter(a=>m(a.id).length>0).length}});return(r,l)=>(i(),u(x,null,[s(t(H),{title:"Gestión de Ropa por Rol"}),s(X,{breadcrumbs:[{title:"Personal",href:r.route("staff.index")},{title:"Ropa",href:r.route("clothes.index")},{title:"Matriz de Asignación",href:r.route("clothes.manage")}]},{default:o(()=>[e("div",re,[e("div",ie,[e("div",ne,[e("h1",de,[s(t(_),{class:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),l[3]||(l[3]=e("span",null,"Asignación de Prendas por Rol",-1))]),l[4]||(l[4]=e("p",{class:"text-muted-foreground text-xs sm:text-sm mt-1"}," Selecciona las prendas asignadas a cada rol/cargo ",-1))]),e("div",ue,[s(t(D),{href:r.route("inventory.index")},{default:o(()=>[s(t($),{variant:"outline",size:"sm",class:"gap-2"},{default:o(()=>[s(t(se),{class:"h-4 w-4"}),l[5]||(l[5]=e("span",{class:"hidden sm:inline"},"Inventario",-1))]),_:1})]),_:1},8,["href"]),s(t(D),{href:r.route("clothes.index"),class:"flex-shrink-0"},{default:o(()=>[s(t($),{variant:"outline",size:"sm",class:"gap-2"},{default:o(()=>[s(t(te),{class:"h-4 w-4"}),l[6]||(l[6]=e("span",{class:"hidden sm:inline"},"Volver al listado",-1)),l[7]||(l[7]=e("span",{class:"sm:hidden"},"Volver",-1))]),_:1})]),_:1},8,["href"])])]),e("div",ce,[s(t(w),{class:"bg-gradient-to-br from-blue-50 to-white border-blue-100"},{default:o(()=>[s(t(y),{class:"p-4 flex items-center justify-between"},{default:o(()=>[e("div",null,[l[8]||(l[8]=e("p",{class:"text-sm font-medium text-blue-700"},"Total Asignaciones",-1)),e("p",me,d(R.value.totalAssignments),1)]),e("div",fe,[s(t(P),{class:"h-5 w-5 text-blue-600"})])]),_:1})]),_:1}),s(t(w),{class:"bg-gradient-to-br from-green-50 to-white border-green-100"},{default:o(()=>[s(t(y),{class:"p-4 flex items-center justify-between"},{default:o(()=>[e("div",null,[l[9]||(l[9]=e("p",{class:"text-sm font-medium text-green-700"},"Promedio por Rol",-1)),e("p",pe,d(R.value.averagePerRole),1)]),e("div",ge,[s(t(_),{class:"h-5 w-5 text-green-600"})])]),_:1})]),_:1}),s(t(w),{class:"bg-gradient-to-br from-purple-50 to-white border-purple-100"},{default:o(()=>[s(t(y),{class:"p-4 flex items-center justify-between"},{default:o(()=>[e("div",null,[l[10]||(l[10]=e("p",{class:"text-sm font-medium text-purple-700"},"Roles con Prendas",-1)),e("p",xe,d(R.value.rolesWithAssignments)+"/"+d(r.roles.length),1)]),e("div",_e,[s(t(ae),{class:"h-5 w-5 text-purple-600"})])]),_:1})]),_:1})]),e("div",he,[e("div",ve,[e("div",be,[e("div",we,[s(t(le),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(t(J),{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=a=>g.value=a)},{default:o(()=>[s(t(O),{class:"pl-9 w-full"},{default:o(()=>[s(t(Y),{placeholder:"Seleccionar Café"})]),_:1}),s(t(Z),null,{default:o(()=>[(i(!0),u(x,null,v(r.cafes,a=>(i(),b(t(ee),{key:a.id,value:String(a.id)},{default:o(()=>[f(d(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),e("div",ye,[e("div",ke,[s(t(_),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(t(E),{modelValue:k.value,"onUpdate:modelValue":l[1]||(l[1]=a=>k.value=a),placeholder:"Buscar rol...",class:"pl-9 w-full"},null,8,["modelValue"])])]),e("div",Ce,[e("div",Se,[s(t(P),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),s(t(E),{modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=a=>p.value=a),placeholder:"Nueva prenda...",class:"pl-9 w-full",onKeyup:Q(B,["enter"])},null,8,["modelValue"])]),s(t($),{onClick:B,disabled:h.value||!p.value,class:"sm:w-auto"},{default:o(()=>[h.value?S("",!0):(i(),b(t(T),{key:0,class:"h-4 w-4 mr-2"})),f(" "+d(h.value?"Guardando...":"Agregar"),1)]),_:1},8,["disabled"])])])]),s(t(w),{class:"flex-none"},{default:o(()=>[s(t(G),{class:"pb-3"},{default:o(()=>[s(t(L),{class:"text-base flex items-center gap-2"},{default:o(()=>[s(t(P),{class:"h-4 w-4"}),l[11]||(l[11]=f(" Todas las Prendas Disponibles "))]),_:1})]),_:1}),s(t(y),null,{default:o(()=>[e("div",Ae,[(i(!0),u(x,null,v(r.clothes,a=>(i(),b(t(A),{key:a.id,variant:"outline",class:"cursor-pointer group relative px-3 py-1.5",onClick:n=>q(a.id)},{default:o(()=>[e("span",null,d(a.name),1),s(t(U),{class:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity text-red-500"}),e("span",Pe," ("+d(a.roles.length)+") ",1)]),_:2},1032,["onClick"]))),128)),r.clothes.length===0?(i(),u("div",Re," No hay prendas registradas. ¡Agrega la primera! ")):S("",!0)])]),_:1})]),_:1}),e("div",Ve,[N.value.length===0?(i(),u("div",$e,[s(t(_),{class:"h-12 w-12 mx-auto text-gray-300 mb-4"}),l[12]||(l[12]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No se encontraron roles",-1)),l[13]||(l[13]=e("p",{class:"text-gray-500"},"Intenta con otros términos de búsqueda",-1))])):(i(),u("div",Ne,[(i(!0),u(x,null,v(N.value,a=>(i(),b(t(w),{key:a.id,class:F(["group hover:shadow-md transition-shadow",{"border-blue-200 bg-blue-50/50":m(a.id).length>0,"border-gray-200":m(a.id).length===0}])},{default:o(()=>[s(t(G),{class:"pb-3"},{default:o(()=>[e("div",je,[s(t(L),{class:"text-base flex items-center gap-2"},{default:o(()=>[s(t(_),{class:"h-4 w-4 text-primary"}),e("span",{class:"truncate",title:a.name},d(a.name),9,Be)]),_:2},1024),s(t(A),{variant:"secondary",class:F(["flex-shrink-0 ml-2",{"bg-blue-100 text-blue-800":m(a.id).length>0,"bg-gray-100 text-gray-600":m(a.id).length===0}])},{default:o(()=>[f(d(m(a.id).length),1)]),_:2},1032,["class"])])]),_:2},1024),s(t(y),null,{default:o(()=>[e("div",Ie,[l[14]||(l[14]=e("p",{class:"text-xs font-medium text-gray-500 mb-2"},"PRENDAS ASIGNADAS:",-1)),e("div",ze,[(i(!0),u(x,null,v(m(a.id),n=>(i(),b(t(A),{key:n.id,variant:"default",class:"cursor-pointer group",onClick:M=>I(n.id,a.id,!0)},{default:o(()=>[e("span",null,d(n.name),1),s(t(U),{class:"h-3 w-3 ml-1 group-hover:scale-110 transition-transform"})]),_:2},1032,["onClick"]))),128)),m(a.id).length===0?(i(),u("div",De," Sin prendas asignadas ")):S("",!0)])]),l[15]||(l[15]=e("div",{class:"relative my-4"},[e("div",{class:"absolute inset-0 flex items-center"},[e("div",{class:"w-full border-t border-gray-200"})]),e("div",{class:"relative flex justify-center text-xs"},[e("span",{class:"px-2 bg-white text-gray-500"},"ASIGNAR NUEVAS PRENDAS")])],-1)),e("div",Fe,[(i(!0),u(x,null,v(r.clothes.filter(n=>!j(n,a.id)),n=>(i(),u("div",{key:n.id,class:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer group/item",onClick:M=>I(n.id,a.id,!1)},[e("div",Ge,[e("div",Le,[s(t(T),{class:"h-3 w-3 text-gray-400 group-hover/item:text-blue-500"})]),e("span",Te,d(n.name),1)]),s(t(A),{variant:"outline",class:"text-xs"},{default:o(()=>[f(d(n.roles.length)+" roles ",1)]),_:2},1024)],8,Ee))),128)),r.clothes.filter(n=>!j(n,a.id)).length===0?(i(),u("div",Ue," Todas las prendas están asignadas a este rol ")):S("",!0)])]),_:2},1024)]),_:2},1032,["class"]))),128))]))]),e("div",We,[e("div",qe,[e("span",Me,[s(t(_),{class:"h-3 w-3"}),f(" "+d(r.roles.length)+" Roles ",1)]),e("span",Ke,[s(t(P),{class:"h-3 w-3"}),f(" "+d(r.clothes.length)+" Prendas ",1)])]),l[16]||(l[16]=e("div",{class:"text-xs text-gray-500"}," Haz clic en una prenda para asignarla o quitarla de un rol ",-1))])])]),_:1},8,["breadcrumbs"])],64))}}),Dt=oe(He,[["__scopeId","data-v-baa1bf98"]]);export{Dt as default};
