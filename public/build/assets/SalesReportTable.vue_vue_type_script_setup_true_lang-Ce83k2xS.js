import{_ as P,a as b,b as x,c as A,d as f,e as B}from"./TableHeader.vue_vue_type_script_setup_true_lang-DPmUQslb.js";import{d as H,j as M,s as E,c as u,o as d,a as e,i as g,w as n,u as a,e as c,g as y,F as h,p as j,b as o,t as r,n as I,P as R}from"./app-DdAj0Exq.js";import{_ as m}from"./Icon.vue_vue_type_script_setup_true_lang-CSjUKGX1.js";import{_ as v}from"./index-DwtO24-8.js";import{_ as q}from"./index-C2ZWolY3.js";import{b as G,_ as J,a as K}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-BOBkre3D.js";const O={class:"overflow-x-auto"},Q={class:"flex flex-col"},U={class:"text-[13px] font-bold text-slate-900"},W={class:"text-[10px] text-slate-400 font-medium uppercase tracking-tight"},X={class:"flex flex-col"},Y={class:"text-[13px] font-bold text-slate-700"},Z={key:0,class:"text-[10px] text-slate-400 font-medium"},tt={class:"flex items-center gap-3"},et={class:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center text-primary font-bold text-xs"},st=["title"],at={class:"space-y-3"},nt={class:"border-b pb-2"},ot={class:"text-xs text-slate-500"},it={class:"space-y-2 text-sm"},rt={class:"flex justify-between"},lt={class:"font-semibold"},dt={class:"flex justify-between"},ct={class:"font-semibold"},pt={class:"flex justify-between"},ft={class:"font-semibold"},ut={class:"flex justify-between border-t pt-2"},xt={class:"font-black text-emerald-600"},mt={key:0,class:"px-4 py-3 border-t border-slate-100 bg-slate-50/50 flex items-center justify-center gap-1.5"},_t=["innerHTML"],wt=H({__name:"SalesReportTable",props:{sales:{},paginateData:{}},emits:["deleteSale"],setup(T,{emit:z}){const V=T,L=z,_=M([]);E(()=>V.sales,i=>{_.value=[...i]},{immediate:!0});const F=(i,s)=>{window.open("/print-ticket/"+i+"/"+s,"_blank")},k=i=>i.includes("Previous")?"Anterior":i.includes("Next")?"Siguiente":i,w=i=>new Date(i.replace(/-/g,"/")).toLocaleDateString("es-PE",{day:"2-digit",month:"short",year:"numeric"});return(i,s)=>(d(),u("div",O,[e(a(B),null,{default:n(()=>[e(a(P),null,{default:n(()=>[e(a(b),{class:"bg-slate-50/80 hover:bg-slate-50/80 border-b-slate-200"},{default:n(()=>[e(a(x),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:n(()=>s[0]||(s[0]=[c("Fecha")])),_:1}),e(a(x),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:n(()=>s[1]||(s[1]=[c("Cafetería")])),_:1}),e(a(x),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:n(()=>s[2]||(s[2]=[c("DNI")])),_:1}),e(a(x),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:n(()=>s[3]||(s[3]=[c("Comensal")])),_:1}),e(a(x),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:n(()=>s[4]||(s[4]=[c("Importe")])),_:1}),e(a(x),{class:"text-right py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:n(()=>s[5]||(s[5]=[c("Acciones")])),_:1})]),_:1})]),_:1}),e(a(A),null,{default:n(()=>[(d(!0),u(h,null,j(_.value,t=>(d(),y(a(b),{key:t.id,class:"hover:bg-slate-50/50 transition-all border-b-slate-100 last:border-0 group"},{default:n(()=>[e(a(f),{class:"py-3"},{default:n(()=>[o("div",Q,[o("span",U,r(w(t.date)),1),o("span",W,"Registro #"+r(t.id),1)])]),_:2},1024),e(a(f),{class:"py-3"},{default:n(()=>[o("div",X,[o("span",Y,r(t.cafe.name),1),t.cafe.unit?(d(),u("span",Z,r(t.cafe.unit.name),1)):g("",!0)])]),_:2},1024),e(a(f),{class:"py-3"},{default:n(()=>[e(a(q),{variant:"secondary",class:"font-bold text-[10px] bg-slate-100 text-slate-600 border-none"},{default:n(()=>{var l,p;return[e(m,{name:"id-card",size:"10",class:"mr-1"}),c(" "+r(((p=(l=t==null?void 0:t.tickets[0])==null?void 0:l.dinner)==null?void 0:p.dni)||"N/A"),1)]}),_:2},1024)]),_:2},1024),e(a(f),{class:"py-3"},{default:n(()=>{var l,p,$,C,D,N,S;return[o("div",tt,[o("div",et,r((($=(p=(l=t==null?void 0:t.tickets[0])==null?void 0:l.dinner)==null?void 0:p.name)==null?void 0:$.charAt(0))||"?"),1),o("span",{class:"text-[13px] font-bold text-slate-700 truncate max-w-[150px]",title:(D=(C=t==null?void 0:t.tickets[0])==null?void 0:C.dinner)==null?void 0:D.name},r(((S=(N=t==null?void 0:t.tickets[0])==null?void 0:N.dinner)==null?void 0:S.name)||"Sin nombre"),9,st)])]}),_:2},1024),e(a(f),{class:"py-3 font-black text-slate-900 text-[13px]"},{default:n(()=>[c(" S/"+r(Number(t.total).toFixed(2)),1)]),_:2},1024),e(a(f),{class:"text-right py-3 space-x-1"},{default:n(()=>[e(a(v),{variant:"ghost",size:"icon",onClick:l=>F(t.id,1),title:"Imprimir Ticket",class:"h-8 w-8 rounded-lg hover:bg-primary/10 hover:text-primary transition-colors"},{default:n(()=>[e(m,{name:"printer",size:"14"})]),_:2},1032,["onClick"]),e(a(G),null,{default:n(()=>[e(a(J),{"as-child":""},{default:n(()=>[e(a(v),{variant:"ghost",size:"icon",title:"Ver Detalles",class:"h-8 w-8 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-colors"},{default:n(()=>[e(m,{name:"eye",size:"14"})]),_:1})]),_:1}),e(a(K),{class:"w-80"},{default:n(()=>{var l,p;return[o("div",at,[o("div",nt,[s[6]||(s[6]=o("h4",{class:"font-bold text-sm text-slate-900"},"Detalles de la Venta",-1)),o("p",ot,"Venta #"+r(t.id),1)]),o("div",it,[o("div",rt,[s[7]||(s[7]=o("span",{class:"text-slate-600"},"Fecha:",-1)),o("span",lt,r(w(t.date)),1)]),o("div",dt,[s[8]||(s[8]=o("span",{class:"text-slate-600"},"Cafetería:",-1)),o("span",ct,r(t.cafe.name),1)]),o("div",pt,[s[9]||(s[9]=o("span",{class:"text-slate-600"},"Comensal:",-1)),o("span",ft,r(((p=(l=t==null?void 0:t.tickets[0])==null?void 0:l.dinner)==null?void 0:p.name)||"N/A"),1)]),o("div",ut,[s[10]||(s[10]=o("span",{class:"text-slate-600 font-bold"},"Total:",-1)),o("span",xt,"S/"+r(Number(t.total).toFixed(2)),1)])])])]}),_:2},1024)]),_:2},1024),e(a(v),{variant:"ghost",size:"icon",onClick:l=>L("deleteSale",t.id),title:"Eliminar Venta",class:"h-8 w-8 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors"},{default:n(()=>[e(m,{name:"trash",size:"14"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),_.value.length===0?(d(),y(a(b),{key:0},{default:n(()=>[e(a(f),{colspan:"6",class:"h-32 text-center text-slate-400 text-sm italic font-medium"},{default:n(()=>s[11]||(s[11]=[c(" No hay ventas registradas con los filtros seleccionados. ")])),_:1})]),_:1})):g("",!0)]),_:1})]),_:1}),i.paginateData.links&&i.paginateData.links.length>3?(d(),u("div",mt,[(d(!0),u(h,null,j(i.paginateData.links,t=>(d(),u(h,{key:t.label},[t.url?(d(),y(a(R),{key:0,href:t.url,class:I(["h-8 min-w-[32px] px-2.5 flex items-center justify-center text-[11px] font-bold rounded-lg transition-all border shadow-sm",{"bg-primary text-primary-foreground border-primary":t.active,"bg-white hover:bg-slate-50 border-slate-200 text-slate-600":!t.active}]),innerHTML:k(t.label),"preserve-scroll":""},null,8,["href","class","innerHTML"])):(d(),u("span",{key:1,class:"h-8 min-w-[32px] px-2.5 flex items-center justify-center text-[11px] font-bold text-slate-300 rounded-lg pointer-events-none",innerHTML:k(t.label)},null,8,_t))],64))),128))])):g("",!0)]))}});export{wt as _};
