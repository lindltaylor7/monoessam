import{d as y,C,s as P,g as c,o as d,w as n,a as m,u as e,b as r,e as a,t as u,c as g,F as S,p as B,n as I}from"./app-D_30lCPY.js";import{_}from"./index-QN4VJNje.js";import{_ as M,a as N,b as V,c as j}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CKprfftn.js";import{_ as z}from"./DialogDescription.vue_vue_type_script_setup_true_lang-_PRpYB-A.js";import{_ as F}from"./DialogFooter.vue_vue_type_script_setup_true_lang-ojhWNjwX.js";import{_ as L}from"./Checkbox.vue_vue_type_script_setup_true_lang-BzaP3FcA.js";import{_ as b}from"./Icon.vue_vue_type_script_setup_true_lang-CsvYRPHx.js";import{S as U}from"./shield-BzLOkYwv.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Primitive-DPXPT-5q.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Presence-BPVtuLwC.js";import"./useForwardExpose-DVHaXJa7.js";import"./DialogTitle-DzGias3d.js";import"./Teleport-CWphWnx9.js";import"./utils-Cc_kZu4w.js";import"./x-BeqBtXx0.js";import"./createLucideIcon-yK0qzumI.js";import"./DialogDescription-BSM7uzkb.js";import"./check-Ls2929Rn.js";import"./RovingFocusItem-Q44zZbDx.js";import"./Collection-DZ4uY3RW.js";import"./usePrimitiveElement-DJdzkk5d.js";import"./RovingFocusGroup-DCuFZx63.js";import"./VisuallyHidden-CfVhPomW.js";import"./sandwich-BxMj5Noy.js";import"./between-horizontal-start-BMFDnqIJ.js";import"./user-round-CimlckDS.js";import"./building-2-BVeB84PC.js";import"./building-DbTLstTk.js";import"./person-standing-bU3q3XMU.js";import"./paperclip-BTFIDU4U.js";import"./calendar-DTbzER9Q.js";import"./chevron-down-CYZW4T6X.js";import"./chevron-left-BuWlhE3M.js";import"./chevron-right-BdYwrSSB.js";import"./chevron-up-Df9oSPJx.js";import"./utensils-b2iRzuqA.js";import"./circle-alert-XBx6QK5s.js";import"./triangle-alert-Dqsf-E40.js";import"./search-aqrmeJ3H.js";import"./circle-plus-uTsaTdZL.js";import"./tag-CDq2D0e1.js";import"./dollar-sign-6eSv5h7V.js";import"./upload-CxrrwCo5.js";import"./file-chart-column-GHgZ-8IE.js";import"./file-qN3D4EIv.js";import"./hand-helping-DVye06Mx.js";import"./info-DoF28chO.js";import"./lamp-desk-Cu4N7auW.js";import"./list-check-BvTyWzpb.js";import"./list-gSm-t6OH.js";import"./loader-circle-DDY6uFfm.js";import"./lock-aK1yr6eY.js";import"./mail-Ccazw0bH.js";import"./sun-DuKS5hJP.js";import"./pencil-YZkXJf-G.js";import"./phone-BZK4F8Yo.js";import"./plus-CXcrgXm0.js";import"./sheet-Caru67Ba.js";import"./shopping-cart-C0jk70-o.js";import"./soup-CwPl_U4r.js";import"./trash-2-CRTj_Xhk.js";import"./trash-BCE-XAgF.js";import"./user-plus-mRpPUE5U.js";import"./user-v9caxZgY.js";const E={class:"bg-orange-600 px-6 py-8 text-white relative"},G={class:"font-bold text-white"},O={class:"absolute -bottom-6 right-6 h-12 w-12 rounded-full bg-background flex items-center justify-center shadow-lg border"},T={class:"px-6 pt-10 pb-6 bg-background"},q={class:"mb-4 flex items-center justify-between"},A={class:"text-xs text-muted-foreground"},H={class:"font-bold text-orange-600"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-[50vh] overflow-y-auto pr-2 custom-scrollbar border rounded-xl p-4 bg-muted/5"},K=["for"],Q=y({__name:"PermissionModal",props:{open:{type:Boolean},user:{},permissions:{}},emits:["update:open"],setup(x,{emit:v}){const p=x,w=v,i=C({permissions:[],user_id:null});P(()=>p.open,t=>{if(t&&p.user){i.user_id=p.user.id;const o=p.user.permissions.map(l=>l.id),s=p.user.roles.flatMap(l=>l.permissions.map($=>$.id));i.permissions=[...new Set([...o,...s])]}});const f=t=>i.permissions.includes(t),h=t=>{const o=[...i.permissions],s=o.indexOf(t);s>-1?o.splice(s,1):o.push(t),i.permissions=o},k=()=>{p.user&&i.post(route("permissions.user.update",p.user.id),{preserveScroll:!0,onSuccess:()=>{w("update:open",!1)}})};return(t,o)=>(d(),c(e(j),{open:t.open,"onUpdate:open":o[1]||(o[1]=s=>t.$emit("update:open",s))},{default:n(()=>[m(e(M),{class:"sm:max-w-[700px] overflow-hidden p-0 gap-0 border-none shadow-2xl"},{default:n(()=>[r("div",E,[m(e(N),null,{default:n(()=>[m(e(V),{class:"text-2xl font-bold"},{default:n(()=>o[2]||(o[2]=[a("Permisos de Usuario")])),_:1}),m(e(z),{class:"text-orange-100"},{default:n(()=>{var s;return[o[3]||(o[3]=a(" Gestiona los permisos especÃ­ficos para ")),r("span",G,u((s=t.user)==null?void 0:s.name),1),o[4]||(o[4]=a(". "))]}),_:1})]),_:1}),r("div",O,[m(e(U),{class:"h-6 w-6 text-orange-600"})])]),r("div",T,[r("div",q,[o[6]||(o[6]=r("h3",{class:"text-sm font-bold uppercase tracking-wider text-muted-foreground"},"Listado de Permisos",-1)),r("div",A,[r("span",H,u(e(i).permissions.length),1),o[5]||(o[5]=a(" seleccionados "))])]),r("div",J,[(d(!0),g(S,null,B(t.permissions,s=>(d(),g("div",{key:s.id,class:I(["flex items-center space-x-3 p-2 rounded-lg transition-colors hover:bg-muted/10 border border-transparent",{"bg-orange-50 border-orange-100":f(s.id)}])},[m(e(L),{id:"perm-"+s.id,checked:f(s.id),onClick:l=>h(s.id)},null,8,["id","checked","onClick"]),r("label",{for:"perm-"+s.id,class:"text-sm font-medium leading-none cursor-pointer flex-1"},u(s.sidebar_name||s.name),9,K)],2))),128))]),m(e(F),{class:"pt-8 flex gap-2"},{default:n(()=>[m(e(_),{type:"button",variant:"ghost",onClick:o[0]||(o[0]=s=>t.$emit("update:open",!1)),class:"border"},{default:n(()=>o[7]||(o[7]=[a("Cancelar")])),_:1}),m(e(_),{onClick:k,disabled:e(i).processing,class:"flex-1 bg-orange-600 hover:bg-orange-700 shadow-md text-white font-semibold"},{default:n(()=>[e(i).processing?(d(),c(b,{key:0,name:"loader-2",class:"mr-2 h-4 w-4 animate-spin"})):(d(),c(b,{key:1,name:"save",class:"mr-2 h-4 w-4"})),o[8]||(o[8]=a(" Sincronizar Permisos "))]),_:1},8,["disabled"])]),_:1})])]),_:1})]),_:1},8,["open"]))}}),as=D(Q,[["__scopeId","data-v-129efb59"]]);export{as as default};
