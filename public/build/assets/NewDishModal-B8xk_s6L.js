import{_ as V}from"./index-DpgMMlKQ.js";import{_ as j,a as z,b as A,c as G}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DwCCe1VU.js";import{_ as K}from"./DialogFooter.vue_vue_type_script_setup_true_lang-B0NV6Kd9.js";import{_ as H}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-D0htdjR-.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-B6C72Mwn.js";import{_ as J,a as Q,b as R,c as X,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-CToYXGco.js";import{_ as Y}from"./SelectGroup.vue_vue_type_script_setup_true_lang-CaFyVKcA.js";import{_ as Z}from"./SelectLabel.vue_vue_type_script_setup_true_lang-B_cwvzXX.js";import{e as h,_ as tt,a as S,b as c,c as et,d as v}from"./TableHeader.vue_vue_type_script_setup_true_lang-ByUdf-Hj.js";import{_ as lt}from"./TableCaption.vue_vue_type_script_setup_true_lang-C_cV3s8w.js";import{d as at,r as d,C as st,g as q,o as p,w as a,a as l,u as e,b as n,e as r,c as T,F as M,l as N,t as u}from"./app-D-LqQbZa.js";import ot from"./CalcPopover-mi-Gck-i.js";import{P as rt}from"./plus-D4e7NBze.js";import{T as it}from"./trash-BvV3zZaY.js";import"./Primitive-D2E4zh-F.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Presence-5rM4SnOx.js";import"./useForwardExpose-C0s566w4.js";import"./DialogTitle-CIiJ2IkS.js";import"./Teleport-C90D5m2n.js";import"./utils-DrB2bsOv.js";import"./x-b92faefF.js";import"./createLucideIcon-Ds2iLTpM.js";import"./chevron-down-CLUrzGV_.js";import"./chevron-up-a8bJVb19.js";import"./Collection-D9d2Sq_a.js";import"./usePrimitiveElement-EZ5wwPph.js";import"./check-DoDSKdKK.js";import"./PopperContent-BmDe8RlA.js";import"./useTypeahead-D3motRUW.js";import"./useFormControl-CdIo0Tlf.js";import"./VisuallyHidden-BMVg-pqG.js";import"./Label.vue_vue_type_script_setup_true_lang-DM9lszr3.js";import"./PopoverTrigger.vue_vue_type_script_setup_true_lang-wUrEfUnv.js";import"./Separator.vue_vue_type_script_setup_true_lang-B8CLVqH5.js";import"./scale-CZ8pgDg-.js";import"./truck-B8h0KZmM.js";import"./dollar-sign-pfe3naiy.js";import"./trash-2-BCJ-1ccr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const nt={class:"flex w-full flex-row"},ut={class:"flex flex-col"},dt={class:"grid grid-cols-3 gap-4"},mt={class:""},pt={class:"col-span-2"},ft={class:"flex w-full flex-col"},ee=at({__name:"NewDishModal",props:{cafes:{type:Array,required:!0},headquarters:{type:Array,required:!0},ingredients:{type:Array}},setup(W){const D=W,g=d(0),C=d(0),y=d(0),w=d(0),$=d(0),x=d(0),P=d(!1),b=d([]),o=st({name:"",description:"",mesearument_unit:"",ingredients:[]}),L=()=>{o.post(route("dish-category-insert"),{onSuccess:()=>{P.value=!1,o.reset()}})},B=(i,t)=>{const s=[{property:"gross_weight",totalProperty:g,resultCalc:t[0]},{property:"solid_waste",totalProperty:C,resultCalc:t[1]},{property:"liquid_waste",totalProperty:y,resultCalc:t[2]},{property:"calories",totalProperty:w,resultCalc:t[3]},{property:"cost",totalProperty:$,resultCalc:t[4]},{property:"final_product",totalProperty:x,resultCalc:t[5]}],f=o.ingredients.findIndex(m=>m.id==i);s.forEach(m=>{f!==-1&&(o.ingredients[f][m.property]=m.resultCalc,m.totalProperty.value=o.ingredients.reduce((E,O)=>E+(parseFloat(O[m.property])||0),0))})},F=i=>{i.originalValues={liquid_waste:i.liquid_waste,solid_waste:i.solid_waste,calories:i.calories},o.ingredients=[...o.ingredients||[],i]},I=i=>{o.ingredients=o.ingredients.filter(t=>t.id!==i)},U=i=>{var t;i.target.value==""?b.value=[]:b.value=(t=D.ingredients)==null?void 0:t.filter(s=>s.name.toLowerCase().includes(i.target.value)).slice(0,10)};return(i,t)=>(p(),q(e(G),{open:P.value,"onUpdate:open":t[3]||(t[3]=s=>P.value=s)},{default:a(()=>[l(e(H),null,{default:a(()=>[l(V,{title:"Agregar Area",class:"h-full w-auto bg-green-400"},{default:a(()=>[l(e(rt))]),_:1})]),_:1}),l(e(j),{class:"w-full max-w-[90vw] lg:max-w-[1200px]"},{default:a(()=>[l(e(z),null,{default:a(()=>[l(e(A),null,{default:a(()=>t[4]||(t[4]=[r("Nuevo Plato")])),_:1}),l(e(k),{modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=s=>e(o).name=s),type:"text",placeholder:"Nombre"},null,8,["modelValue"]),l(e(k),{modelValue:e(o).description,"onUpdate:modelValue":t[1]||(t[1]=s=>e(o).description=s),type:"text",placeholder:"Descripción"},null,8,["modelValue"])]),_:1}),n("div",nt,[l(e(J),{modelValue:e(o).mesearument_unit,"onUpdate:modelValue":t[2]||(t[2]=s=>e(o).mesearument_unit=s)},{default:a(()=>[l(e(Q),null,{default:a(()=>[l(e(R),{placeholder:"Seleccione nivel de Plato"})]),_:1}),l(e(X),null,{default:a(()=>[l(e(Y),null,{default:a(()=>[l(e(Z),null,{default:a(()=>t[5]||(t[5]=[r("Unidades")])),_:1}),l(e(_),{value:"1"},{default:a(()=>t[6]||(t[6]=[r("Master")])),_:1}),l(e(_),{value:"2"},{default:a(()=>t[7]||(t[7]=[r("Staff")])),_:1}),l(e(_),{value:"3"},{default:a(()=>t[8]||(t[8]=[r("Empleado")])),_:1}),l(e(_),{value:"4"},{default:a(()=>t[9]||(t[9]=[r("Obrero")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),n("div",ut,[l(e(k),{type:"text",placeholder:"Buscar ingrediente",onKeyup:U}),n("div",dt,[n("div",mt,[(p(!0),T(M,null,N(b.value,s=>(p(),q(V,{key:s.id,class:"my-1 w-full bg-red-400",title:s.name,onClick:f=>F(s)},{default:a(()=>[r(u(s.name.length>35?s.name.substring(0,35)+"...":s.name),1)]),_:2},1032,["title","onClick"]))),128))]),n("div",pt,[l(e(h),null,{default:a(()=>[l(e(lt),null,{default:a(()=>t[10]||(t[10]=[r("Lista de Categoría de Platos.")])),_:1}),l(e(tt),null,{default:a(()=>[l(e(S),null,{default:a(()=>[l(e(c),{class:"w-[200px]"},{default:a(()=>t[11]||(t[11]=[r("Nombre")])),_:1}),l(e(c),{class:"w-[100px]"},{default:a(()=>t[12]||(t[12]=[r("Descripción")])),_:1}),l(e(c),{class:"w-[100px]"},{default:a(()=>t[13]||(t[13]=[r("Precio unitario")])),_:1}),l(e(c),{class:"text-right"},{default:a(()=>t[14]||(t[14]=[r("Opciones")])),_:1})]),_:1})]),_:1}),l(e(et),null,{default:a(()=>[(p(!0),T(M,null,N(e(o).ingredients,s=>(p(),q(e(S),{key:s.id},{default:a(()=>[l(e(v),{class:"font-medium"},{default:a(()=>[r(u(s.name),1)]),_:2},1024),l(e(v),{class:"font-medium"},{default:a(()=>[r(u(s.description),1)]),_:2},1024),l(e(v),{class:"font-medium"},{default:a(()=>[r(u(s.presentation),1)]),_:2},1024),l(e(v),{class:"text-right"},{default:a(()=>[l(V,{onClick:f=>I(s.id),size:"sm",class:"bg-red-500"},{default:a(()=>[l(e(it),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),l(ot,{ingredient:s,totalMateriaPrima:g.value,totalSolidWaste:C.value,totalLiquidWaste:y.value,totalCalories:w.value,totalCost:$.value,totalfinalProduct:x.value,onCalcMassiveProperties:B},null,8,["ingredient","totalMateriaPrima","totalSolidWaste","totalLiquidWaste","totalCalories","totalCost","totalfinalProduct"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])]),n("div",ft,[n("p",null,"Total Materia Prima: "+u(g.value)+" gramos",1),n("p",null,"Total Desechos solidos: "+u(C.value)+" gramos",1),n("p",null,"Total Desechos liquidos: "+u(y.value)+" gramos",1),n("p",null,"Total Calorias: "+u(w.value),1),n("p",null,"Costo total: S./ "+u($.value),1),n("p",null,"Producto Final: "+u(x.value),1)]),l(e(K),{onClick:L},{default:a(()=>t[15]||(t[15]=[r(" Agregar ")])),_:1})]),_:1})]),_:1},8,["open"]))}});export{ee as default};
