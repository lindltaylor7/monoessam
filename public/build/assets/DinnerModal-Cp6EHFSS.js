import{d as B,C as D,s as E,g as f,o as d,u as e,w as a,a as s,b as o,e as l,t as p,c,i as b,n as _,p as v,F as y,h as I}from"./app-DPIyPfP6.js";import{_ as w}from"./index-BSY35j65.js";import{c as A,a as M,b as j,_ as F}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BvNu743n.js";import{_ as P}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BNCRS2rk.js";import{_ as T}from"./DialogFooter.vue_vue_type_script_setup_true_lang-B3M0nq-F.js";import{_ as h}from"./Input.vue_vue_type_script_setup_true_lang-BkBhVn0L.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-GY2M-zBN.js";import{_ as V,a as k,b as $,c as C,d as S}from"./SelectValue.vue_vue_type_script_setup_true_lang-CoZsvi9r.js";import{_ as n}from"./Icon.vue_vue_type_script_setup_true_lang-DO9LizxT.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Primitive-RUlYZo3M.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Presence-gyLMYwB6.js";import"./useForwardExpose-VjQ2_pkl.js";import"./DialogTitle-CPzsuWRD.js";import"./Teleport-Dl654XWN.js";import"./utils-Gj-DVLb5.js";import"./x-Bo4NCI4F.js";import"./createLucideIcon-CmVClo_N.js";import"./DialogDescription-D46QdMIn.js";import"./chevron-down-CLJfm_sO.js";import"./chevron-up-B6oMSLb2.js";import"./Collection-Dw4GtWyL.js";import"./usePrimitiveElement-C-ZJ2oTg.js";import"./check-9NVF4aMl.js";import"./PopperContent-Dt3M4fTp.js";import"./useTypeahead-KoQ0TJE9.js";import"./useFormControl-Bw7zWBgI.js";import"./VisuallyHidden-BQSTESJX.js";import"./between-horizontal-start-m5D_4MTd.js";import"./user-round-CyCEOgav.js";import"./building-2-CfkvSQ0g.js";import"./person-standing-CQhxtmri.js";import"./paperclip-Dwk_INAV.js";import"./calendar-CZbyeBnm.js";import"./chevron-left-DvRlfOzU.js";import"./chevron-right-DPpMDZIN.js";import"./utensils-D5ahX8L2.js";import"./circle-alert-C0F4eXmY.js";import"./triangle-alert-CvVNCnyv.js";import"./search-CKm69XSi.js";import"./circle-plus-g0N8AyFC.js";import"./dollar-sign-xrL3m_Mj.js";import"./upload-DZazRtdY.js";import"./file-chart-column-V3lU5551.js";import"./hand-helping-DcfY2zmJ.js";import"./info-Bv5YsnfX.js";import"./lamp-desk-CXoGa2E_.js";import"./list-check-zyNRMtJG.js";import"./sheet-BcDXty5r.js";import"./loader-circle-CawVu4wf.js";import"./lock-DIX4xGuu.js";import"./mail-CeefDNMQ.js";import"./sun-kf33qZ2W.js";import"./pencil-DQwG7MOA.js";import"./plus-C3doKKr_.js";import"./shield-BPFN-M17.js";import"./shopping-cart-DQOQ9w4d.js";import"./soup-DcrPkuH4.js";import"./trash-2-B9mQKF3-.js";import"./trash-C9-aXFbu.js";import"./user-plus-CORXD_-e.js";import"./user-Cds7FcI6.js";const L={class:"bg-gradient-to-r from-primary to-primary/80 px-8 py-10 text-primary-foreground relative overflow-hidden"},q={class:"absolute -bottom-6 right-8 h-14 w-14 rounded-2xl bg-white flex items-center justify-center shadow-xl border border-primary/10 rotate-3 group-hover:rotate-0 transition-transform"},G={class:"space-y-6 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar"},H={class:"space-y-4"},K={class:"grid gap-2"},O={class:"relative group"},Q={key:0,class:"text-[0.7rem] font-bold text-destructive mt-1 ml-1 flex items-center gap-1"},R={class:"grid grid-cols-2 gap-4"},W={class:"grid gap-2"},X={class:"relative group"},Y={key:0,class:"text-[0.7rem] font-bold text-destructive mt-1 ml-1 flex items-center gap-1"},Z={class:"grid gap-2"},ee={class:"relative group"},re={key:0,class:"text-[0.7rem] font-bold text-destructive mt-1 ml-1 flex items-center gap-1"},te={class:"space-y-4 pt-2"},se={class:"grid gap-2"},oe={class:"flex items-center gap-2"},ae={key:0,class:"text-[0.7rem] font-bold text-destructive mt-1 ml-1 flex items-center gap-1"},ie={class:"grid gap-2"},le={class:"flex items-center gap-2"},ne={key:0,class:"text-[0.7rem] font-bold text-destructive mt-1 ml-1 flex items-center gap-1"},de=B({__name:"DinnerModal",props:{open:{type:Boolean},dinner:{},cafes:{},subdealerships:{}},emits:["update:open","success"],setup(z,{emit:N}){const u=z,g=N,r=D({name:"",dni:"",phone:"",subdealership_id:"",cafe_id:""});E(()=>u.open,m=>{m&&(u.dinner?(r.name=u.dinner.name,r.dni=u.dinner.dni,r.phone=u.dinner.phone||"",r.subdealership_id=u.dinner.subdealership_id.toString(),r.cafe_id=u.dinner.cafe_id.toString()):r.reset(),r.clearErrors())});const U=()=>{u.dinner?r.put(route("dinners.update",u.dinner.id),{onSuccess:()=>{g("update:open",!1),g("success")}}):r.post(route("dinners.store"),{onSuccess:()=>{g("update:open",!1),g("success")}})};return(m,t)=>(d(),f(e(A),{open:m.open,"onUpdate:open":t[6]||(t[6]=i=>m.$emit("update:open",i))},{default:a(()=>[s(e(F),{class:"sm:max-w-[500px] overflow-hidden p-0 gap-0 border-none shadow-2xl"},{default:a(()=>[o("div",L,[t[7]||(t[7]=o("div",{class:"absolute top-0 right-0 -mr-8 -mt-8 h-32 w-32 rounded-full bg-white/10 blur-2xl"},null,-1)),t[8]||(t[8]=o("div",{class:"absolute bottom-0 left-0 -ml-8 -mb-8 h-24 w-24 rounded-full bg-black/10 blur-xl"},null,-1)),s(e(M),{class:"relative z-10"},{default:a(()=>[s(e(j),{class:"text-3xl font-extrabold tracking-tight"},{default:a(()=>[l(p(m.dinner?"Editar Comensal":"Nuevo Comensal"),1)]),_:1}),s(e(P),{class:"text-primary-foreground/80 font-medium mt-1"},{default:a(()=>[l(p(m.dinner?"Actualiza los datos del perfil del comensal.":"Completa el formulario para registrar un nuevo comensal."),1)]),_:1})]),_:1}),o("div",q,[s(n,{name:m.dinner?"user-cog":"user-plus",class:"h-7 w-7 text-primary"},null,8,["name"])])]),o("form",{onSubmit:I(U,["prevent"]),class:"p-8 bg-white"},[o("div",G,[o("div",H,[t[12]||(t[12]=o("div",{class:"flex items-center gap-2 mb-2"},[o("div",{class:"h-1 w-8 bg-primary rounded-full"}),o("span",{class:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400"},"Información Personal")],-1)),o("div",K,[s(e(x),{for:"name",class:"text-xs font-bold text-slate-700 ml-1"},{default:a(()=>t[9]||(t[9]=[l("Nombre Completo")])),_:1}),o("div",O,[s(n,{name:"user",class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 group-focus-within:text-primary transition-colors"}),s(e(h),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":t[0]||(t[0]=i=>e(r).name=i),placeholder:"Ej. Juan Pérez",class:_([{"border-destructive ring-destructive/20":e(r).errors.name},"h-11 pl-10 border-slate-200 rounded-xl focus:ring-primary/20 focus:border-primary transition-all shadow-sm"])},null,8,["modelValue","class"])]),e(r).errors.name?(d(),c("p",Q,[s(n,{name:"alert-circle",size:"10"}),l(" "+p(e(r).errors.name),1)])):b("",!0)]),o("div",R,[o("div",W,[s(e(x),{for:"dni",class:"text-xs font-bold text-slate-700 ml-1"},{default:a(()=>t[10]||(t[10]=[l("DNI")])),_:1}),o("div",X,[s(n,{name:"id-card",class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 group-focus-within:text-primary transition-colors"}),s(e(h),{id:"dni",modelValue:e(r).dni,"onUpdate:modelValue":t[1]||(t[1]=i=>e(r).dni=i),placeholder:"12345678",maxlength:"8",class:_([{"border-destructive ring-destructive/20":e(r).errors.dni},"h-11 pl-10 border-slate-200 rounded-xl focus:ring-primary/20 focus:border-primary transition-all shadow-sm"])},null,8,["modelValue","class"])]),e(r).errors.dni?(d(),c("p",Y,[s(n,{name:"alert-circle",size:"10"}),l(" "+p(e(r).errors.dni),1)])):b("",!0)]),o("div",Z,[s(e(x),{for:"phone",class:"text-xs font-bold text-slate-700 ml-1"},{default:a(()=>t[11]||(t[11]=[l("Teléfono")])),_:1}),o("div",ee,[s(n,{name:"phone",class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400 group-focus-within:text-primary transition-colors"}),s(e(h),{id:"phone",modelValue:e(r).phone,"onUpdate:modelValue":t[2]||(t[2]=i=>e(r).phone=i),placeholder:"987654321",class:_([{"border-destructive ring-destructive/20":e(r).errors.phone},"h-11 pl-10 border-slate-200 rounded-xl focus:ring-primary/20 focus:border-primary transition-all shadow-sm"])},null,8,["modelValue","class"])]),e(r).errors.phone?(d(),c("p",re,[s(n,{name:"alert-circle",size:"10"}),l(" "+p(e(r).errors.phone),1)])):b("",!0)])])]),o("div",te,[t[15]||(t[15]=o("div",{class:"flex items-center gap-2 mb-2"},[o("div",{class:"h-1 w-8 bg-primary rounded-full"}),o("span",{class:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400"},"Asignaciones")],-1)),o("div",se,[s(e(x),{for:"subdealership_id",class:"text-xs font-bold text-slate-700 ml-1"},{default:a(()=>t[13]||(t[13]=[l("Subconcesionaria")])),_:1}),s(e(V),{modelValue:e(r).subdealership_id,"onUpdate:modelValue":t[3]||(t[3]=i=>e(r).subdealership_id=i)},{default:a(()=>[s(e(k),{class:_([{"border-destructive ring-destructive/20":e(r).errors.subdealership_id},"h-11 border-slate-200 rounded-xl focus:ring-primary/20 focus:border-primary transition-all shadow-sm"])},{default:a(()=>[o("div",oe,[s(n,{name:"building",class:"h-4 w-4 text-slate-400"}),s(e($),{placeholder:"Seleccionar subconcesionaria"})])]),_:1},8,["class"]),s(e(C),{class:"rounded-xl shadow-xl border-slate-100"},{default:a(()=>[(d(!0),c(y,null,v(m.subdealerships,i=>(d(),f(e(S),{key:i.id,value:i.id.toString(),class:"rounded-lg my-1 mx-1 focus:bg-primary/10 focus:text-primary transition-colors"},{default:a(()=>[l(p(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.subdealership_id?(d(),c("p",ae,[s(n,{name:"alert-circle",size:"10"}),l(" "+p(e(r).errors.subdealership_id),1)])):b("",!0)]),o("div",ie,[s(e(x),{for:"cafe_id",class:"text-xs font-bold text-slate-700 ml-1"},{default:a(()=>t[14]||(t[14]=[l("Cafetería")])),_:1}),s(e(V),{modelValue:e(r).cafe_id,"onUpdate:modelValue":t[4]||(t[4]=i=>e(r).cafe_id=i)},{default:a(()=>[s(e(k),{class:_([{"border-destructive ring-destructive/20":e(r).errors.cafe_id},"h-11 border-slate-200 rounded-xl focus:ring-primary/20 focus:border-primary transition-all shadow-sm"])},{default:a(()=>[o("div",le,[s(n,{name:"coffee",class:"h-4 w-4 text-slate-400"}),s(e($),{placeholder:"Seleccionar cafetería"})])]),_:1},8,["class"]),s(e(C),{class:"rounded-xl shadow-xl border-slate-100"},{default:a(()=>[(d(!0),c(y,null,v(m.cafes,i=>(d(),f(e(S),{key:i.id,value:i.id.toString(),class:"rounded-lg my-1 mx-1 focus:bg-primary/10 focus:text-primary transition-colors"},{default:a(()=>[l(p(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.cafe_id?(d(),c("p",ne,[s(n,{name:"alert-circle",size:"10"}),l(" "+p(e(r).errors.cafe_id),1)])):b("",!0)])])]),s(e(T),{class:"pt-8 flex flex-col-reverse sm:flex-row gap-3"},{default:a(()=>[s(e(w),{type:"button",variant:"outline",onClick:t[5]||(t[5]=i=>m.$emit("update:open",!1)),class:"h-11 rounded-xl border-slate-200 text-slate-600 hover:bg-slate-50 font-bold flex-1 transition-all"},{default:a(()=>t[16]||(t[16]=[l(" Cancelar ")])),_:1}),s(e(w),{type:"submit",disabled:e(r).processing,class:"h-11 rounded-xl bg-primary hover:bg-primary/90 text-primary-foreground font-bold shadow-lg shadow-primary/20 flex-[2] transition-all active:scale-95 disabled:opacity-70"},{default:a(()=>[e(r).processing?(d(),f(n,{key:0,name:"loader-2",class:"mr-2 h-4 w-4 animate-spin"})):(d(),f(n,{key:1,name:"check-circle",class:"mr-2 h-4 w-4"})),l(" "+p(m.dinner?"Actualizar Información":"Crear Comensal"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}}),vr=J(de,[["__scopeId","data-v-471056db"]]);export{vr as default};
