import{d as C,j as g,C as B,s as E,g as P,o as u,w as o,a as t,u as s,e as m,b as i,c,i as _,D as S,F as v,p as b,t as p,bP as U}from"./app-D1TBsDKU.js";import{_ as y}from"./index-BU5NN4gF.js";import{_ as A,a as D,b as j,c as F}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BDavC9JJ.js";import{_ as I}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DXUUZZeO.js";import{_ as L}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-iptsNR8o.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-C0o28aTZ.js";import{_ as G}from"./Label.vue_vue_type_script_setup_true_lang-CgNASLuN.js";const O={class:"space-y-4"},q=["value"],T={key:0,class:"my-2"},z={key:1,class:"max-h-60 space-y-4 overflow-y-auto"},H={class:"mb-2 font-semibold"},J={class:"grid grid-cols-4 items-center gap-4"},ee=C({__name:"GuardModal",props:{cafeId:{type:Number,required:!1}},emits:["assignGuards"],setup($,{emit:w}){const h=$,k=w,f=g(!1),n=g(null),r=B({cafe_id:0,guards:[]}),V=[2,3,4];E(n,l=>{if(l===null){r.guards=[];return}const e=l,a=r.guards.length;if(e>a)for(let d=a;d<e;d++)r.guards.push({name:""});else e<a&&r.guards.splice(e)},{immediate:!0});const N=()=>{if(n.value===null){alert("Por favor, selecciona el número de guardias a crear (2 a 4).");return}if(r.guards.some(l=>!l.name.trim())){alert("Por favor, completa el nombre para todas las guardias asignadas.");return}r.cafe_id=h.cafeId,r.post(route("guards.store"),{onSuccess:l=>{f.value=!1,k("assignGuards",l.props.flash.newGuards),r.reset(),n.value=null},onError:l=>{console.error("Error al enviar el formulario:",l)}})};return(l,e)=>(u(),P(s(F),{open:f.value,"onUpdate:open":e[1]||(e[1]=a=>f.value=a)},{default:o(()=>[t(s(L),null,{default:o(()=>[t(y,{class:"h-full w-auto bg-green-500 text-white hover:bg-green-600"},{default:o(()=>e[2]||(e[2]=[m(" Asignar Guardias")])),_:1})]),_:1}),t(s(A),{class:"sm:max-w-[425px]"},{default:o(()=>[t(s(D),null,{default:o(()=>[t(s(j),null,{default:o(()=>e[3]||(e[3]=[m("Asignación de Guardias")])),_:1})]),_:1}),i("div",O,[t(s(G),{for:"num-guards"},{default:o(()=>e[4]||(e[4]=[m("Número de Guardias a asignar (2 a 4)")])),_:1}),S(i("select",{id:"num-guards","onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),class:"w-full rounded-md border border-gray-300 p-2"},[e[5]||(e[5]=i("option",{value:null,disabled:""},"Selecciona la cantidad de guardias",-1)),(u(),c(v,null,b(V,a=>i("option",{key:a,value:a},p(a)+" Guardias",9,q)),64))],512),[[U,n.value,void 0,{number:!0}]])]),n.value?(u(),c("hr",T)):_("",!0),n.value?(u(),c("div",z,[(u(!0),c(v,null,b(s(r).guards,(a,d)=>(u(),c("div",{key:d,class:"rounded-md border p-3"},[i("p",H,"Guardia #"+p(d+1),1),i("div",J,[t(s(G),{for:`guard-name-${d}`,class:"col-span-1"},{default:o(()=>e[6]||(e[6]=[m("Nombre:")])),_:2},1032,["for"]),t(s(M),{id:`guard-name-${d}`,type:"text",modelValue:a.name,"onUpdate:modelValue":x=>a.name=x,class:"col-span-3",placeholder:`Ej: Guardia ${d+1}`},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])])]))),128))])):_("",!0),t(s(I),null,{default:o(()=>[t(y,{type:"submit",disabled:!n.value||s(r).processing||s(r).guards.some(a=>!a.name.trim()),onClick:N,class:"bg-green-500 text-white hover:bg-green-600"},{default:o(()=>[m(p(s(r).processing?"Procesando...":"Agregar Guardias"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}});export{ee as _};
