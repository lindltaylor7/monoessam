import{d as G,r as h,s as j,v as I,c as m,o as r,a as o,u as t,m as H,w as i,b as s,P as R,e as u,x as E,F as k,l as F,g as T,t as d,i as P}from"./app-CcswF23t.js";import{a as J,b as K,c as W,_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-D4PAYWjI.js";import{_ as v}from"./index-_9tT-Ssz.js";import{_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-CfK0OICe.js";import{_ as Z,a as ee,b as te,c as se,d as A}from"./SelectValue.vue_vue_type_script_setup_true_lang-C356LrdR.js";import{u as ae}from"./useStaffFilter-mgTHBaDm.js";import{_ as oe}from"./StaffClothesDialog.vue_vue_type_script_setup_true_lang-ZOqd1jm9.js";import{P as le}from"./package-78InQ6L4.js";import{P as ie}from"./plus-D3CFLYEQ.js";import{E as ne}from"./eye-BPscARBY.js";import{C as re}from"./chevron-left-C_XaczpZ.js";import{C as de}from"./chevron-right-RWzjSLXB.js";import"./utils-bRKmu4jq.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-FZyUfthX.js";import"./Presence-DVLiitgZ.js";import"./Primitive-T37A2sRJ.js";import"./useForwardExpose-Bupld0wc.js";import"./PopperContent-D319Obud.js";import"./Teleport-Cn5wP2h9.js";import"./VisuallyHidden-CNBEDfex.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-C6BYjw8_.js";import"./utils-DxlyW67z.js";import"./useTypeahead-DB0LY-UE.js";import"./RovingFocusGroup-5UPnuL2s.js";import"./usePrimitiveElement-DqOnjT1G.js";import"./Collection-B4r_lrW1.js";import"./utensils-BjZqnYZX.js";import"./createLucideIcon-DJyts0DK.js";import"./DialogTitle-DYsWRQxb.js";import"./x-B-FUP3hG.js";import"./DialogDescription-654ur8zY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hand-helping-CwtaDMOP.js";import"./building-2-Bgp9EKZO.js";import"./user-CdQUFCCN.js";import"./chevron-down-CTJiWfkc.js";import"./chevron-up-nJP-GRSL.js";import"./check-CzyuKk0z.js";import"./useFormControl-DyhuIFiK.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-N9wvyaPx.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-B_nVSN85.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CxwbNqpJ.js";const me={class:"p-6"},ue={class:"flex justify-between items-center mb-6"},ce={class:"flex flex-wrap gap-2"},fe={class:"flex items-center mb-6"},pe={class:"bg-white rounded-xl border shadow-sm overflow-hidden"},ge={class:"overflow-x-auto"},ve={class:"w-full text-sm text-left"},_e={class:"divide-y divide-gray-100"},he={class:"p-4"},be={class:"flex items-center gap-3"},xe={class:"font-medium text-gray-900"},ye={class:"p-4"},we={key:0,class:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10"},ke={key:1,class:"text-gray-400 italic"},Pe={class:"p-4"},Ce={key:0,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-700/10"},$e={key:1,class:"text-gray-400 italic"},Se={class:"p-4 text-right"},Ve={key:0},ze={key:0,class:"flex items-center justify-between border-t p-4"},Ne={class:"text-sm text-muted-foreground"},Ue={class:"flex items-center gap-2"},Be={class:"text-sm font-medium"},_=10,wt=G({__name:"Index",props:{staff:{},roleClothes:{},units:{},colors:{}},setup(L){const C=L,$=h(C.staff),f=h(null);j(()=>C.staff,l=>{if($.value=l,f.value){const e=l.find(a=>{var g;return a.id===((g=f.value)==null?void 0:g.id)});e&&(f.value=e)}});const{filteredStaff:p,searchQuery:b,selectedUnitId:x}=ae($),n=h(1),c=I(()=>Math.ceil(p.value.length/_)),S=I(()=>{n.value>c.value&&c.value>0&&(n.value=1);const l=(n.value-1)*_,e=l+_;return p.value.slice(l,e)}),D=()=>{n.value<c.value&&n.value++},O=()=>{n.value>1&&n.value--};j(p,()=>{n.value=1});const y=h(!1),Q=l=>{f.value=l,y.value=!0},q=l=>l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(l,e)=>(r(),m(k,null,[o(t(H),{title:"Registro de Tallas"}),o(X,{breadcrumbs:[{title:"Personal",href:l.route("staff.index")},{title:"Tallas",href:l.route("clothes.index")}]},{default:i(()=>[s("div",me,[s("div",ue,[e[5]||(e[5]=s("div",null,[s("h1",{class:"text-3xl font-bold tracking-tight"},"Asignación de Prendas por Rol y Café"),s("p",{class:"text-muted-foreground text-xs sm:text-sm mt-1"}," Selecciona las prendas asignadas a cada rol/cargo en el café seleccionado ")],-1)),s("div",ce,[o(t(R),{href:l.route("inventory.index")},{default:i(()=>[o(t(v),{variant:"outline",class:"gap-2"},{default:i(()=>[o(t(le),{class:"h-4 w-4"}),e[3]||(e[3]=u(" Inventario "))]),_:1})]),_:1},8,["href"]),o(t(R),{href:l.route("clothes.manage")},{default:i(()=>[o(t(v),{class:"gap-2"},{default:i(()=>[o(t(ie),{class:"h-4 w-4"}),e[4]||(e[4]=u(" Configurar Prendas "))]),_:1})]),_:1},8,["href"])])]),s("div",fe,[o(t(Y),{type:"text",placeholder:"Buscar personal por dni o nombre",modelValue:t(b),"onUpdate:modelValue":e[0]||(e[0]=a=>E(b)?b.value=a:null)},null,8,["modelValue"]),o(t(Z),{modelValue:t(x),"onUpdate:modelValue":e[1]||(e[1]=a=>E(x)?x.value=a:null)},{default:i(()=>[o(t(ee),{class:"h-10 border-zinc-200 bg-white hover:bg-zinc-50 ml-2 w-[200px]"},{default:i(()=>[o(t(te),{placeholder:"Seleccionar unidad"})]),_:1}),o(t(se),{class:"border-zinc-200 bg-white shadow-lg"},{default:i(()=>[o(t(A),{value:"0",class:"hover:bg-zinc-50"},{default:i(()=>e[6]||(e[6]=[u(" Ninguna ")])),_:1}),(r(!0),m(k,null,F(l.units,a=>(r(),T(t(A),{value:String(a.id),class:"hover:bg-zinc-50",key:a.id},{default:i(()=>[u(d(a.mine.name)+" - "+d(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",pe,[s("div",ge,[s("table",ve,[e[8]||(e[8]=s("thead",{class:"bg-gray-50 text-gray-500 border-b"},[s("tr",null,[s("th",{class:"p-4 font-medium"},"Personal"),s("th",{class:"p-4 font-medium"},"Cargo"),s("th",{class:"p-4 font-medium"},"Unidad"),s("th",{class:"p-4 font-medium w-16"},"Prendas")])],-1)),s("tbody",_e,[(r(!0),m(k,null,F(S.value,a=>{var g,V,z,N,U,B;return r(),m("tr",{key:a.id,class:"hover:bg-gray-50/50"},[s("td",he,[s("div",be,[o(t(J),{class:"h-9 w-9 border"},{default:i(()=>{var w,M;return[(w=a.photo)!=null&&w.url?(r(),T(t(K),{key:0,src:`/storage/${(M=a.photo)==null?void 0:M.url}`,class:"object-cover"},null,8,["src"])):P("",!0),o(t(W),null,{default:i(()=>[u(d(q(a.name)),1)]),_:2},1024)]}),_:2},1024),s("div",xe,d(a.name),1)])]),s("td",ye,[a.role?(r(),m("span",we,d(a.role.name),1)):(r(),m("span",ke,"Sin cargo"))]),s("td",Pe,[(g=a.staffable)!=null&&g.unit?(r(),m("span",Ce,d((z=(V=a.staffable)==null?void 0:V.unit)==null?void 0:z.name)+" - "+d((B=(U=(N=a.staffable)==null?void 0:N.unit)==null?void 0:U.mine)==null?void 0:B.name),1)):(r(),m("span",$e,"Sin unidad"))]),s("td",Se,[o(t(v),{variant:"ghost",size:"icon",onClick:w=>Q(a)},{default:i(()=>[o(t(ne),{class:"h-4 w-4 text-gray-500"})]),_:2},1032,["onClick"])])])}),128)),S.value.length===0?(r(),m("tr",Ve,e[7]||(e[7]=[s("td",{colspan:"5",class:"p-8 text-center text-gray-500"}," No se encontró personal. ",-1)]))):P("",!0)])])]),c.value>1?(r(),m("div",ze,[s("div",Ne," Mostrando "+d((n.value-1)*_+1)+" - "+d(Math.min(n.value*_,t(p).length))+" de "+d(t(p).length)+" registros ",1),s("div",Ue,[o(t(v),{variant:"outline",size:"sm",disabled:n.value===1,onClick:O},{default:i(()=>[o(t(re),{class:"h-4 w-4"}),e[9]||(e[9]=u(" Anterior "))]),_:1},8,["disabled"]),s("div",Be," Página "+d(n.value)+" de "+d(c.value),1),o(t(v),{variant:"outline",size:"sm",disabled:n.value===c.value,onClick:D},{default:i(()=>[e[10]||(e[10]=u(" Siguiente ")),o(t(de),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):P("",!0)])]),o(oe,{open:y.value,staff:f.value,colors:l.colors,"onUpdate:open":e[2]||(e[2]=a=>y.value=a)},null,8,["open","staff","colors"])]),_:1},8,["breadcrumbs"])],64))}});export{wt as default};
