import{c as le,u as oe,a as re}from"./Presence-C3SvcCxZ.js";import{u as ne}from"./usePrimitiveElement-BXxKKAKx.js";import{i as H,u as W}from"./check-DG9H7RV-.js";import{b as X,u as A}from"./useForwardExpose-Bro4_Myj.js";import{P as R}from"./Primitive-tBCOSnLX.js";import{i as Y,V as Z}from"./Checkbox.vue_vue_type_script_setup_true_lang-CHdWWeyv.js";import{y as z,d as B,B as ie,g as h,o as p,w as _,a as v,u as e,k as F,i as q,L as ee,G as P,H as O,I as M,bc as de,J as ae,aR as ue,j as V,s as L,c as x,b as f,F as D,p as G,e as S,t as w}from"./app-DHaWASGs.js";import{R as pe}from"./RovingFocusGroup-rscWlNFd.js";import{c as te}from"./utils-bRKmu4jq.js";import{R as ce}from"./RovingFocusItem-ZoXuaIky.js";import{c as fe}from"./index-dkW4UkYo.js";import{_ as me}from"./DatePicker.vue_vue_type_script_setup_true_lang-JwLSLkq4.js";import{_ as ve}from"./DinnersTable.vue_vue_type_script_setup_true_lang-D2KbZNTS.js";import{_ as ge}from"./ExcelDialog.vue_vue_type_script_setup_true_lang-Co9q-I_T.js";import{_ as ye}from"./NewDinnerDialog.vue_vue_type_script_setup_true_lang-B12Zhmqn.js";import{_ as _e}from"./OtherUnitDialog.vue_vue_type_script_setup_true_lang-CAg7YVLP.js";import{_ as be}from"./ReportDialog.vue_vue_type_script_setup_true_lang-CFH9xMra.js";import{F as J}from"./file-Ce5EUqHw.js";import{T as K,C as Q}from"./tag-DUPe3KyA.js";function xe({type:l,defaultValue:o,modelValue:a}){const n=a||o;return a!==void 0||o!==void 0?Array.isArray(n)?"multiple":"single":l??"single"}function he({type:l,defaultValue:o,modelValue:a}){return l||xe({type:l,defaultValue:o,modelValue:a})}function we({type:l,defaultValue:o}){return o!==void 0?o:l==="single"?void 0:[]}function Ve(l,o){const a=z(()=>he(l)),n=X(l,"modelValue",o,{defaultValue:we(l),passive:l.modelValue===void 0,deep:!0});function g(s){if(a.value==="single")n.value=H(s,n.value)?void 0:s;else{const t=Array.isArray(n.value)?[...n.value||[]]:[n.value].filter(Boolean);if(Y(t,s)){const i=t.findIndex(b=>H(b,s));t.splice(i,1)}else t.push(s);n.value=t}}const c=z(()=>a.value==="single");return{modelValue:n,changeModelValue:g,isSingle:c}}const[se,qe]=le("ToggleGroupRoot");var Se=B({__name:"ToggleGroupRoot",props:{rovingFocus:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1},orientation:{type:String,required:!1},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1},type:{type:String,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1}},emits:["update:modelValue"],setup(l,{emit:o}){const a=l,n=o,{loop:g,rovingFocus:c,disabled:s,dir:t}=ie(a),i=ne(t),{forwardRef:b,currentElement:y}=A(),{modelValue:m,changeModelValue:T,isSingle:$}=Ve(a,n),I=W(y);return qe({isSingle:$,modelValue:m,changeModelValue:T,dir:i,orientation:a.orientation,loop:g,rovingFocus:c,disabled:s}),(r,d)=>(p(),h(ee(e(c)?e(pe):e(R)),{"as-child":"",orientation:e(c)?r.orientation:void 0,dir:e(i),loop:e(c)?e(g):void 0},{default:_(()=>[v(e(R),{ref:e(b),role:"group","as-child":r.asChild,as:r.as},{default:_(()=>[F(r.$slots,"default",{modelValue:e(m)}),e(I)&&r.name?(p(),h(Z,{key:0,name:r.name,required:r.required,value:e(m)},null,8,["name","required","value"])):q("v-if",!0)]),_:3},8,["as-child","as"])]),_:3},8,["orientation","dir","loop"]))}}),Be=Se,Ce=B({__name:"Toggle",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(l,{emit:o}){const a=l,n=o,{forwardRef:g,currentElement:c}=A(),s=se(null),t=X(a,"modelValue",n,{defaultValue:a.defaultValue,passive:a.modelValue===void 0});function i(){t.value=!t.value}const b=z(()=>t.value?"on":"off"),y=W(c);return(m,T)=>(p(),h(e(R),{ref:e(g),type:m.as==="button"?"button":void 0,"as-child":a.asChild,as:m.as,"aria-pressed":e(t),"data-state":b.value,"data-disabled":m.disabled?"":void 0,disabled:m.disabled,onClick:i},{default:_(()=>[F(m.$slots,"default",{modelValue:e(t),disabled:m.disabled,pressed:e(t),state:b.value}),e(y)&&m.name&&!e(s)?(p(),h(Z,{key:0,type:"checkbox",name:m.name,value:e(t),required:m.required},null,8,["name","value","required"])):q("v-if",!0)]),_:3},8,["type","as-child","as","aria-pressed","data-state","data-disabled","disabled"]))}}),ze=Ce,Fe=B({__name:"ToggleGroupItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(l){const o=l,a=se(),n=z(()=>{var s;return((s=a.disabled)==null?void 0:s.value)||o.disabled}),g=z(()=>Y(a.modelValue.value,o.value)),{forwardRef:c}=A();return(s,t)=>(p(),h(ee(e(a).rovingFocus.value?e(ce):e(R)),P({"as-child":""},e(a).rovingFocus.value?{focusable:!n.value,active:g.value}:{}),{default:_(()=>[v(e(ze),P(o,{ref:e(c),disabled:n.value,"model-value":g.value,"onUpdate:modelValue":t[0]||(t[0]=i=>e(a).changeModelValue(s.value))}),{default:_(i=>[F(s.$slots,"default",O(M(i)))]),_:3},16,["disabled","model-value"])]),_:3},16))}}),Te=Fe;const U=B({__name:"ToggleGroup",props:{rovingFocus:{type:Boolean},disabled:{type:Boolean},orientation:{},dir:{},loop:{type:Boolean},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},type:{},modelValue:{},defaultValue:{},class:{},variant:{},size:{}},emits:["update:modelValue"],setup(l,{emit:o}){const a=l,n=o;de("toggleGroup",{variant:a.variant,size:a.size});const g=ae(a,"class","size","variant"),c=oe(g,n);return(s,t)=>(p(),h(e(Be),P({"data-slot":"toggle-group","data-size":s.size,"data-variant":s.variant},e(c),{class:e(te)("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",a.class)}),{default:_(i=>[F(s.$slots,"default",O(M(i)))]),_:3},16,["data-size","data-variant","class"]))}}),ke=fe("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=B({__name:"ToggleGroupItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{},variant:{},size:{}},setup(l){const o=l,a=ue("toggleGroup"),n=ae(o,"class","size","variant"),g=re(n);return(c,s)=>{var t,i,b,y;return p(),h(e(Te),P({"data-slot":"toggle-group-item","data-variant":((t=e(a))==null?void 0:t.variant)||c.variant,"data-size":((i=e(a))==null?void 0:i.size)||c.size},e(g),{class:e(te)(e(ke)({variant:((b=e(a))==null?void 0:b.variant)||c.variant,size:((y=e(a))==null?void 0:y.size)||c.size}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",o.class)}),{default:_(m=>[F(c.$slots,"default",O(M(m)))]),_:3},16,["data-variant","data-size","class"])}}}),De={class:"flex flex-col gap-3 rounded-xl bg-white p-4 shadow-md"},Ge={class:"flex flex-col gap-3 md:flex-row"},Re={class:"min-w-0 flex-1 space-y-3"},Pe={class:"space-y-1"},$e={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},Ie={class:"space-y-1"},Ue={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},Ee={class:"space-y-2"},Ae={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},Oe={class:"space-y-4 max-h-[300px] overflow-y-auto pr-1"},Me={class:"text-[10px] font-bold uppercase text-gray-400 tracking-widest flex items-center gap-2 px-1"},je={class:"truncate"},Ne={key:0,class:"text-[10px] italic text-gray-400 px-2 leading-none"},He={class:"flex min-w-0 flex-1 flex-col gap-3"},Le={class:"flex min-w-0 flex-1 flex-col gap-3"},Je={class:"flex w-full flex-col items-center space-y-1"},Ke={class:"flex flex-wrap items-center gap-2 rounded-lg bg-gray-50 px-3 py-2 text-sm"},Qe={key:0,class:"flex items-center gap-1 rounded-full bg-blue-100 px-2 py-1 text-blue-800"},We={key:1,class:"flex items-center gap-1 rounded-full bg-purple-100 px-2 py-1 text-purple-800"},Xe={key:2,class:"flex items-center gap-1 rounded-full bg-amber-100 px-2 py-1 text-amber-800"},Ye={key:3,class:"ml-auto text-gray-500"},_a=B({__name:"SalesHeader",props:{cafes:{},services:{},receipt_types:{},sale_types:{},subdealerships:{},units:{}},emits:["showServicesFromCafeSelected","updateDate","updateFormData","addServiceSelected"],setup(l,{emit:o}){const a=o,n=()=>{const r={receipt_type_id:y.value,sale_type_id:t.value,cafe_id:s.value};a("updateFormData",r)},g=l,c=V(!1),s=V(0),t=V(0),i=V([]),b=V([]),y=V(0),m=V(!1),T=()=>{c.value=!0,m.value=!1};L(s,r=>{const d=g.cafes.find(k=>k.id===r);console.log(d),d?(i.value=d.services,b.value=d.sales,a("showServicesFromCafeSelected",i.value,b.value)):(i.value=[],a("showServicesFromCafeSelected",i.value))}),L([y,t,s],()=>{n()});const $=r=>{a("updateDate",r)},I=r=>{a("addServiceSelected",r)};return(r,d)=>{var k,j,N;return p(),x("header",De,[f("div",Ge,[f("div",Re,[f("div",Pe,[f("label",$e,[v(e(J),{class:"h-4 w-4 text-blue-500"}),d[3]||(d[3]=f("span",null,"Tipo de Documento",-1))]),v(e(U),{modelValue:y.value,"onUpdate:modelValue":d[0]||(d[0]=u=>y.value=u),type:"single",class:"flex flex-wrap gap-1 rounded-lg bg-gray-50 p-1"},{default:_(()=>[(p(!0),x(D,null,G(r.receipt_types,u=>(p(),h(e(E),{value:u.id,key:u.id,class:"min-w-[100px] flex-1 rounded-md px-3 py-2 text-center text-sm transition-all hover:bg-blue-50 hover:text-blue-600 data-[state=on]:bg-blue-500 data-[state=on]:text-white"},{default:_(()=>[S(w(u.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),f("div",Ie,[f("label",Ue,[v(e(K),{class:"h-4 w-4 text-purple-500"}),d[4]||(d[4]=f("span",null,"Tipo de Venta",-1))]),v(e(U),{modelValue:t.value,"onUpdate:modelValue":d[1]||(d[1]=u=>t.value=u),type:"single",class:"flex flex-wrap gap-1 rounded-lg bg-gray-50 p-1"},{default:_(()=>[(p(!0),x(D,null,G(r.sale_types,u=>(p(),h(e(E),{value:u.id,key:u.id,class:"min-w-[100px] flex-1 rounded-md px-3 py-2 text-center text-sm transition-all hover:bg-purple-50 hover:text-purple-600 data-[state=on]:bg-purple-500 data-[state=on]:text-white"},{default:_(()=>[S(w(u.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),f("div",Ee,[f("label",Ae,[v(e(Q),{class:"h-4 w-4 text-amber-500"}),d[5]||(d[5]=f("span",null,"Cafetería por Unidad",-1))]),f("div",Oe,[(p(!0),x(D,null,G(r.units,u=>(p(),x("div",{key:u.id,class:"space-y-1.5"},[f("span",Me,[S(w(u.name)+" ",1),d[6]||(d[6]=f("div",{class:"h-[1px] flex-1 bg-gray-100"},null,-1))]),v(e(U),{modelValue:s.value,"onUpdate:modelValue":d[2]||(d[2]=C=>s.value=C),type:"single",class:"flex flex-wrap gap-1 rounded-lg bg-gray-50/50 p-1"},{default:_(()=>[(p(!0),x(D,null,G(u.cafes,C=>(p(),h(e(E),{value:C.id,key:C.id,class:"min-w-[120px] flex-1 rounded-md px-2 py-2 text-center text-sm border border-transparent transition-all hover:bg-amber-50 hover:text-amber-600 data-[state=on]:border-amber-200 data-[state=on]:bg-amber-500 data-[state=on]:text-white data-[state=on]:shadow-sm"},{default:_(()=>[f("span",je,w(C.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue"]),u.cafes.length===0?(p(),x("p",Ne,"Sin cafeterías asignadas")):q("",!0)]))),128))])]),v(me,{onUpdateDate:$,class:"w-full"})]),f("div",He,[v(ve,{services:i.value,onAddServiceSelected:I},null,8,["services"])]),f("div",Le,[f("div",Je,[v(ge,{class:"w-full"}),v(be,{class:"w-full"}),v(ye,{cafes:r.cafes,subdealerships:r.subdealerships},null,8,["cafes","subdealerships"]),v(_e,{showOtherUnitDialog:m.value,onDoublePriceSave:T,class:"w-full"},null,8,["showOtherUnitDialog"])]),d[7]||(d[7]=f("div",{class:"flex w-full flex-col gap-2"},null,-1))])]),f("div",Ke,[y.value?(p(),x("span",Qe,[v(e(J),{class:"h-3 w-3"}),S(" "+w((k=r.receipt_types.find(u=>u.id===y.value))==null?void 0:k.name),1)])):q("",!0),t.value?(p(),x("span",We,[v(e(K),{class:"h-3 w-3"}),S(" "+w((j=r.sale_types.find(u=>u.id===t.value))==null?void 0:j.name),1)])):q("",!0),s.value?(p(),x("span",Xe,[v(e(Q),{class:"h-3 w-3"}),S(" "+w((N=r.cafes.find(u=>u.id===s.value))==null?void 0:N.name),1)])):q("",!0),i.value.length?(p(),x("span",Ye,w(i.value.length)+" servicios disponibles ",1)):q("",!0)])])}}});export{_a as _};
