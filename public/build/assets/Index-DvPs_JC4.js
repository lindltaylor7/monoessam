import{d as q,r as _,C as W,s as G,g as b,o as m,w as a,a as e,b as o,u as s,m as O,e as l,t as n,c,F as w,l as j,i as V,P as R,n as J,W as K}from"./app-CNSWNKOk.js";import{_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-JZw-LArd.js";import{_ as g}from"./index-CMs5RgJf.js";import{e as X,_ as Y,a as T,b as h,c as Z,d as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-C2_mW48C.js";import{_ as I}from"./index-CCOQmM_g.js";import{_ as ee}from"./Input.vue_vue_type_script_setup_true_lang-CCUl_MJd.js";import{_ as te,a as se,b as oe,c as ae,d as E}from"./SelectValue.vue_vue_type_script_setup_true_lang-BcePlYrV.js";import{_ as S}from"./Card.vue_vue_type_script_setup_true_lang-DtkjILK3.js";import{_ as z}from"./CardContent.vue_vue_type_script_setup_true_lang-HJFtLbO8.js";import{_ as M,a as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-BP8xNXO8.js";import{_ as d}from"./Icon.vue_vue_type_script_setup_true_lang-D2lbDFso.js";import re from"./DinnerModal-C-XnBrLC.js";import{_ as le}from"./ExcelDialog.vue_vue_type_script_setup_true_lang-XJLJnc1c.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-bRKmu4jq.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DqvHAT4k.js";import"./Presence-BUnU4JYZ.js";import"./Primitive-B9qr7285.js";import"./useForwardExpose-RGJSF3L4.js";import"./PopperContent-CYMlAJ3h.js";import"./Teleport-QM5p8a4u.js";import"./VisuallyHidden-DUKasAxk.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-1GkyQnP1.js";import"./utils-CBrZJxd7.js";import"./useTypeahead-wt0GuQMq.js";import"./RovingFocusGroup-BUxl22tM.js";import"./usePrimitiveElement-B4km0Wg0.js";import"./Collection-BqE7QxgV.js";import"./utensils-BihH0aTS.js";import"./createLucideIcon-D85MSMIc.js";import"./DialogTitle-XiVJqo0N.js";import"./x-cty4Eaqf.js";import"./DialogDescription-DU8KXewB.js";import"./hand-helping-Dio59MZN.js";import"./building-2--lbKbXAs.js";import"./user-Ddx74hRq.js";import"./chevron-right-gHW4CMay.js";import"./chevron-down-Dknl4oOZ.js";import"./chevron-up-DHzZblfV.js";import"./check-BYKhTv_x.js";import"./useFormControl-C3OTAcS_.js";import"./settings-2-C90zwFsp.js";import"./briefcase-hYfSHi1p.js";import"./lock-A0DMUg6S.js";import"./shopping-bag-CKnUVMMc.js";import"./between-horizontal-start-jZaaURLL.js";import"./user-round-Cq_mHDEv.js";import"./person-standing-B2guZ3uX.js";import"./paperclip-x27konD7.js";import"./calendar-DZwX_S7N.js";import"./chevron-left-CE2puqed.js";import"./circle-alert-BLzcoCjO.js";import"./triangle-alert-vXzVtGee.js";import"./circle-check-BJQY5c0S.js";import"./circle-plus-CJhOvMdn.js";import"./shirt-DDkwrpm2.js";import"./dollar-sign-BFpp0ayn.js";import"./message-square-B7IaVZ6U.js";import"./eye-nZoeragi.js";import"./file-chart-column-DGbOXeUv.js";import"./upload-Bzsb-wLk.js";import"./info-r62Qemgg.js";import"./lamp-desk-CsrwFrkJ.js";import"./list-check-ClBYySTM.js";import"./sheet-BPWDYY1f.js";import"./loader-circle-Bbk5FVhW.js";import"./mail-BvNw-w-C.js";import"./monitor-COgeJEdU.js";import"./sun-BfbcdaoC.js";import"./package-BVt6mVw4.js";import"./pencil-DfeiM9Gq.js";import"./phone-CD7AN2Jc.js";import"./plus-CwXdu2sf.js";import"./search-DaaD36pS.js";import"./shield-jh3cuUCI.js";import"./shopping-cart-CRQfuSbn.js";import"./soup-zQMaFRj8.js";import"./trash-2-CNdEWz3-.js";import"./trash-BGWgiAAk.js";import"./truck-DYJl-r2f.js";import"./user-plus-BmsE2vew.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-D3fcpqCY.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-BBxRwB_4.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CTDWwoKS.js";import"./Label.vue_vue_type_script_setup_true_lang-BUGH-jIs.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-z5h6CSZb.js";const ne={class:"p-4 md:p-8 space-y-6 bg-slate-50/50 min-h-screen"},de={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6"},me={class:"flex items-center gap-4"},pe={class:"h-14 w-14 rounded-2xl bg-blue-600 flex items-center justify-center text-white shadow-lg shadow-blue-200 rotate-3 transition-transform hover:rotate-0"},ce={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full lg:w-auto"},ue={class:"min-w-[200px]"},fe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},xe={class:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary transition-colors group-hover:bg-primary group-hover:text-white"},_e={class:"text-3xl font-bold"},be={class:"h-10 w-10 rounded-xl bg-orange-100 flex items-center justify-center text-orange-600 transition-colors group-hover:bg-orange-500 group-hover:text-white"},ge={class:"text-3xl font-bold"},he={class:"h-10 w-10 rounded-xl bg-blue-100 flex items-center justify-center text-blue-600 transition-colors group-hover:bg-blue-500 group-hover:text-white"},ve={class:"text-3xl font-bold"},we={class:"bg-white p-4 rounded-2xl shadow-sm border border-slate-200/60 transition-all hover:shadow-md"},ye={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ke={class:"relative"},$e={class:"flex items-center gap-2"},Ce={class:"bg-white rounded-2xl shadow-sm border border-slate-200/60 overflow-hidden"},je={class:"overflow-x-auto"},Ve={class:"flex items-center gap-4"},Te={class:"h-11 w-11 rounded-2xl bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20 flex items-center justify-center text-primary font-bold text-base shadow-sm group-hover:scale-110 transition-transform"},Se={class:"flex flex-col"},ze={class:"text-sm font-bold text-slate-900 leading-none mb-1"},Me={class:"text-[11px] text-slate-400 font-medium uppercase tracking-tight"},Ne={class:"flex flex-col gap-1"},De={class:"text-[13px] font-semibold text-slate-700"},Ie={key:0,class:"text-[11px] text-slate-400 flex items-center gap-1"},Ee={class:"flex flex-col gap-2"},Le={class:"flex justify-end gap-2"},Ae={class:"flex flex-col items-center justify-center gap-4 max-w-sm mx-auto"},Be={class:"h-24 w-24 rounded-full bg-slate-50 flex items-center justify-center text-slate-200"},Fe={key:0,class:"flex items-center justify-between px-6 py-4 border-t border-slate-100 bg-slate-50/30"},He={class:"text-xs font-semibold text-slate-500"},Pe={class:"text-slate-900 font-bold"},Ue={class:"text-slate-900 font-bold"},qe={class:"flex items-center gap-1.5"},We=["innerHTML"],Ge=q({__name:"Index",props:{dinners:{},cafes:{},subdealerships:{},filters:{}},setup(L){const y=L,A=[{title:"Ventas",href:"/sales"},{title:"Comensales",href:"/sales"}],v=_(!1),k=_(null),f=_(y.filters.search||""),x=_(y.filters.cafe_id||"all"),$=_(y.filters.subdealership_id||"all"),B=W({}),F=()=>{k.value=null,v.value=!0},H=i=>{k.value=i,v.value=!0},P=i=>{confirm("¿Estás seguro de que deseas eliminar este comensal?")&&B.delete(route("dinners.destroy",i),{preserveScroll:!0})};let C=null;const U=()=>{C&&clearTimeout(C),C=setTimeout(()=>{K.get(route("sales.index"),{search:f.value,cafe_id:x.value,subdealership_id:$.value},{preserveState:!0,preserveScroll:!0,replace:!0})},400)};G([f,x,$],()=>{U()});const D=()=>{f.value="",x.value="all",$.value="all"};return(i,t)=>(m(),b(Q,{breadcrumbs:A},{default:a(()=>[e(s(O),{title:"Comensales - Ventas"}),o("div",ne,[o("div",de,[o("div",me,[o("div",pe,[e(d,{name:"users",size:"28"})]),t[3]||(t[3]=o("div",null,[o("h1",{class:"text-2xl md:text-3xl font-extrabold tracking-tight text-slate-900 uppercase"},"Gestión de Comensales"),o("p",{class:"text-slate-500 font-medium text-sm flex items-center gap-2"},[o("span",{class:"flex h-2 w-2 rounded-full bg-blue-500 animate-pulse"}),l(" Administración del Padrón y Asignaciones ")])],-1))]),o("div",ce,[o("div",ue,[e(le)]),e(s(g),{onClick:F,class:"h-11 bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg shadow-primary/20 transition-all active:scale-95 px-8 rounded-xl font-bold text-xs uppercase tracking-wider flex items-center justify-center gap-2"},{default:a(()=>[e(d,{name:"plus",size:"18"}),t[4]||(t[4]=l(" Nuevo Comensal "))]),_:1})])]),o("div",fe,[e(s(S),{class:"border-none shadow-sm bg-white overflow-hidden group"},{default:a(()=>[e(s(M),{class:"pb-2 flex flex-row items-center justify-between space-y-0"},{default:a(()=>[e(s(N),{class:"text-sm font-semibold text-slate-500 uppercase tracking-wider"},{default:a(()=>t[5]||(t[5]=[l("Total Comensales")])),_:1}),o("div",xe,[e(d,{name:"users",class:"h-5 w-5"})])]),_:1}),e(s(z),null,{default:a(()=>[o("div",_e,n(i.dinners.total),1),t[6]||(t[6]=o("p",{class:"text-xs text-slate-400 mt-1"},"Registrados en el sistema",-1))]),_:1})]),_:1}),e(s(S),{class:"border-none shadow-sm bg-white overflow-hidden group"},{default:a(()=>[e(s(M),{class:"pb-2 flex flex-row items-center justify-between space-y-0"},{default:a(()=>[e(s(N),{class:"text-sm font-semibold text-slate-500 uppercase tracking-wider"},{default:a(()=>t[7]||(t[7]=[l("Cafeterías")])),_:1}),o("div",be,[e(d,{name:"coffee",class:"h-5 w-5"})])]),_:1}),e(s(z),null,{default:a(()=>[o("div",ge,n(i.cafes.length),1),t[8]||(t[8]=o("p",{class:"text-xs text-slate-400 mt-1"},"Puntos de servicio activos",-1))]),_:1})]),_:1}),e(s(S),{class:"border-none shadow-sm bg-white overflow-hidden group"},{default:a(()=>[e(s(M),{class:"pb-2 flex flex-row items-center justify-between space-y-0"},{default:a(()=>[e(s(N),{class:"text-sm font-semibold text-slate-500 uppercase tracking-wider"},{default:a(()=>t[9]||(t[9]=[l("Subconcesionarias")])),_:1}),o("div",he,[e(d,{name:"building",class:"h-5 w-5"})])]),_:1}),e(s(z),null,{default:a(()=>[o("div",ve,n(i.subdealerships.length),1),t[10]||(t[10]=o("p",{class:"text-xs text-slate-400 mt-1"},"Empresas vinculadas",-1))]),_:1})]),_:1})]),o("div",we,[o("div",ye,[o("div",ke,[e(d,{name:"search",class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e(s(ee),{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=r=>f.value=r),placeholder:"Buscar por nombre, DNI...",class:"pl-10 h-11 border-slate-200 focus:ring-primary/20 focus:border-primary transition-all rounded-xl"},null,8,["modelValue"])]),e(s(te),{modelValue:x.value,"onUpdate:modelValue":t[1]||(t[1]=r=>x.value=r)},{default:a(()=>[e(s(se),{class:"h-11 border-slate-200 rounded-xl"},{default:a(()=>[o("div",$e,[e(d,{name:"coffee",class:"h-4 w-4 text-slate-400"}),e(s(oe),{placeholder:"Todas las cafeterías"})])]),_:1}),e(s(ae),null,{default:a(()=>[e(s(E),{value:"all"},{default:a(()=>t[11]||(t[11]=[l("Todas las cafeterías")])),_:1}),(m(!0),c(w,null,j(i.cafes,r=>(m(),b(s(E),{key:r.id,value:r.id.toString()},{default:a(()=>[l(n(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(s(g),{variant:"outline",onClick:D,class:"h-11 rounded-xl text-slate-500 hover:text-slate-900 border-slate-200"},{default:a(()=>[e(d,{name:"x",class:"mr-2 h-4 w-4"}),t[12]||(t[12]=l(" Limpiar Filtros "))]),_:1})])]),o("div",Ce,[o("div",je,[e(s(X),null,{default:a(()=>[e(s(Y),null,{default:a(()=>[e(s(T),{class:"bg-slate-50/80 hover:bg-slate-50/80 border-b-slate-200"},{default:a(()=>[e(s(h),{class:"w-[320px] py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[13]||(t[13]=[l("Comensal")])),_:1}),e(s(h),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[14]||(t[14]=[l("Identificación")])),_:1}),e(s(h),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[15]||(t[15]=[l("Contacto")])),_:1}),e(s(h),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[16]||(t[16]=[l("Asignación")])),_:1}),e(s(h),{class:"text-right py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[17]||(t[17]=[l("Acciones")])),_:1})]),_:1})]),_:1}),e(s(Z),null,{default:a(()=>[(m(!0),c(w,null,j(i.dinners.data,r=>(m(),b(s(T),{key:r.id,class:"hover:bg-slate-50/50 transition-all border-b-slate-100 last:border-0 group"},{default:a(()=>[e(s(u),{class:"py-4"},{default:a(()=>[o("div",Ve,[o("div",Te,n(r.name.charAt(0).toUpperCase()),1),o("div",Se,[o("span",ze,n(r.name),1),o("span",Me,"ID Sistema: #"+n(r.id),1)])])]),_:2},1024),e(s(u),{class:"py-4"},{default:a(()=>[o("div",Ne,[o("span",De,"DNI "+n(r.dni),1),r.phone?(m(),c("span",Ie,[e(d,{name:"phone",size:"10"}),l(" "+n(r.phone),1)])):V("",!0)])]),_:2},1024),e(s(u),{class:"py-4"},{default:a(()=>[o("div",Ee,[e(s(I),{variant:"secondary",class:"font-bold text-[10px] w-fit rounded-lg px-2 py-0.5 bg-slate-100 text-slate-600 border-none"},{default:a(()=>{var p;return[e(d,{name:"building-2",size:"10",class:"mr-1"}),l(" "+n((p=r.subdealership)==null?void 0:p.name),1)]}),_:2},1024)])]),_:2},1024),e(s(u),{class:"py-4"},{default:a(()=>[e(s(I),{variant:"outline",class:"font-bold text-[10px] w-fit rounded-lg px-2 py-0.5 border-primary/20 bg-primary/5 text-primary"},{default:a(()=>{var p;return[e(d,{name:"coffee",size:"10",class:"mr-1"}),l(" "+n((p=r.cafe)==null?void 0:p.name),1)]}),_:2},1024)]),_:2},1024),e(s(u),{class:"text-right py-4 px-6"},{default:a(()=>[o("div",Le,[e(s(g),{variant:"ghost",size:"icon",onClick:p=>H(r),title:"Editar",class:"h-9 w-9 rounded-xl hover:bg-primary/10 hover:text-primary transition-colors"},{default:a(()=>[e(d,{name:"pencil",class:"h-4.5 w-4.5"})]),_:2},1032,["onClick"]),e(s(g),{variant:"ghost",size:"icon",class:"h-9 w-9 rounded-xl text-slate-400 hover:text-destructive hover:bg-destructive/10 transition-colors",onClick:p=>P(r.id),title:"Eliminar"},{default:a(()=>[e(d,{name:"trash",class:"h-4.5 w-4.5"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),i.dinners.data.length===0?(m(),b(s(T),{key:0},{default:a(()=>[e(s(u),{colspan:"5",class:"h-[400px] text-center"},{default:a(()=>[o("div",Ae,[o("div",Be,[e(d,{name:"users",size:"48",strokeWidth:"1.5"})]),t[19]||(t[19]=o("div",{class:"space-y-1"},[o("p",{class:"text-lg font-bold text-slate-900"},"No se encontraron resultados"),o("p",{class:"text-sm text-slate-500"},"No hay comensales que coincidan con los criterios de búsqueda actuales.")],-1)),e(s(g),{variant:"outline",onClick:D,class:"mt-2"},{default:a(()=>t[18]||(t[18]=[l("Ver todos los comensales")])),_:1})])]),_:1})]),_:1})):V("",!0)]),_:1})]),_:1})]),i.dinners.total>0?(m(),c("div",Fe,[o("div",He,[t[20]||(t[20]=l(" Mostrando ")),o("span",Pe,n(i.dinners.from)+" - "+n(i.dinners.to),1),t[21]||(t[21]=l(" de ")),o("span",Ue,n(i.dinners.total),1),t[22]||(t[22]=l(" comensales "))]),o("div",qe,[(m(!0),c(w,null,j(i.dinners.links,(r,p)=>(m(),c(w,{key:p},[r.url===null?(m(),c("div",{key:0,class:"h-9 min-w-[36px] px-3 flex items-center justify-center text-xs font-bold text-slate-300 rounded-xl pointer-events-none",innerHTML:r.label},null,8,We)):(m(),b(s(R),{key:1,href:r.url,class:J(["h-9 min-w-[36px] px-3 flex items-center justify-center text-xs font-bold rounded-xl transition-all border shadow-sm",{"bg-primary text-primary-foreground border-primary shadow-primary/20 scale-105":r.active,"bg-white hover:bg-slate-50 border-slate-200 text-slate-600":!r.active}]),innerHTML:r.label,"preserve-scroll":""},null,8,["href","class","innerHTML"]))],64))),128))])])):V("",!0)])]),e(re,{open:v.value,"onUpdate:open":t[2]||(t[2]=r=>v.value=r),dinner:k.value,cafes:i.cafes,subdealerships:i.subdealerships},null,8,["open","dinner","cafes","subdealerships"])]),_:1}))}}),Cs=ie(Ge,[["__scopeId","data-v-9ca6b39d"]]);export{Cs as default};
