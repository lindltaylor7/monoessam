import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-CKY7YSiM.js";import{_ as $,a as V,b as k,c as C,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-CmIUQytU.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-BtEwtNXL.js";import{j as v,y as z,v as B,d as D,s as L,c as _,o as f,a as i,u as t,m as U,w as u,b as p,X as h,e as x,F as b,p as y,g as S,t as E,i as F}from"./app-mR_rd72W.js";import{_ as I}from"./StaffRegistrationDialog.vue_vue_type_script_setup_true_lang-CNxedecN.js";import{_ as j}from"./StaffTable.vue_vue_type_script_setup_true_lang-D-UHbXD-.js";import{_ as P}from"./StaffMobileCard.vue_vue_type_script_setup_true_lang-ClhowjeW.js";import"./utils-bRKmu4jq.js";import"./Presence-CGsqwpPE.js";import"./Primitive-DsoSPzpv.js";import"./useForwardExpose-BSFKM8J-.js";import"./Teleport-Cp2vkAmZ.js";import"./chevron-down-DmYdK5Zd.js";import"./createLucideIcon-DwmsozrI.js";import"./Collection-BmCEv-Kb.js";import"./usePrimitiveElement-BumWpfJQ.js";import"./check-B9Dh-43-.js";import"./PopperContent-BuyoyjXE.js";import"./useTypeahead-v3C9xyjl.js";import"./utils-F-Dn4Q1F.js";import"./VisuallyHidden-CqCP2mcG.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CcXsuFBi.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CnQT_eGL.js";import"./RovingFocusGroup-B38BIfZL.js";import"./DialogTitle-BwMfw3Hv.js";import"./x-D7EDnEl9.js";import"./DialogDescription-C3Dvuj9i.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hand-helping-CsB2sNfe.js";import"./building-2-DbHq1I1u.js";import"./user-Dl2MoAJP.js";import"./chevron-right-Bf0091Pw.js";import"./index-BIu6T84f.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-BzYxAdMC.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-CNnq_yDE.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-Bu6QoxvG.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-VzJlSINT.js";import"./TabsTrigger.vue_vue_type_script_setup_true_lang-CbW9ClWe.js";import"./RovingFocusItem-mScgJuEq.js";import"./AlertErrors.vue_vue_type_script_setup_true_lang-B7lnnPb7.js";import"./AttachmentsTab.vue_vue_type_script_setup_true_lang-DdIijzfU.js";import"./index-DV58xXDm.js";import"./FileUploadItem-Cmah6Phm.js";import"./calendar-CEct9Tri.js";import"./circle-alert-CiOZK33I.js";import"./FinancialDataTab.vue_vue_type_script_setup_true_lang-Ch8L7Ezd.js";import"./Label.vue_vue_type_script_setup_true_lang-5B3u-Rch.js";import"./FamilyLoadSection.vue_vue_type_script_setup_true_lang-HA5R_RNn.js";import"./PersonalDataTab.vue_vue_type_script_setup_true_lang-CgUyg0B7.js";import"./EmergencyContactSection.vue_vue_type_script_setup_true_lang-DcU7TQet.js";import"./info-iz_LsW2K.js";import"./phone-DJzsy7bB.js";import"./PhotoUploadSection.vue_vue_type_script_setup_true_lang-CDdtW1zO.js";import"./InputSearchRole.vue_vue_type_script_setup_true_lang-DBRaL3aU.js";import"./plus-B8M_Qjlr.js";import"./InputSearchSelectable.vue_vue_type_script_setup_true_lang-Cw5E_5Am.js";import"./InputSelectableUnit.vue_vue_type_script_setup_true_lang-DcWsBaBn.js";import"./building-CNTJaAcr.js";import"./mail-DB2MLfNf.js";import"./SizesTab.vue_vue_type_script_setup_true_lang-BcIL8zbr.js";import"./pencil-BDolfds7.js";import"./useStaffConstants-DvYrC3VT.js";import"./index-LWqHMRKT.js";import"./ChangeStatusModal.vue_vue_type_script_setup_true_lang-DwMFrDie.js";import"./FilesModal.vue_vue_type_script_setup_true_lang-CH3yN4XA.js";import"./file-B8k8KuTT.js";function Q(c){const e=v(""),r=v("0"),n=z(()=>{let a=c.value;if(r.value!=="0"&&(a=a.filter(l=>{var m;return((m=l.staffable)==null?void 0:m.unit_id)===parseInt(r.value)})),e.value.trim()){const l=e.value.toLowerCase().trim();a=a.filter(m=>m.name.toLowerCase().includes(l)||m.dni.toLowerCase().includes(l))}return a});return{searchQuery:e,selectedUnitId:r,filteredStaff:n}}function q(c){return{deleteStaff:async r=>{if(confirm("¿Estás seguro de eliminar a este personal?"))try{await B.delete(`/staff/${r}`),c(r)}catch(n){console.error("Error al eliminar personal:",n),alert("Ocurrió un error al intentar eliminar el registro.")}}}}const A={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4"},O={class:"flex items-center justify-between"},R={class:"flex items-center"},T={class:"bg-card rounded-xl border shadow-sm"},X={class:"space-y-4 md:hidden p-4"},G={key:0,class:"py-12 text-center"},at=D({__name:"Index",props:{cafes:{},staff:{},roles:{},units:{},businneses:{}},setup(c){const e=c,r=v(e.staff);L(()=>e.staff,d=>{r.value=d});const{filteredStaff:n,searchQuery:a,selectedUnitId:l}=Q(r),{deleteStaff:m}=q(d=>{r.value=r.value.filter(s=>s.id!==d)});return(d,s)=>(f(),_(b,null,[i(t(U),{title:"Personal"}),i(N,null,{default:u(()=>[p("div",A,[p("div",O,[s[2]||(s[2]=p("h1",{class:"text-2xl font-semibold tracking-tight"},"Personal",-1)),i(I,{cafes:e.cafes,roles:e.roles,units:e.units,businneses:e.businneses},null,8,["cafes","roles","units","businneses"])]),p("div",R,[i(w,{type:"text",placeholder:"Buscar personal por dni o nombre",modelValue:t(a),"onUpdate:modelValue":s[0]||(s[0]=o=>h(a)?a.value=o:null)},null,8,["modelValue"]),i(t($),{modelValue:t(l),"onUpdate:modelValue":s[1]||(s[1]=o=>h(l)?l.value=o:null)},{default:u(()=>[i(t(V),{class:"h-10 border-zinc-200 bg-white hover:bg-zinc-50 ml-2 w-[200px]"},{default:u(()=>[i(t(k),{placeholder:"Seleccionar unidad"})]),_:1}),i(t(C),{class:"border-zinc-200 bg-white shadow-lg"},{default:u(()=>[i(t(g),{value:"0",class:"hover:bg-zinc-50"},{default:u(()=>s[3]||(s[3]=[x(" Ninguna ")])),_:1}),(f(!0),_(b,null,y(d.units,o=>(f(),S(t(g),{value:String(o.id),class:"hover:bg-zinc-50",key:o.id},{default:u(()=>[x(E(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),p("div",T,[i(j,{"staff-list":t(n),cafes:e.cafes,roles:e.roles,units:e.units,businesses:e.businneses,onDeleteStaff:t(m)},null,8,["staff-list","cafes","roles","units","businesses","onDeleteStaff"]),p("div",X,[(f(!0),_(b,null,y(t(n),o=>(f(),S(P,{key:o.id,staff:o,cafes:e.cafes,roles:e.roles,units:e.units,businesses:e.businneses,onDeleteStaff:t(m)},null,8,["staff","cafes","roles","units","businesses","onDeleteStaff"]))),128)),!t(n)||t(n).length===0?(f(),_("div",G,s[4]||(s[4]=[p("p",{class:"text-muted-foreground"},"No hay personal registrado",-1)]))):F("",!0)])])])]),_:1})],64))}});export{at as default};
