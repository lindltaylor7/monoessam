import{_ as B}from"./index-CbI5T5C8.js";import{_ as k}from"./index-BEZ8FgRC.js";import{_ as H}from"./Input.vue_vue_type_script_setup_true_lang-DWY6yiTQ.js";import{_ as q,a as J,b as K,c as G,d as N}from"./SelectValue.vue_vue_type_script_setup_true_lang-CuvcBgvg.js";import{T as Q,a as D,b as V,c as L,_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-xeohYFj-.js";import{d as F,g,o as l,w as i,k as X,I as Y,J as Z,u as a,j,s as E,c,a as o,m as tt,b as t,e as _,F as f,p as b,t as r,i as C,n as I,v as et}from"./app-omsWxKAT.js";import{_ as P}from"./ChangeStatusModal.vue_vue_type_script_setup_true_lang-CFbT4RCm.js";import{_ as st}from"./FilesModal.vue_vue_type_script_setup_true_lang-BhWFGYdE.js";import{_ as $}from"./StaffRegistrationDialog.vue_vue_type_script_setup_true_lang-Be2_0JA1.js";import{c as ot}from"./createLucideIcon-wc3jJpo7.js";import"./Primitive-LnmZCQDW.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Presence-TIlQi4Ha.js";import"./useForwardExpose-Dizl4y-J.js";import"./Teleport-HpqMMIj1.js";import"./chevron-down-B4t_zD20.js";import"./Collection-qDTnk2zS.js";import"./usePrimitiveElement-2BLqo-kh.js";import"./check-jJfdysr1.js";import"./PopperContent-BiVUtpS2.js";import"./useTypeahead-D4dpBae1.js";import"./utils-P7GYerX1.js";import"./VisuallyHidden-DZGPqiBu.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Cbwgycho.js";import"./RovingFocusGroup-jfVmjGtj.js";import"./DialogTitle-BEUSgrUv.js";import"./x-Bfa6u6bd.js";import"./DialogDescription-JbqKfHVt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hand-helping-1Ps-r_Fo.js";import"./building-2-D19nW7_w.js";import"./user-GwKu5332.js";import"./chevron-right-Veie1yyc.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-K7Y-ejgy.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-Bnf5grGg.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-Bc4F7VX0.js";import"./info-COEe_igX.js";import"./index-CiPv5ZNB.js";import"./file-D06SgdK7.js";import"./calendar-C4G8kdz5.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-HezHjTiW.js";import"./TabsTrigger.vue_vue_type_script_setup_true_lang-CyWgBMsq.js";import"./RovingFocusItem-BL--VfuB.js";import"./AlertErrors.vue_vue_type_script_setup_true_lang-DHrnaNYf.js";import"./AttachmentsTab.vue_vue_type_script_setup_true_lang-Bk4G7tZc.js";import"./FileUploadItem-Crc_KvMw.js";import"./circle-alert-maXXQupJ.js";import"./FinancialDataTab.vue_vue_type_script_setup_true_lang-DVfcvPOc.js";import"./Label.vue_vue_type_script_setup_true_lang-h2VDPson.js";import"./FamilyLoadSection.vue_vue_type_script_setup_true_lang-DMoyjVa7.js";import"./PersonalDataTab.vue_vue_type_script_setup_true_lang-kdGg46Ms.js";import"./EmergencyContactSection.vue_vue_type_script_setup_true_lang-D0rZXLIz.js";import"./phone-nEo4ac1h.js";import"./PhotoUploadSection.vue_vue_type_script_setup_true_lang-CxPrKCGu.js";import"./InputSearchRole.vue_vue_type_script_setup_true_lang-EukZwZ5B.js";import"./plus-DfDwn34n.js";import"./InputSearchSelectable.vue_vue_type_script_setup_true_lang-De66bQfT.js";import"./InputSelectableUnit.vue_vue_type_script_setup_true_lang-DQKJ_Vru.js";import"./building-Bd4n_4dw.js";import"./mail-CbmAYrOA.js";import"./SizesTab.vue_vue_type_script_setup_true_lang-CM1poBNv.js";import"./pencil-CJocxYT4.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=ot("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),U=F({__name:"TooltipProvider",props:{delayDuration:{default:0},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(v){const n=v;return(d,y)=>(l(),g(a(Q),Y(Z(n)),{default:i(()=>[X(d.$slots,"default")]),_:3},16))}}),at={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4"},nt={class:"flex items-center justify-between"},it={class:"flex items-center"},rt={class:"bg-card rounded-xl border shadow-sm"},lt={class:"hidden overflow-x-auto md:block"},dt={class:"w-full table-auto border-collapse"},mt={class:"p-4"},ct={class:"p-4"},ut={class:"p-4"},pt={class:"p-4"},_t={key:0,class:"text-gray-500"},ft={class:"p-4"},xt=["href"],ht={class:"p-4"},bt={class:"p-4 text-center"},gt={class:"flex items-center justify-center gap-3"},vt={class:"space-y-4 md:hidden"},yt={class:"mb-3 flex items-start justify-between border-b pb-3"},wt={class:"flex-1"},kt={class:"mb-1 text-base font-semibold"},Ct={class:"mb-4 space-y-2"},$t={class:"flex items-center gap-2"},St={class:"text-sm"},Tt={class:"flex items-center gap-2"},zt={class:"text-sm"},Bt={class:"flex items-start gap-2"},Nt={class:"flex-1 text-sm"},Dt={class:"flex items-start gap-2"},Vt={class:"flex flex-wrap gap-2"},Lt=["href"],jt={key:0,class:"text-muted-foreground text-sm"},Et={class:"flex items-center justify-end gap-2 border-t pt-3"},It={key:0,class:"py-12 text-center"},Je=F({__name:"Index",props:{cafes:{},staff:{},roles:{},units:{},businneses:{}},setup(v){const n=v,d=j(n.staff),y=async m=>{if(confirm("EstÃ¡s seguro de eliminar a este personal?"))try{await et.delete("/staff/"+m),d.value=d.value.filter(s=>s.id!==m)}catch(s){console.error("Error al eliminar personal:",s)}},M=["Lista negra","En proceso","Contratado","Cesado","Retirado","Abandono","CumpliÃ³ Contrato"],O=["bg-zinc-500 text-white","bg-yellow-500 text-white","bg-green-500 text-white","bg-gray-500 text-white","bg-red-500 text-white","bg-red-500 text-white","bg-blue-500 text-white"],S=m=>M[m]??"Desconocido",T=m=>O[m]??"",z=()=>{},R=m=>{const e=m.target.value.toLowerCase().trim();if(!e){d.value=n.staff;return}d.value=n.staff.filter(u=>u.name.toLowerCase().includes(e)||u.dni.toLowerCase().includes(e))},w=j(0);return E(w,m=>{d.value=n.staff,m!=0&&(d.value=n.staff.filter(s=>s.staffable&&s.staffable.unit_id&&s.staffable.unit_id==m))}),E(n,()=>{d.value=n.staff}),(m,s)=>(l(),c(f,null,[o(a(tt),{title:"Personal"}),o(W,null,{default:i(()=>[t("div",at,[t("div",nt,[s[3]||(s[3]=t("h1",{class:"text-2xl font-semibold tracking-tight"},"Personal",-1)),o($,{cafes:n.cafes,roles:n.roles,units:n.units,businneses:n.businneses},null,8,["cafes","roles","units","businneses"])]),t("div",it,[o(H,{type:"text",placeholder:"Buscar personal por dni o nombre",onChange:R}),o(a(q),{modelValue:w.value,"onUpdate:modelValue":s[0]||(s[0]=e=>w.value=e)},{default:i(()=>[o(a(J),{class:"h-10 border-zinc-200 bg-white hover:bg-zinc-50"},{default:i(()=>[o(a(K),{placeholder:"Seleccionar unidad"})]),_:1}),o(a(G),{class:"border-zinc-200 bg-white shadow-lg"},{default:i(()=>[o(a(N),{value:"0",class:"hover:bg-zinc-50"},{default:i(()=>s[4]||(s[4]=[_(" Ninguna ")])),_:1}),(l(!0),c(f,null,b(m.units,e=>(l(),g(a(N),{value:e.id,class:"hover:bg-zinc-50",key:e.id},{default:i(()=>[_(r(e.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),o(a(k),{variant:"default",class:"ms-2 cursor-pointer bg-blue-600 text-white hover:bg-blue-700"},{default:i(()=>s[5]||(s[5]=[_("Buscar")])),_:1})]),t("div",rt,[t("div",lt,[t("table",dt,[s[6]||(s[6]=t("thead",{class:"bg-muted/50"},[t("tr",null,[t("th",{class:"p-4 text-left text-sm font-semibold"},"Nombre"),t("th",{class:"p-4 text-left text-sm font-semibold"},"DNI"),t("th",{class:"p-4 text-left text-sm font-semibold"},"Celular"),t("th",{class:"p-4 text-left text-sm font-semibold"},"Comedor/Area"),t("th",{class:"p-4 text-left text-sm font-semibold"},"DocumentaciÃ³n"),t("th",{class:"p-4 text-left text-sm font-semibold"},"Estado"),t("th",{class:"p-4 text-center text-sm font-semibold"},"Opciones")])],-1)),t("tbody",null,[(l(!0),c(f,null,b(d.value,e=>{var u,x;return l(),c("tr",{key:e.id,class:"hover:bg-muted/30 border-t transition"},[t("td",mt,r(e.name),1),t("td",ct,r(e.dni),1),t("td",ut,r(e.cell),1),t("td",pt,[t("p",null,[_(r(((u=e.staffable)==null?void 0:u.name)||"Sin asignar")+" ",1),(x=e.staffable)!=null&&x.unit?(l(),c("span",_t," ("+r(e.staffable.unit.name)+") ",1)):C("",!0)])]),t("td",ft,[(l(!0),c(f,null,b(e.staff_files,p=>(l(),g(a(U),{key:p.id},{default:i(()=>[o(a(D),null,{default:i(()=>[o(a(V),{"as-child":""},{default:i(()=>[t("a",{class:"text-md rounded-sm text-white",href:"/storage/"+p.file_path,target:"_blank"}," ðŸ“„ ",8,xt)]),_:2},1024),o(a(L),null,{default:i(()=>[t("p",null,r(p.file_type),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),t("td",ht,[o(a(B),{class:I([T(e.status),"cursor-pointer rounded-sm"]),onClick:s[1]||(s[1]=p=>z())},{default:i(()=>[_(r(S(e.status)),1)]),_:2},1032,["class"])]),t("td",bt,[t("div",gt,[o(P,{staff:e},null,8,["staff"]),o(a(k),{variant:"ghost",size:"icon",class:"cursor-pointer text-red-600 hover:text-red-800",onClick:p=>y(e.id)},{default:i(()=>[o(a(A),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),o($,{cafes:n.cafes,roles:n.roles,units:n.units,businneses:n.businneses,staff:e},null,8,["cafes","roles","units","businneses","staff"]),o(st,{staff:e},null,8,["staff"])])])])}),128))])])]),t("div",vt,[(l(!0),c(f,null,b(d.value,e=>{var u,x,p;return l(),c("div",{key:e.id,class:"rounded-lg border bg-white p-4 shadow-sm transition hover:shadow-md"},[t("div",yt,[t("div",wt,[t("h3",kt,r(e.name),1),o(a(B),{class:I([T(e.status),"cursor-pointer rounded-sm text-xs"]),onClick:s[2]||(s[2]=h=>z())},{default:i(()=>[_(r(S(e.status)),1)]),_:2},1032,["class"])])]),t("div",Ct,[t("div",$t,[s[7]||(s[7]=t("span",{class:"text-muted-foreground min-w-[80px] text-xs font-medium"},"DNI:",-1)),t("span",St,r(e.dni),1)]),t("div",Tt,[s[8]||(s[8]=t("span",{class:"text-muted-foreground min-w-[80px] text-xs font-medium"},"Celular:",-1)),t("span",zt,r(e.cell),1)]),t("div",Bt,[s[9]||(s[9]=t("span",{class:"text-muted-foreground min-w-[80px] text-xs font-medium"},"Comedor:",-1)),t("span",Nt,r(((u=e.cafe)==null?void 0:u.name)??"Sin asignar")+" - "+r((p=(x=e.cafe)==null?void 0:x.unit)==null?void 0:p.name),1)]),t("div",Dt,[s[10]||(s[10]=t("span",{class:"text-muted-foreground min-w-[80px] text-xs font-medium"},"Documentos:",-1)),t("div",Vt,[(l(!0),c(f,null,b(e.staff_files,h=>(l(),g(a(U),{key:h.id},{default:i(()=>[o(a(D),null,{default:i(()=>[o(a(V),{"as-child":""},{default:i(()=>[t("a",{class:"inline-block rounded-sm text-lg transition hover:scale-110",href:"/storage/"+h.file_path,target:"_blank"}," ðŸ“„ ",8,Lt)]),_:2},1024),o(a(L),null,{default:i(()=>[t("p",null,r(h.file_type),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),!e.staff_files||e.staff_files.length===0?(l(),c("span",jt," Sin documentos ")):C("",!0)])])]),t("div",Et,[o(P,{staff:e},null,8,["staff"]),o(a(k),{variant:"ghost",size:"icon",class:"cursor-pointer text-red-600 hover:text-red-800",onClick:h=>y(e.id)},{default:i(()=>[o(a(A),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),o($,{cafes:n.cafes,roles:n.roles,units:n.units,businneses:n.businneses},null,8,["cafes","roles","units","businneses"])])])}),128)),!d.value||d.value.length===0?(l(),c("div",It,s[11]||(s[11]=[t("p",{class:"text-muted-foreground"},"No hay personal registrado",-1)]))):C("",!0)])])])]),_:1})],64))}});export{Je as default};
