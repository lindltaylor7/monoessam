import{d as Q,r as g,q as j,s as R,c as m,o as n,a as o,u as a,m as G,w as d,b as e,v as E,e as v,F as w,l as F,g as I,t as r,i as k}from"./app-D-LqQbZa.js";import{a as H,b as J,c as K,_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-_WVNti4i.js";import{_ as C}from"./index-DpgMMlKQ.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-B6C72Mwn.js";import{_ as Y,a as Z,b as ee,c as te,d as T}from"./SelectValue.vue_vue_type_script_setup_true_lang-CToYXGco.js";import{u as se}from"./useStaffFilter-BfOb3Lvl.js";import{_ as ae}from"./StaffClothesDialog.vue_vue_type_script_setup_true_lang-td1-yZUR.js";import{E as oe}from"./eye-mSdyq9CV.js";import{C as le}from"./chevron-left-qEn28Xtk.js";import{C as ie}from"./chevron-right-Cq55BZVf.js";import"./utils-bRKmu4jq.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DIcxem_I.js";import"./Presence-5rM4SnOx.js";import"./Primitive-D2E4zh-F.js";import"./useForwardExpose-C0s566w4.js";import"./PopperContent-BmDe8RlA.js";import"./Teleport-C90D5m2n.js";import"./VisuallyHidden-BMVg-pqG.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-ChRH62iI.js";import"./utils-DrB2bsOv.js";import"./useTypeahead-D3motRUW.js";import"./RovingFocusGroup-D3Tsaytf.js";import"./usePrimitiveElement-EZ5wwPph.js";import"./Collection-D9d2Sq_a.js";import"./utensils-BSk9kXbm.js";import"./createLucideIcon-Ds2iLTpM.js";import"./DialogTitle-CIiJ2IkS.js";import"./x-b92faefF.js";import"./DialogDescription-zqXnhQK4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hand-helping-B2OrTdtM.js";import"./building-2-BVTNxSIJ.js";import"./user-Cwyi-5P7.js";import"./chevron-down-CLUrzGV_.js";import"./chevron-up-a8bJVb19.js";import"./check-DoDSKdKK.js";import"./useFormControl-CdIo0Tlf.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DwCCe1VU.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-LhN1IvpN.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-B0NV6Kd9.js";const ne={class:"p-6"},re={class:"flex items-center mb-6"},de={class:"bg-white rounded-xl border shadow-sm overflow-hidden"},me={class:"overflow-x-auto"},ce={class:"w-full text-sm text-left"},ue={class:"divide-y divide-gray-100"},fe={class:"p-4"},pe={class:"flex items-center gap-3"},ve={class:"font-medium text-gray-900"},_e={class:"p-4"},ge={key:0,class:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10"},he={key:1,class:"text-gray-400 italic"},be={class:"p-4"},xe={key:0,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-700/10"},ye={key:1,class:"text-gray-400 italic"},we={class:"p-4 text-right"},ke={key:0},Ce={key:0,class:"flex items-center justify-between border-t p-4"},$e={class:"text-sm text-muted-foreground"},Se={class:"flex items-center gap-2"},Pe={class:"text-sm font-medium"},_=10,vt=Q({__name:"Index",props:{staff:{},roleClothes:{},units:{},colors:{}},setup(A){const $=A,S=g($.staff),u=g(null);j(()=>$.staff,l=>{if(S.value=l,u.value){const t=l.find(s=>{var p;return s.id===((p=u.value)==null?void 0:p.id)});t&&(u.value=t)}});const{filteredStaff:f,searchQuery:h,selectedUnitId:b}=se(S),i=g(1),c=R(()=>Math.ceil(f.value.length/_)),P=R(()=>{i.value>c.value&&c.value>0&&(i.value=1);const l=(i.value-1)*_,t=l+_;return f.value.slice(l,t)}),L=()=>{i.value<c.value&&i.value++},q=()=>{i.value>1&&i.value--};j(f,()=>{i.value=1});const x=g(!1),D=l=>{u.value=l,x.value=!0},O=l=>l.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2);return(l,t)=>(n(),m(w,null,[o(a(G),{title:"Registro de Tallas"}),o(W,{breadcrumbs:[{title:"Personal",href:l.route("staff.index")},{title:"Tallas",href:l.route("clothes.index")}]},{default:d(()=>[e("div",ne,[t[8]||(t[8]=e("div",{class:"flex justify-between items-center mb-6"},[e("div",null,[e("h1",{class:"text-3xl font-bold tracking-tight"},"Asignación de Prendas por Rol y Café"),e("p",{class:"text-muted-foreground text-xs sm:text-sm mt-1"}," Selecciona las prendas asignadas a cada rol/cargo en el café seleccionado ")]),e("div",{class:"flex flex-wrap gap-2"})],-1)),e("div",re,[o(a(X),{type:"text",placeholder:"Buscar personal por dni o nombre",modelValue:a(h),"onUpdate:modelValue":t[0]||(t[0]=s=>E(h)?h.value=s:null)},null,8,["modelValue"]),o(a(Y),{modelValue:a(b),"onUpdate:modelValue":t[1]||(t[1]=s=>E(b)?b.value=s:null)},{default:d(()=>[o(a(Z),{class:"h-10 border-zinc-200 bg-white hover:bg-zinc-50 ml-2 w-[200px]"},{default:d(()=>[o(a(ee),{placeholder:"Seleccionar unidad"})]),_:1}),o(a(te),{class:"border-zinc-200 bg-white shadow-lg"},{default:d(()=>[o(a(T),{value:"0",class:"hover:bg-zinc-50"},{default:d(()=>t[3]||(t[3]=[v(" Ninguna ")])),_:1}),(n(!0),m(w,null,F(l.units,s=>(n(),I(a(T),{value:String(s.id),class:"hover:bg-zinc-50",key:s.id},{default:d(()=>[v(r(s.mine.name)+" - "+r(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),e("div",de,[e("div",me,[e("table",ce,[t[5]||(t[5]=e("thead",{class:"bg-gray-50 text-gray-500 border-b"},[e("tr",null,[e("th",{class:"p-4 font-medium"},"Personal"),e("th",{class:"p-4 font-medium"},"Cargo"),e("th",{class:"p-4 font-medium"},"Unidad"),e("th",{class:"p-4 font-medium w-16"},"Prendas")])],-1)),e("tbody",ue,[(n(!0),m(w,null,F(P.value,s=>{var p,V,z,N,U,B;return n(),m("tr",{key:s.id,class:"hover:bg-gray-50/50"},[e("td",fe,[e("div",pe,[o(a(H),{class:"h-9 w-9 border"},{default:d(()=>{var y,M;return[(y=s.photo)!=null&&y.url?(n(),I(a(J),{key:0,src:`/storage/${(M=s.photo)==null?void 0:M.url}`,class:"object-cover"},null,8,["src"])):k("",!0),o(a(K),null,{default:d(()=>[v(r(O(s.name)),1)]),_:2},1024)]}),_:2},1024),e("div",ve,r(s.name),1)])]),e("td",_e,[s.role?(n(),m("span",ge,r(s.role.name),1)):(n(),m("span",he,"Sin cargo"))]),e("td",be,[(p=s.staffable)!=null&&p.unit?(n(),m("span",xe,r((z=(V=s.staffable)==null?void 0:V.unit)==null?void 0:z.name)+" - "+r((B=(U=(N=s.staffable)==null?void 0:N.unit)==null?void 0:U.mine)==null?void 0:B.name),1)):(n(),m("span",ye,"Sin unidad"))]),e("td",we,[o(a(C),{variant:"ghost",size:"icon",onClick:y=>D(s)},{default:d(()=>[o(a(oe),{class:"h-4 w-4 text-gray-500"})]),_:2},1032,["onClick"])])])}),128)),P.value.length===0?(n(),m("tr",ke,t[4]||(t[4]=[e("td",{colspan:"5",class:"p-8 text-center text-gray-500"}," No se encontró personal. ",-1)]))):k("",!0)])])]),c.value>1?(n(),m("div",Ce,[e("div",$e," Mostrando "+r((i.value-1)*_+1)+" - "+r(Math.min(i.value*_,a(f).length))+" de "+r(a(f).length)+" registros ",1),e("div",Se,[o(a(C),{variant:"outline",size:"sm",disabled:i.value===1,onClick:q},{default:d(()=>[o(a(le),{class:"h-4 w-4"}),t[6]||(t[6]=v(" Anterior "))]),_:1},8,["disabled"]),e("div",Pe," Página "+r(i.value)+" de "+r(c.value),1),o(a(C),{variant:"outline",size:"sm",disabled:i.value===c.value,onClick:L},{default:d(()=>[t[7]||(t[7]=v(" Siguiente ")),o(a(ie),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):k("",!0)])]),o(ae,{open:x.value,staff:u.value,colors:l.colors,"onUpdate:open":t[2]||(t[2]=s=>x.value=s)},null,8,["open","staff","colors"])]),_:1},8,["breadcrumbs"])],64))}});export{vt as default};
