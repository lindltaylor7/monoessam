import{d as Q,j as g,s as B,v as M,c as m,o as r,a as o,u as a,m as q,w as n,b as t,P as H,e as c,x as R,F as k,p as F,g as I,t as d,i as P}from"./app-B7WdqXcl.js";import{a as J,b as K,c as W,_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-9Z96ajT5.js";import{_ as h}from"./index-CN-HqOWX.js";import{_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-DI-DE2jc.js";import{_ as Z,a as ee,b as te,c as se,d as T}from"./SelectValue.vue_vue_type_script_setup_true_lang-CccX3lWm.js";import{u as ae}from"./useStaffFilter-ym1FGFgx.js";import{_ as oe}from"./StaffClothesDialog.vue_vue_type_script_setup_true_lang-CkuZV3Mu.js";import{E as le}from"./eye-24CjmhB_.js";import{C as ie}from"./chevron-left--KUrm2hn.js";import{C as ne}from"./chevron-right-DcpXLV7w.js";import"./utils-bRKmu4jq.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CJtIWAuU.js";import"./Presence-BDi5Z3rN.js";import"./Primitive-HxoesleM.js";import"./useForwardExpose-B4-SmJpO.js";import"./PopperContent-M-OCLf11.js";import"./Teleport-DHLrd6YJ.js";import"./VisuallyHidden-Ojn2niG0.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CIt6i1ie.js";import"./utils-B3dR3Fkc.js";import"./useTypeahead-DpMvQGoG.js";import"./RovingFocusGroup-8CdnFVCO.js";import"./usePrimitiveElement-BENlFLak.js";import"./Collection-C1XaxlYL.js";import"./utensils-BJTnrLi0.js";import"./createLucideIcon-BM0Y5dgR.js";import"./DialogTitle-DWITSh2Y.js";import"./x-Ckj070SL.js";import"./DialogDescription-53vnFDH4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hand-helping-Bzwoaxl-.js";import"./building-2-hef9Saeb.js";import"./user-snDpyLrB.js";import"./chevron-down-DOPp-MoB.js";import"./chevron-up-BMZL74tZ.js";import"./check-B-Pf2WUn.js";import"./useFormControl-DkuT1R3v.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DvhPyUG9.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-BlaYTFSp.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-D7HAM9qi.js";const re={class:"p-6"},de={class:"flex justify-between items-center mb-6"},me={class:"flex items-center mb-6"},ue={class:"bg-white rounded-xl border shadow-sm overflow-hidden"},ce={class:"overflow-x-auto"},fe={class:"w-full text-sm text-left"},pe={class:"divide-y divide-gray-100"},_e={class:"p-4"},ve={class:"flex items-center gap-3"},ge={class:"font-medium text-gray-900"},he={class:"p-4"},be={key:0,class:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10"},xe={key:1,class:"text-gray-400 italic"},ye={class:"p-4"},we={key:0,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-700/10"},ke={key:1,class:"text-gray-400 italic"},Pe={class:"p-4 text-right"},Ce={key:0},$e={key:0,class:"flex items-center justify-between border-t p-4"},Se={class:"text-sm text-muted-foreground"},Ve={class:"flex items-center gap-2"},ze={class:"text-sm font-medium"},v=10,gt=Q({__name:"Index",props:{staff:{},roleClothes:{},units:{}},setup(L){const C=L,$=g(C.staff),f=g(null);B(()=>C.staff,l=>{if($.value=l,f.value){const e=l.find(s=>{var _;return s.id===((_=f.value)==null?void 0:_.id)});e&&(f.value=e)}});const{filteredStaff:p,searchQuery:b,selectedUnitId:x}=ae($),i=g(1),u=M(()=>Math.ceil(p.value.length/v)),S=M(()=>{i.value>u.value&&u.value>0&&(i.value=1);const l=(i.value-1)*v,e=l+v;return p.value.slice(l,e)}),A=()=>{i.value<u.value&&i.value++},D=()=>{i.value>1&&i.value--};B(p,()=>{i.value=1});const y=g(!1),G=l=>{f.value=l,y.value=!0},O=l=>l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(l,e)=>(r(),m(k,null,[o(a(q),{title:"Registro de Tallas"}),o(X,{breadcrumbs:[{title:"Personal",href:l.route("staff.index")},{title:"Tallas",href:l.route("clothes.index")}]},{default:n(()=>[t("div",re,[t("div",de,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold tracking-tight"},"Entrega de EEP's"),t("p",{class:"text-muted-foreground mt-1"}," Gestiona la entrega de EPP's al personal. ")],-1)),o(a(H),{href:l.route("clothes.manage")},{default:n(()=>[o(a(h),null,{default:n(()=>e[3]||(e[3]=[c("Configurar Prendas y Roles")])),_:1})]),_:1},8,["href"])]),t("div",me,[o(a(Y),{type:"text",placeholder:"Buscar personal por dni o nombre",modelValue:a(b),"onUpdate:modelValue":e[0]||(e[0]=s=>R(b)?b.value=s:null)},null,8,["modelValue"]),o(a(Z),{modelValue:a(x),"onUpdate:modelValue":e[1]||(e[1]=s=>R(x)?x.value=s:null)},{default:n(()=>[o(a(ee),{class:"h-10 border-zinc-200 bg-white hover:bg-zinc-50 ml-2 w-[200px]"},{default:n(()=>[o(a(te),{placeholder:"Seleccionar unidad"})]),_:1}),o(a(se),{class:"border-zinc-200 bg-white shadow-lg"},{default:n(()=>[o(a(T),{value:"0",class:"hover:bg-zinc-50"},{default:n(()=>e[5]||(e[5]=[c(" Ninguna ")])),_:1}),(r(!0),m(k,null,F(l.units,s=>(r(),I(a(T),{value:String(s.id),class:"hover:bg-zinc-50",key:s.id},{default:n(()=>[c(d(s.mine.name)+" - "+d(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),t("div",ue,[t("div",ce,[t("table",fe,[e[7]||(e[7]=t("thead",{class:"bg-gray-50 text-gray-500 border-b"},[t("tr",null,[t("th",{class:"p-4 font-medium"},"Personal"),t("th",{class:"p-4 font-medium"},"Cargo"),t("th",{class:"p-4 font-medium"},"Unidad"),t("th",{class:"p-4 font-medium w-16"},"Prendas")])],-1)),t("tbody",pe,[(r(!0),m(k,null,F(S.value,s=>{var _,V,z,E,N,U;return r(),m("tr",{key:s.id,class:"hover:bg-gray-50/50"},[t("td",_e,[t("div",ve,[o(a(J),{class:"h-9 w-9 border"},{default:n(()=>{var w,j;return[(w=s.photo)!=null&&w.url?(r(),I(a(K),{key:0,src:`/storage/${(j=s.photo)==null?void 0:j.url}`,class:"object-cover"},null,8,["src"])):P("",!0),o(a(W),null,{default:n(()=>[c(d(O(s.name)),1)]),_:2},1024)]}),_:2},1024),t("div",ge,d(s.name),1)])]),t("td",he,[s.role?(r(),m("span",be,d(s.role.name),1)):(r(),m("span",xe,"Sin cargo"))]),t("td",ye,[(_=s.staffable)!=null&&_.unit?(r(),m("span",we,d((z=(V=s.staffable)==null?void 0:V.unit)==null?void 0:z.name)+" - "+d((U=(N=(E=s.staffable)==null?void 0:E.unit)==null?void 0:N.mine)==null?void 0:U.name),1)):(r(),m("span",ke,"Sin unidad"))]),t("td",Pe,[o(a(h),{variant:"ghost",size:"icon",onClick:w=>G(s)},{default:n(()=>[o(a(le),{class:"h-4 w-4 text-gray-500"})]),_:2},1032,["onClick"])])])}),128)),S.value.length===0?(r(),m("tr",Ce,e[6]||(e[6]=[t("td",{colspan:"5",class:"p-8 text-center text-gray-500"}," No se encontró personal. ",-1)]))):P("",!0)])])]),u.value>1?(r(),m("div",$e,[t("div",Se," Mostrando "+d((i.value-1)*v+1)+" - "+d(Math.min(i.value*v,a(p).length))+" de "+d(a(p).length)+" registros ",1),t("div",Ve,[o(a(h),{variant:"outline",size:"sm",disabled:i.value===1,onClick:D},{default:n(()=>[o(a(ie),{class:"h-4 w-4"}),e[8]||(e[8]=c(" Anterior "))]),_:1},8,["disabled"]),t("div",ze," Página "+d(i.value)+" de "+d(u.value),1),o(a(h),{variant:"outline",size:"sm",disabled:i.value===u.value,onClick:A},{default:n(()=>[e[9]||(e[9]=c(" Siguiente ")),o(a(ne),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):P("",!0)])]),o(oe,{open:y.value,staff:f.value,"onUpdate:open":e[2]||(e[2]=s=>y.value=s)},null,8,["open","staff"])]),_:1},8,["breadcrumbs"])],64))}});export{gt as default};
