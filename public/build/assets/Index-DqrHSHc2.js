import{_ as w}from"./index-BmJWyXmo.js";import{_ as F}from"./Input.vue_vue_type_script_setup_true_lang-Dj7OXP1P.js";import{_ as M,a as U,b as j,c as A,d as C}from"./SelectValue.vue_vue_type_script_setup_true_lang-CVTY1Om0.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bfz7RLeB.js";import{bY as R,d as q,r as $,q as k,s as V,c as d,o as p,a as o,u as s,m as I,w as n,b as a,v as P,e as h,F as S,l as z,g as N,t as f,i as B}from"./app-C6NgE5un.js";import{_ as O}from"./StaffRegistrationDialog.vue_vue_type_script_setup_true_lang-Dx6abL1r.js";import{_ as Q}from"./StaffTable.vue_vue_type_script_setup_true_lang-ePmuzDgS.js";import{_ as T}from"./StaffMobileCard.vue_vue_type_script_setup_true_lang-D4aQitoF.js";import{u as Y}from"./useStaffFilter-D2g_2Af8.js";import{C as G}from"./chevron-left-I6WNv15m.js";import{C as H}from"./chevron-right-CXPRo_oF.js";import"./Primitive-Dz6BdNAh.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Presence-C16l6f-G.js";import"./useForwardExpose-BDT-UiQT.js";import"./Teleport-BBbXjpWz.js";import"./chevron-down-CUDz6jDX.js";import"./createLucideIcon-pIRXmFBY.js";import"./chevron-up-Cm2KSEGw.js";import"./Collection-B31zlixO.js";import"./usePrimitiveElement-C_w-ra6U.js";import"./check-DTc0zkRx.js";import"./PopperContent-B_JZLYSE.js";import"./useTypeahead-Dlbq4Drc.js";import"./utils-CCA9cgE0.js";import"./useFormControl-BuEAf5cm.js";import"./VisuallyHidden-C2WY4yzo.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CCrX9P3n.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Dvu_yPnN.js";import"./RovingFocusGroup-DUjpD9wM.js";import"./utensils-SXUV3_1e.js";import"./DialogTitle-pKaoQwGU.js";import"./x-FW5yYcVL.js";import"./DialogDescription-CNBlE0bV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hand-helping-DpA0nQ7T.js";import"./building-2-BaGfwV9A.js";import"./user-D381w6S0.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CXfPcHb6.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-ntb8WBlm.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-vrE2xWgX.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-B6jo_znV.js";import"./TabsTrigger.vue_vue_type_script_setup_true_lang-JDD0-bAs.js";import"./RovingFocusItem-BW90cXYf.js";import"./TabsContent.vue_vue_type_script_setup_true_lang-D516Zofy.js";import"./AlertErrors.vue_vue_type_script_setup_true_lang-Sm2eRXVm.js";import"./AttachmentsTab.vue_vue_type_script_setup_true_lang-B4Kd3SAy.js";import"./index-Bm3ex6a2.js";import"./FileUploadItem-FmZRzBxx.js";import"./paperclip-Bt3-EBzH.js";import"./calendar-BPD7dOMY.js";import"./circle-alert-B0QtNVvI.js";import"./FinancialDataTab.vue_vue_type_script_setup_true_lang-BoBi0dFX.js";import"./Label.vue_vue_type_script_setup_true_lang-C6oWO7ic.js";import"./FamilyLoadSection.vue_vue_type_script_setup_true_lang-BdLlbXW2.js";import"./PersonalDataTab.vue_vue_type_script_setup_true_lang-BKrmjXYr.js";import"./EmergencyContactSection.vue_vue_type_script_setup_true_lang-DNtCHwlH.js";import"./triangle-alert-DakYSp0v.js";import"./info-DykMJMNb.js";import"./phone-Co4xXJTo.js";import"./PhotoUploadSection.vue_vue_type_script_setup_true_lang-Nb2C59Oi.js";import"./InputSearchRole.vue_vue_type_script_setup_true_lang-LFknCT5g.js";import"./plus-3kbiyMl6.js";import"./InputSearchSelectable.vue_vue_type_script_setup_true_lang-PAsyKyiW.js";import"./InputSelectableUnit.vue_vue_type_script_setup_true_lang-BJ1pPxCm.js";import"./user-round-YdiyTD60.js";import"./truck-BoGdqZzJ.js";import"./eye-D3NUh0UK.js";import"./person-standing-C_uxTpWq.js";import"./mail-Cc3htuuI.js";import"./SizesTab.vue_vue_type_script_setup_true_lang-C1yFQ5xO.js";import"./pencil-Ds7PI5jk.js";import"./useStaffConstants-D5VHUUQg.js";import"./index-B7Y7Swmj.js";import"./ChangeStatusModal.vue_vue_type_script_setup_true_lang-Doeo3dbg.js";import"./FilesModal.vue_vue_type_script_setup_true_lang-Brk2yTrl.js";import"./upload-CbGEQMSL.js";import"./trash-2-BgQSWW6E.js";function J(g){return{deleteStaff:async m=>{if(confirm("¿Estás seguro de eliminar a este personal?"))try{await R.delete(`/staff/${m}`),g(m)}catch(u){console.error("Error al eliminar personal:",u),alert("Ocurrió un error al intentar eliminar el registro.")}}}}const K={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4"},W={class:"flex items-center justify-between"},X={class:"flex items-center"},Z={class:"bg-card rounded-xl border shadow-sm"},ee={class:"space-y-4 md:hidden p-4"},te={key:0,class:"py-12 text-center"},se={key:0,class:"flex items-center justify-between border-t p-4"},oe={class:"text-sm text-muted-foreground"},re={class:"flex items-center gap-2"},ie={class:"text-sm font-medium"},c=10,Bt=q({__name:"Index",props:{cafes:{},staff:{},roles:{},units:{},businneses:{},roleClothes:{}},setup(g){const e=g,m=$(e.staff);k(()=>e.staff,l=>{m.value=l});const{filteredStaff:u,searchQuery:b,selectedUnitId:x}=Y(m),{deleteStaff:y}=J(l=>{m.value=m.value.filter(t=>t.id!==l)}),r=$(1),v=V(()=>Math.ceil(u.value.length/c)),_=V(()=>{const l=(r.value-1)*c,t=l+c;return u.value.slice(l,t)}),D=()=>{r.value<v.value&&r.value++},E=()=>{r.value>1&&r.value--};return k(u,()=>{r.value=1}),(l,t)=>(p(),d(S,null,[o(s(I),{title:"Personal"}),o(L,null,{default:n(()=>[a("div",K,[a("div",W,[t[2]||(t[2]=a("h1",{class:"text-2xl font-semibold tracking-tight"},"Personal",-1)),o(O,{cafes:e.cafes,roles:e.roles,units:e.units,businneses:e.businneses,"role-clothes":e.roleClothes},null,8,["cafes","roles","units","businneses","role-clothes"])]),a("div",X,[o(F,{type:"text",placeholder:"Buscar personal por dni o nombre",modelValue:s(b),"onUpdate:modelValue":t[0]||(t[0]=i=>P(b)?b.value=i:null)},null,8,["modelValue"]),o(s(M),{modelValue:s(x),"onUpdate:modelValue":t[1]||(t[1]=i=>P(x)?x.value=i:null)},{default:n(()=>[o(s(U),{class:"h-10 border-zinc-200 bg-white hover:bg-zinc-50 ml-2 w-[200px]"},{default:n(()=>[o(s(j),{placeholder:"Seleccionar unidad"})]),_:1}),o(s(A),{class:"border-zinc-200 bg-white shadow-lg"},{default:n(()=>[o(s(C),{value:"0",class:"hover:bg-zinc-50"},{default:n(()=>t[3]||(t[3]=[h(" Ninguna ")])),_:1}),(p(!0),d(S,null,z(l.units,i=>(p(),N(s(C),{value:String(i.id),class:"hover:bg-zinc-50",key:i.id},{default:n(()=>[h(f(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),a("div",Z,[o(Q,{"staff-list":_.value,cafes:e.cafes,roles:e.roles,units:e.units,businesses:e.businneses,"role-clothes":e.roleClothes,onDeleteStaff:s(y)},null,8,["staff-list","cafes","roles","units","businesses","role-clothes","onDeleteStaff"]),a("div",ee,[(p(!0),d(S,null,z(_.value,i=>(p(),N(T,{key:i.id,staff:i,cafes:e.cafes,roles:e.roles,units:e.units,businesses:e.businneses,"role-clothes":e.roleClothes,onDeleteStaff:s(y)},null,8,["staff","cafes","roles","units","businesses","role-clothes","onDeleteStaff"]))),128)),!_.value||_.value.length===0?(p(),d("div",te,t[4]||(t[4]=[a("p",{class:"text-muted-foreground"},"No hay personal registrado",-1)]))):B("",!0)]),v.value>1?(p(),d("div",se,[a("div",oe," Mostrando "+f((r.value-1)*c+1)+" - "+f(Math.min(r.value*c,s(u).length))+" de "+f(s(u).length)+" registros ",1),a("div",re,[o(s(w),{variant:"outline",size:"sm",disabled:r.value===1,onClick:E},{default:n(()=>[o(s(G),{class:"h-4 w-4"}),t[5]||(t[5]=h(" Anterior "))]),_:1},8,["disabled"]),a("div",ie," Página "+f(r.value)+" de "+f(v.value),1),o(s(w),{variant:"outline",size:"sm",disabled:r.value===v.value,onClick:D},{default:n(()=>[t[6]||(t[6]=h(" Siguiente ")),o(s(H),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):B("",!0)])])]),_:1})],64))}});export{Bt as default};
