import{d as M,j as S,v as B,c as u,o as i,a as l,u as t,m as U,w as r,b as e,P as K,t as d,y as H,g as w,i as y,e as p,F as h,p as k,n as D,W as P}from"./app-B7WdqXcl.js";import{_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-9Z96ajT5.js";import{_ as F}from"./index-CN-HqOWX.js";import{_ as z}from"./Input.vue_vue_type_script_setup_true_lang-DI-DE2jc.js";import{_ as C}from"./index-Dvt3lMNB.js";import{_}from"./Card.vue_vue_type_script_setup_true_lang-CqpVWRYp.js";import{_ as v}from"./CardContent.vue_vue_type_script_setup_true_lang-48MzfDuU.js";import{_ as E,a as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-CN6ceAzh.js";import{B as g,A as X,S as A}from"./shirt-CBAWHjfz.js";import{C as J}from"./check-B-Pf2WUn.js";import{P as I}from"./plus-BNrKV-Js.js";import{X as L}from"./x-Ckj070SL.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-bRKmu4jq.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CJtIWAuU.js";import"./Presence-BDi5Z3rN.js";import"./Primitive-HxoesleM.js";import"./useForwardExpose-B4-SmJpO.js";import"./PopperContent-M-OCLf11.js";import"./Teleport-DHLrd6YJ.js";import"./VisuallyHidden-Ojn2niG0.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-CIt6i1ie.js";import"./utils-B3dR3Fkc.js";import"./useTypeahead-DpMvQGoG.js";import"./RovingFocusGroup-8CdnFVCO.js";import"./usePrimitiveElement-BENlFLak.js";import"./Collection-C1XaxlYL.js";import"./utensils-BJTnrLi0.js";import"./createLucideIcon-BM0Y5dgR.js";import"./DialogTitle-DWITSh2Y.js";import"./DialogDescription-53vnFDH4.js";import"./hand-helping-Bzwoaxl-.js";import"./building-2-hef9Saeb.js";import"./user-snDpyLrB.js";import"./chevron-right-DcpXLV7w.js";const Y={class:"flex flex-col h-full w-full overflow-hidden p-4 sm:p-6 gap-6"},Z={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 flex-none"},ee={class:"min-w-0 flex-1"},te={class:"text-xl sm:text-2xl font-bold tracking-tight flex items-center gap-2"},se={class:"grid grid-cols-1 md:grid-cols-3 gap-4 flex-none"},le={class:"text-2xl font-bold text-blue-900 mt-1"},ae={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},oe={class:"text-2xl font-bold text-green-900 mt-1"},re={class:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center"},ne={class:"text-2xl font-bold text-purple-900 mt-1"},ie={class:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center"},de={class:"bg-card text-card-foreground rounded-xl border shadow-sm p-4 bg-white flex flex-col sm:flex-row gap-4 items-center flex-none"},ue={class:"flex-1 w-full flex flex-col sm:flex-row gap-4"},ce={class:"flex-1"},me={class:"relative max-w-md"},fe={class:"flex-1 flex gap-4"},pe={class:"relative flex-1 max-w-md"},ge={class:"flex flex-wrap gap-2"},xe={class:"text-xs text-muted-foreground ml-1"},he={key:0,class:"text-center py-4 text-muted-foreground"},_e={class:"flex-1 overflow-auto custom-scrollbar"},ve={key:0,class:"text-center py-12"},be={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-4"},we={class:"flex justify-between items-start"},ye=["title"],ke={class:"mb-4"},Ce={class:"flex flex-wrap gap-2 min-h-[32px]"},Ae={key:0,class:"text-xs text-gray-400 italic py-1"},Re={class:"space-y-2"},Se=["onClick"],Pe={class:"flex items-center gap-2"},je={class:"h-6 w-6 rounded-full border border-gray-200 flex items-center justify-center group-hover/item:border-blue-300"},Ne={class:"text-sm"},Ve={key:0,class:"text-center py-4 text-gray-400 text-sm"},$e={class:"p-4 border-t bg-gray-50 text-sm text-muted-foreground flex flex-col sm:flex-row justify-between items-center gap-2 flex-none"},Be={class:"flex items-center gap-4"},De={class:"flex items-center gap-1"},Fe={class:"flex items-center gap-1"},ze=M({__name:"Manage",props:{roles:{},clothes:{}},setup(T){const m=T,f=S(""),x=S(!1),b=S(""),j=B(()=>b.value?m.roles.filter(o=>o.name.toLowerCase().includes(b.value.toLowerCase())):m.roles),c=o=>m.clothes.filter(s=>s.roles.some(a=>a.id===o)),N=(o,s)=>o.roles.some(a=>a.id===s),V=()=>{f.value&&(x.value=!0,P.post(route("clothes.store"),{name:f.value},{onSuccess:()=>f.value="",onFinish:()=>x.value=!1}))},W=o=>{confirm("¿Seguro que deseas eliminar esta prenda y todas sus asignaciones?")&&P.delete(route("clothes.destroy",o),{preserveScroll:!0})},$=(o,s,a)=>{P.post(route("clothes.assign-role"),{cloth_id:o,role_id:s,action:a?"detach":"attach"},{preserveScroll:!0,preserveState:!0})},R=B(()=>{const o=m.roles.reduce((a,n)=>a+c(n.id).length,0),s=m.roles.length>0?(o/m.roles.length).toFixed(1):"0";return{totalAssignments:o,averagePerRole:s,rolesWithAssignments:m.roles.filter(a=>c(a.id).length>0).length}});return(o,s)=>(i(),u(h,null,[l(t(U),{title:"Gestión de Ropa por Rol"}),l(Q,{breadcrumbs:[{title:"Personal",href:o.route("staff.index")},{title:"Ropa",href:o.route("clothes.index")},{title:"Matriz de Asignación",href:o.route("clothes.manage")}]},{default:r(()=>[e("div",Y,[e("div",Z,[e("div",ee,[e("h1",te,[l(t(g),{class:"h-5 w-5 sm:h-6 sm:w-6 text-primary"}),s[2]||(s[2]=e("span",null,"Asignación de Prendas por Rol",-1))]),s[3]||(s[3]=e("p",{class:"text-muted-foreground text-xs sm:text-sm mt-1"}," Selecciona las prendas asignadas a cada rol/cargo ",-1))]),l(t(K),{href:o.route("clothes.index"),class:"flex-shrink-0 mt-2 sm:mt-0"},{default:r(()=>[l(t(F),{variant:"outline",size:"sm",class:"gap-2 w-full sm:w-auto"},{default:r(()=>[l(t(X),{class:"h-4 w-4"}),s[4]||(s[4]=e("span",{class:"hidden sm:inline"},"Volver al listado",-1)),s[5]||(s[5]=e("span",{class:"sm:hidden"},"Volver",-1))]),_:1})]),_:1},8,["href"])]),e("div",se,[l(t(_),{class:"bg-gradient-to-br from-blue-50 to-white border-blue-100"},{default:r(()=>[l(t(v),{class:"p-4 flex items-center justify-between"},{default:r(()=>[e("div",null,[s[6]||(s[6]=e("p",{class:"text-sm font-medium text-blue-700"},"Total Asignaciones",-1)),e("p",le,d(R.value.totalAssignments),1)]),e("div",ae,[l(t(A),{class:"h-5 w-5 text-blue-600"})])]),_:1})]),_:1}),l(t(_),{class:"bg-gradient-to-br from-green-50 to-white border-green-100"},{default:r(()=>[l(t(v),{class:"p-4 flex items-center justify-between"},{default:r(()=>[e("div",null,[s[7]||(s[7]=e("p",{class:"text-sm font-medium text-green-700"},"Promedio por Rol",-1)),e("p",oe,d(R.value.averagePerRole),1)]),e("div",re,[l(t(g),{class:"h-5 w-5 text-green-600"})])]),_:1})]),_:1}),l(t(_),{class:"bg-gradient-to-br from-purple-50 to-white border-purple-100"},{default:r(()=>[l(t(v),{class:"p-4 flex items-center justify-between"},{default:r(()=>[e("div",null,[s[8]||(s[8]=e("p",{class:"text-sm font-medium text-purple-700"},"Roles con Prendas",-1)),e("p",ne,d(R.value.rolesWithAssignments)+"/"+d(o.roles.length),1)]),e("div",ie,[l(t(J),{class:"h-5 w-5 text-purple-600"})])]),_:1})]),_:1})]),e("div",de,[e("div",ue,[e("div",ce,[e("div",me,[l(t(g),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),l(t(z),{modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=a=>b.value=a),placeholder:"Buscar rol...",class:"pl-9 w-full"},null,8,["modelValue"])])]),e("div",fe,[e("div",pe,[l(t(A),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),l(t(z),{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=a=>f.value=a),placeholder:"Nueva prenda...",class:"pl-9 w-full",onKeyup:H(V,["enter"])},null,8,["modelValue"])]),l(t(F),{onClick:V,disabled:x.value||!f.value,class:"sm:w-auto"},{default:r(()=>[x.value?y("",!0):(i(),w(t(I),{key:0,class:"h-4 w-4 mr-2"})),p(" "+d(x.value?"Guardando...":"Agregar"),1)]),_:1},8,["disabled"])])])]),l(t(_),{class:"flex-none"},{default:r(()=>[l(t(E),{class:"pb-3"},{default:r(()=>[l(t(G),{class:"text-base flex items-center gap-2"},{default:r(()=>[l(t(A),{class:"h-4 w-4"}),s[9]||(s[9]=p(" Todas las Prendas Disponibles "))]),_:1})]),_:1}),l(t(v),null,{default:r(()=>[e("div",ge,[(i(!0),u(h,null,k(o.clothes,a=>(i(),w(t(C),{key:a.id,variant:"outline",class:"cursor-pointer group relative px-3 py-1.5",onClick:n=>W(a.id)},{default:r(()=>[e("span",null,d(a.name),1),l(t(L),{class:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity text-red-500"}),e("span",xe," ("+d(a.roles.length)+") ",1)]),_:2},1032,["onClick"]))),128)),o.clothes.length===0?(i(),u("div",he," No hay prendas registradas. ¡Agrega la primera! ")):y("",!0)])]),_:1})]),_:1}),e("div",_e,[j.value.length===0?(i(),u("div",ve,[l(t(g),{class:"h-12 w-12 mx-auto text-gray-300 mb-4"}),s[10]||(s[10]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No se encontraron roles",-1)),s[11]||(s[11]=e("p",{class:"text-gray-500"},"Intenta con otros términos de búsqueda",-1))])):(i(),u("div",be,[(i(!0),u(h,null,k(j.value,a=>(i(),w(t(_),{key:a.id,class:D(["group hover:shadow-md transition-shadow",{"border-blue-200 bg-blue-50/50":c(a.id).length>0,"border-gray-200":c(a.id).length===0}])},{default:r(()=>[l(t(E),{class:"pb-3"},{default:r(()=>[e("div",we,[l(t(G),{class:"text-base flex items-center gap-2"},{default:r(()=>[l(t(g),{class:"h-4 w-4 text-primary"}),e("span",{class:"truncate",title:a.name},d(a.name),9,ye)]),_:2},1024),l(t(C),{variant:"secondary",class:D(["flex-shrink-0 ml-2",{"bg-blue-100 text-blue-800":c(a.id).length>0,"bg-gray-100 text-gray-600":c(a.id).length===0}])},{default:r(()=>[p(d(c(a.id).length),1)]),_:2},1032,["class"])])]),_:2},1024),l(t(v),null,{default:r(()=>[e("div",ke,[s[12]||(s[12]=e("p",{class:"text-xs font-medium text-gray-500 mb-2"},"PRENDAS ASIGNADAS:",-1)),e("div",Ce,[(i(!0),u(h,null,k(c(a.id),n=>(i(),w(t(C),{key:n.id,variant:"default",class:"cursor-pointer group",onClick:q=>$(n.id,a.id,!0)},{default:r(()=>[e("span",null,d(n.name),1),l(t(L),{class:"h-3 w-3 ml-1 group-hover:scale-110 transition-transform"})]),_:2},1032,["onClick"]))),128)),c(a.id).length===0?(i(),u("div",Ae," Sin prendas asignadas ")):y("",!0)])]),s[13]||(s[13]=e("div",{class:"relative my-4"},[e("div",{class:"absolute inset-0 flex items-center"},[e("div",{class:"w-full border-t border-gray-200"})]),e("div",{class:"relative flex justify-center text-xs"},[e("span",{class:"px-2 bg-white text-gray-500"},"ASIGNAR NUEVAS PRENDAS")])],-1)),e("div",Re,[(i(!0),u(h,null,k(o.clothes.filter(n=>!N(n,a.id)),n=>(i(),u("div",{key:n.id,class:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer group/item",onClick:q=>$(n.id,a.id,!1)},[e("div",Pe,[e("div",je,[l(t(I),{class:"h-3 w-3 text-gray-400 group-hover/item:text-blue-500"})]),e("span",Ne,d(n.name),1)]),l(t(C),{variant:"outline",class:"text-xs"},{default:r(()=>[p(d(n.roles.length)+" roles ",1)]),_:2},1024)],8,Se))),128)),o.clothes.filter(n=>!N(n,a.id)).length===0?(i(),u("div",Ve," Todas las prendas están asignadas a este rol ")):y("",!0)])]),_:2},1024)]),_:2},1032,["class"]))),128))]))]),e("div",$e,[e("div",Be,[e("span",De,[l(t(g),{class:"h-3 w-3"}),p(" "+d(o.roles.length)+" Roles ",1)]),e("span",Fe,[l(t(A),{class:"h-3 w-3"}),p(" "+d(o.clothes.length)+" Prendas ",1)])]),s[14]||(s[14]=e("div",{class:"text-xs text-gray-500"}," Haz clic en una prenda para asignarla o quitarla de un rol ",-1))])])]),_:1},8,["breadcrumbs"])],64))}}),vt=O(ze,[["__scopeId","data-v-a74cd842"]]);export{vt as default};
