import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-DL51d24c.js";import{_ as $,a as V,b as k,c as C,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-C-T9dtV6.js";import{_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-BsLwM5B8.js";import{j as v,y as z,v as B,d as D,s as L,c as _,o as f,a as i,u as t,m as U,w as u,b as p,X as h,e as x,F as b,p as y,g as S,t as E,i as F}from"./app-GcuSfiuw.js";import{_ as I}from"./StaffRegistrationDialog.vue_vue_type_script_setup_true_lang-kbWyUJfD.js";import{_ as j}from"./StaffTable.vue_vue_type_script_setup_true_lang-Ga6brVpI.js";import{_ as P}from"./StaffMobileCard.vue_vue_type_script_setup_true_lang-54KdmwO_.js";import"./utils-bRKmu4jq.js";import"./Presence-BY4iy8R0.js";import"./Primitive-CsC2pTSb.js";import"./useForwardExpose-CNTMfFCH.js";import"./Teleport-BTBI0_xe.js";import"./chevron-down-DXCNiO5g.js";import"./createLucideIcon-DqNKpY-j.js";import"./Collection-D5lzJdh3.js";import"./usePrimitiveElement-CBOsETE8.js";import"./check-CR-oklFo.js";import"./PopperContent-BnuZRxaQ.js";import"./useTypeahead-UAK-D11X.js";import"./utils-BB-MxACM.js";import"./VisuallyHidden-CyTbUzRs.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-L2vfucaI.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang--lyaA76E.js";import"./RovingFocusGroup-BNMQl87o.js";import"./DialogTitle-BdyAMgt0.js";import"./x-CLMcjQrq.js";import"./DialogDescription-BT7UvdKS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hand-helping-BuQNwlQ7.js";import"./building-2-CHGsISeR.js";import"./user-bhyA7Fdi.js";import"./chevron-right-DATVigwb.js";import"./index-CM7yg-Ro.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CWR0HQ4t.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-Cmhw_iDl.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-BMUS2PY_.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-CO2bNyX4.js";import"./TabsTrigger.vue_vue_type_script_setup_true_lang-rpSjHMIC.js";import"./RovingFocusItem-C6i-f6O6.js";import"./AlertErrors.vue_vue_type_script_setup_true_lang-4dc2Sh7e.js";import"./AttachmentsTab.vue_vue_type_script_setup_true_lang-DQ0Lsmfv.js";import"./index-DA_1kEUU.js";import"./FileUploadItem-DhXE00lp.js";import"./calendar-DIx7q9o_.js";import"./circle-alert-CaTQ15G0.js";import"./FinancialDataTab.vue_vue_type_script_setup_true_lang-BriUjMKN.js";import"./Label.vue_vue_type_script_setup_true_lang-9xZHdr68.js";import"./FamilyLoadSection.vue_vue_type_script_setup_true_lang-BdfjNqHB.js";import"./PersonalDataTab.vue_vue_type_script_setup_true_lang-5edwlO8f.js";import"./EmergencyContactSection.vue_vue_type_script_setup_true_lang-DWs8kM-u.js";import"./info-Gwu6aE1J.js";import"./phone-DXQeIqVj.js";import"./PhotoUploadSection.vue_vue_type_script_setup_true_lang-nURIW668.js";import"./InputSearchRole.vue_vue_type_script_setup_true_lang-DmcrpBD8.js";import"./plus-wNTnW71q.js";import"./InputSearchSelectable.vue_vue_type_script_setup_true_lang-CkNY8hkg.js";import"./InputSelectableUnit.vue_vue_type_script_setup_true_lang-D8Pgou7p.js";import"./building-DyAAH6LO.js";import"./mail-CrvOmMP_.js";import"./SizesTab.vue_vue_type_script_setup_true_lang-4rmcIyWK.js";import"./pencil-PDxsHobA.js";import"./useStaffConstants-BB8fEgOu.js";import"./index-B1EOMsiQ.js";import"./ChangeStatusModal.vue_vue_type_script_setup_true_lang-DAiTNsDa.js";import"./FilesModal.vue_vue_type_script_setup_true_lang-CYuR5B-0.js";import"./file-JNQAVSdh.js";function Q(c){const e=v(""),r=v("0"),n=z(()=>{let a=c.value;if(r.value!=="0"&&(a=a.filter(l=>{var m;return((m=l.staffable)==null?void 0:m.unit_id)===parseInt(r.value)})),e.value.trim()){const l=e.value.toLowerCase().trim();a=a.filter(m=>m.name.toLowerCase().includes(l)||m.dni.toLowerCase().includes(l))}return a});return{searchQuery:e,selectedUnitId:r,filteredStaff:n}}function q(c){return{deleteStaff:async r=>{if(confirm("¿Estás seguro de eliminar a este personal?"))try{await B.delete(`/staff/${r}`),c(r)}catch(n){console.error("Error al eliminar personal:",n),alert("Ocurrió un error al intentar eliminar el registro.")}}}}const A={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-4"},O={class:"flex items-center justify-between"},R={class:"flex items-center"},T={class:"bg-card rounded-xl border shadow-sm"},X={class:"space-y-4 md:hidden p-4"},G={key:0,class:"py-12 text-center"},at=D({__name:"Index",props:{cafes:{},staff:{},roles:{},units:{},businneses:{}},setup(c){const e=c,r=v(e.staff);L(()=>e.staff,d=>{r.value=d});const{filteredStaff:n,searchQuery:a,selectedUnitId:l}=Q(r),{deleteStaff:m}=q(d=>{r.value=r.value.filter(s=>s.id!==d)});return(d,s)=>(f(),_(b,null,[i(t(U),{title:"Personal"}),i(N,null,{default:u(()=>[p("div",A,[p("div",O,[s[2]||(s[2]=p("h1",{class:"text-2xl font-semibold tracking-tight"},"Personal",-1)),i(I,{cafes:e.cafes,roles:e.roles,units:e.units,businneses:e.businneses},null,8,["cafes","roles","units","businneses"])]),p("div",R,[i(w,{type:"text",placeholder:"Buscar personal por dni o nombre",modelValue:t(a),"onUpdate:modelValue":s[0]||(s[0]=o=>h(a)?a.value=o:null)},null,8,["modelValue"]),i(t($),{modelValue:t(l),"onUpdate:modelValue":s[1]||(s[1]=o=>h(l)?l.value=o:null)},{default:u(()=>[i(t(V),{class:"h-10 border-zinc-200 bg-white hover:bg-zinc-50 ml-2 w-[200px]"},{default:u(()=>[i(t(k),{placeholder:"Seleccionar unidad"})]),_:1}),i(t(C),{class:"border-zinc-200 bg-white shadow-lg"},{default:u(()=>[i(t(g),{value:"0",class:"hover:bg-zinc-50"},{default:u(()=>s[3]||(s[3]=[x(" Ninguna ")])),_:1}),(f(!0),_(b,null,y(d.units,o=>(f(),S(t(g),{value:String(o.id),class:"hover:bg-zinc-50",key:o.id},{default:u(()=>[x(E(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),p("div",T,[i(j,{"staff-list":t(n),cafes:e.cafes,roles:e.roles,units:e.units,businesses:e.businneses,onDeleteStaff:t(m)},null,8,["staff-list","cafes","roles","units","businesses","onDeleteStaff"]),p("div",X,[(f(!0),_(b,null,y(t(n),o=>(f(),S(P,{key:o.id,staff:o,cafes:e.cafes,roles:e.roles,units:e.units,businesses:e.businneses,onDeleteStaff:t(m)},null,8,["staff","cafes","roles","units","businesses","onDeleteStaff"]))),128)),!t(n)||t(n).length===0?(f(),_("div",G,s[4]||(s[4]=[p("p",{class:"text-muted-foreground"},"No hay personal registrado",-1)]))):F("",!0)])])])]),_:1})],64))}});export{at as default};
