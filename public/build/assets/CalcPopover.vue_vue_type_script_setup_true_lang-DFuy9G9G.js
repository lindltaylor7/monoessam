import{_ as w}from"./index-DfCtkBzz.js";import{_ as u}from"./Input.vue_vue_type_script_setup_true_lang-BzXStTK3.js";import{_ as n}from"./Label.vue_vue_type_script_setup_true_lang-D85YHTuE.js";import{b as k,_ as M,a as B}from"./PopoverTrigger.vue_vue_type_script_setup_true_lang-BO7ctYzQ.js";import{_ as G,a as N,b as D,c as E,d as L}from"./SelectValue.vue_vue_type_script_setup_true_lang-DtD1ELjO.js";import{_ as z,a as I}from"./SelectLabel.vue_vue_type_script_setup_true_lang-Dw9nOYBz.js";import{d as A,r as m,q as K,y as C,g as P,o as q,u as t,w as i,a,e as d,b as o,c as T,l as H,t as f,F as J}from"./app-CkZEfMms.js";const O={class:"grid gap-4"},Q={class:"grid grid-cols-3 gap-4"},R={class:"space-y-2"},X={class:"space-y-2"},Y={class:"space-y-2"},Z={class:"grid grid-cols-2 gap-4"},h={class:"space-y-2"},ee={class:"space-y-2"},le={class:"grid grid-cols-2 gap-4"},ae={class:"space-y-2"},se={class:"space-y-2"},te={class:"space-y-2"},oe={class:"flex items-center justify-between"},ie={class:"flex gap-2"},ue={class:"space-y-2"},de={class:"flex items-center justify-between"},ne={class:"flex gap-2"},re={class:"space-y-2"},me={class:"flex items-center justify-between"},ve={class:"flex gap-2"},pe={class:"space-y-2"},_e={class:"flex items-center justify-between"},fe={class:"flex gap-2"},ge={class:"space-y-2"},ce={class:"flex items-center justify-between"},Ve={class:"flex gap-2"},xe={class:"flex justify-end gap-2"},be=A({__name:"CalcPopover",props:{ingredient:{},totalMateriaPrima:{},totalSolidWaste:{},totalLiquidWaste:{},totalCalories:{},totalCost:{},totalfinalProduct:{}},emits:["calcMassiveProperties"],setup(F,{emit:$}){const g=F,b=$,l=m(g.ingredient),U=m(0),v=m(0),c=m(0),p=m(0),V=m(0),_=m(0),x=m(0),S=r=>{p.value=parseFloat(v.value)*parseFloat(r.target.value),l.value.gross_weight=r.target.value*1e3,l.value.solid_waste=(l.value.gross_weight*parseFloat(l.value.amount)*parseFloat(l.value.originalValues.solid_waste)/parseFloat(l.value.amount)).toFixed(2),l.value.liquid_waste=l.value.gross_weight*parseFloat(l.value.amount)*parseFloat(l.value.originalValues.liquid_waste)/parseFloat(l.value.amount),console.log(l.value.liquid_waste),l.value.calories=l.value.gross_weight*parseFloat(l.value.amount)*parseFloat(l.value.originalValues.calories)/parseFloat(l.value.amount),_.value=l.value.gross_weight-l.value.solid_waste-l.value.liquid_waste,b("calcMassiveProperties",l.value.id,[l.value.gross_weight,l.value.solid_waste,l.value.liquid_waste,l.value.calories,p.value,_.value])},W=r=>{v.value=r.pivot.cost_price,c.value=v.value/1e3};return K(g,r=>{l.value.gross_weight_volume=(l.value.gross_weight/r.totalMateriaPrima*100).toFixed(2),l.value.solid_waste_volume=(l.value.solid_waste/r.totalSolidWaste*100).toFixed(2),l.value.liquid_waste_volume=(l.value.liquid_waste/r.totalLiquidWaste*100).toFixed(2),l.value.calories_volume=(l.value.calories/r.totalCalories*100).toFixed(2),V.value=p.value/g.totalCost,x.value=_.value/g.totalfinalProduct}),(r,e)=>{const j=C("SettingsIcon"),y=C("Separator");return q(),P(t(k),null,{default:i(()=>[a(t(M),null,{default:i(()=>[a(w,{variant:"outline",class:"gap-2"},{default:i(()=>[a(j,{class:"h-4 w-4"}),e[18]||(e[18]=d(" Valores Nutricionales "))]),_:1})]),_:1}),a(t(B),{class:"w-96",side:"right"},{default:i(()=>[o("div",O,[e[36]||(e[36]=o("div",{class:"space-y-4"},[o("h4",{class:"leading-none font-medium"},"Ajustes de ingrediente"),o("p",{class:"text-muted-foreground text-sm"},"Modifica los valores nutricionales y de costos")],-1)),a(t(G),{modelValue:U.value,"onUpdate:modelValue":e[0]||(e[0]=s=>U.value=s)},{default:i(()=>[a(t(N),{class:"w-[180px]"},{default:i(()=>[a(t(D),{placeholder:"Seleccione Proveedor"})]),_:1}),a(t(E),null,{default:i(()=>[a(t(z),null,{default:i(()=>[a(t(I),null,{default:i(()=>e[19]||(e[19]=[d("Proveedores")])),_:1}),(q(!0),T(J,null,H(l.value.providers,s=>(q(),P(t(L),{onClick:ye=>W(s),key:s.id,value:s.id},{default:i(()=>[d(f(s.name)+" - "+f(s.cities[0].name),1)]),_:2},1032,["onClick","value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(y),o("div",Q,[o("div",R,[a(t(n),{for:"quantity"},{default:i(()=>e[20]||(e[20]=[d("Precio Unitario")])),_:1}),a(t(u),{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),type:"text",class:"h-8",readonly:""},null,8,["modelValue"])]),o("div",X,[a(t(n),{for:"unit"},{default:i(()=>e[21]||(e[21]=[d("Pr. x (UE)% Gr")])),_:1}),a(t(u),{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),type:"text",class:"h-8",readonly:""},null,8,["modelValue"])]),o("div",Y,[a(t(n),{for:"unit"},{default:i(()=>e[22]||(e[22]=[d("Var x (UE)% Gr")])),_:1}),a(t(u),{type:"text",class:"h-8",readonly:""})])]),o("div",Z,[o("div",h,[a(t(n),{for:"quantity"},{default:i(()=>e[23]||(e[23]=[d("Cantidad")])),_:1}),a(t(u),{modelValue:l.value.quantity,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.quantity=s),onKeyup:e[4]||(e[4]=s=>S(s)),type:"text",id:"quantity",class:"h-8"},null,8,["modelValue"])]),o("div",ee,[a(t(n),{for:"unit"},{default:i(()=>e[24]||(e[24]=[d("Unidad")])),_:1}),a(t(u),{modelValue:l.value.measurement_unit,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.measurement_unit=s),type:"text",id:"unit",class:"h-8",readonly:""},null,8,["modelValue"])])]),o("div",le,[o("div",ae,[a(t(n),{for:"baseCost"},{default:i(()=>e[25]||(e[25]=[d("Costo Base")])),_:1}),a(t(u),{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=s=>p.value=s),type:"text",id:"baseCost",class:"h-8"},null,8,["modelValue"])]),o("div",se,[a(t(n),{for:"costPercentage"},{default:i(()=>e[26]||(e[26]=[d("% Costos")])),_:1}),a(t(u),{modelValue:V.value,"onUpdate:modelValue":e[7]||(e[7]=s=>V.value=s),type:"text",id:"costPercentage",class:"h-8"},null,8,["modelValue"])])]),a(y),o("div",te,[o("div",oe,[a(t(n),{for:"solidWaste"},{default:i(()=>e[27]||(e[27]=[d(" Materia Prima ")])),_:1}),e[28]||(e[28]=o("span",{class:"text-muted-foreground text-xs"},"% Volumen",-1))]),o("div",ie,[a(t(u),{modelValue:l.value.gross_weight,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.gross_weight=s),type:"text",id:"solidWaste",class:"h-8 flex-1"},null,8,["modelValue"]),a(t(u),{modelValue:l.value.gross_weight_volume,"onUpdate:modelValue":e[9]||(e[9]=s=>l.value.gross_weight_volume=s),type:"text",class:"h-8 w-16",placeholder:"%"},null,8,["modelValue"])])]),o("div",ue,[o("div",de,[a(t(n),{for:"solidWaste"},{default:i(()=>[d(" Desecho sólido (original: "+f(l.value.originalValues.solid_waste)+") ",1)]),_:1}),e[29]||(e[29]=o("span",{class:"text-muted-foreground text-xs"},"% Volumen",-1))]),o("div",ne,[a(t(u),{modelValue:l.value.solid_waste,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.solid_waste=s),type:"text",id:"solidWaste",class:"h-8 flex-1"},null,8,["modelValue"]),a(t(u),{modelValue:l.value.solid_waste_volume,"onUpdate:modelValue":e[11]||(e[11]=s=>l.value.solid_waste_volume=s),type:"text",class:"h-8 w-16",placeholder:"%"},null,8,["modelValue"])])]),o("div",re,[o("div",me,[a(t(n),{for:"liquidWaste"},{default:i(()=>[d(" Desecho líquido (original: "+f(l.value.originalValues.liquid_waste)+") ",1)]),_:1}),e[30]||(e[30]=o("span",{class:"text-muted-foreground text-xs"},"% Volumen",-1))]),o("div",ve,[a(t(u),{modelValue:l.value.liquid_waste,"onUpdate:modelValue":e[12]||(e[12]=s=>l.value.liquid_waste=s),type:"text",id:"liquidWaste",class:"h-8 flex-1"},null,8,["modelValue"]),a(t(u),{modelValue:l.value.liquid_waste_volume,"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.liquid_waste_volume=s),type:"text",class:"h-8 w-16",placeholder:"%"},null,8,["modelValue"])])]),o("div",pe,[o("div",_e,[a(t(n),{for:"calories"},{default:i(()=>e[31]||(e[31]=[d("Producto Final")])),_:1}),e[32]||(e[32]=o("span",{class:"text-muted-foreground text-xs"},"% Volumen",-1))]),o("div",fe,[a(t(u),{modelValue:_.value,"onUpdate:modelValue":e[14]||(e[14]=s=>_.value=s),type:"text",id:"final_product",class:"h-8 flex-1"},null,8,["modelValue"]),a(t(u),{modelValue:x.value,"onUpdate:modelValue":e[15]||(e[15]=s=>x.value=s),type:"text",class:"h-8 w-16",placeholder:"%"},null,8,["modelValue"])])]),o("div",ge,[o("div",ce,[a(t(n),{for:"calories"},{default:i(()=>[d(" Calorías (original: "+f(l.value.originalValues.calories)+") ",1)]),_:1}),e[33]||(e[33]=o("span",{class:"text-muted-foreground text-xs"},"% Calorías",-1))]),o("div",Ve,[a(t(u),{modelValue:l.value.calories,"onUpdate:modelValue":e[16]||(e[16]=s=>l.value.calories=s),type:"text",id:"calories",class:"h-8 flex-1"},null,8,["modelValue"]),a(t(u),{modelValue:l.value.calories_volume,"onUpdate:modelValue":e[17]||(e[17]=s=>l.value.calories_volume=s),type:"text",class:"h-8 w-16",placeholder:"%"},null,8,["modelValue"])])]),a(y),o("div",xe,[a(w,{variant:"outline",size:"sm"},{default:i(()=>e[34]||(e[34]=[d("Cancelar")])),_:1}),a(w,{size:"sm"},{default:i(()=>e[35]||(e[35]=[d("Guardar")])),_:1})])])]),_:1})]),_:1})}}});export{be as _};
