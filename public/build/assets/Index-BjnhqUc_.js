import{d as R,j as g,C as J,s as K,g as c,o as m,w as a,a as e,b as l,u as t,m as Q,e as r,t as n,c as u,F as h,p as k,i as T,P as X,n as Y,W as Z}from"./app-DQ0sg1ny.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-CATc5WwR.js";import{_ as v}from"./index-CzpGNwk8.js";import{e as te,_ as se,a as S,b as w,c as ae,d as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-Drc_3Qgo.js";import{_ as E}from"./index-BVausCie.js";import{_ as le}from"./Input.vue_vue_type_script_setup_true_lang-BQHpixUx.js";import{_ as L,a as A,b as B,c as U,d as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-CDvApbBA.js";import{_ as z}from"./Card.vue_vue_type_script_setup_true_lang-6unD0FeD.js";import{_ as M}from"./CardContent.vue_vue_type_script_setup_true_lang-DoLp9Lwv.js";import{_ as N,a as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-C38eqjUL.js";import{_ as d}from"./Icon.vue_vue_type_script_setup_true_lang-DvXqqvjH.js";import oe from"./DinnerModal-t6574qDv.js";import{_ as re}from"./ExcelDialog.vue_vue_type_script_setup_true_lang-C6wIXzc7.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-bRKmu4jq.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-BORlaWwT.js";import"./Presence-CShDhlNS.js";import"./Primitive-kGOPBYwy.js";import"./useForwardExpose-ChMFdOMr.js";import"./PopperContent-COgd21zS.js";import"./Teleport-CZroiPvM.js";import"./VisuallyHidden-Bt322vYE.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-DHbd6Haj.js";import"./utils-86tuz8kW.js";import"./useTypeahead-DZ731KFK.js";import"./RovingFocusGroup-DPs4ygyJ.js";import"./usePrimitiveElement-CqOKtb7x.js";import"./Collection-1-RrEqC9.js";import"./utensils-BOTVgzzb.js";import"./createLucideIcon-DPCh1A22.js";import"./DialogTitle-CyWL4X31.js";import"./x-D1ofBEVi.js";import"./DialogDescription-DAM8JllB.js";import"./hand-helping-Bj9jwZG7.js";import"./building-2-MfI_jPDs.js";import"./user-Cq7Hfd0F.js";import"./chevron-right-CEGm_TwL.js";import"./chevron-down-CaLwd8lg.js";import"./chevron-up-tldUgE0u.js";import"./check-DMniLjjs.js";import"./useFormControl-C1PNbFuf.js";import"./between-horizontal-start-Bj2gvZU0.js";import"./user-round-Dv7jE6tv.js";import"./person-standing-DkV-2X_e.js";import"./paperclip-CLysfM2j.js";import"./calendar-BMLu48Vc.js";import"./chevron-left-BwV5O0rk.js";import"./circle-alert-fkYlgLrj.js";import"./triangle-alert-p4PqXZ8W.js";import"./search-_xMUUYCm.js";import"./circle-plus-Sy9AgiGx.js";import"./dollar-sign-Dpv5m-BW.js";import"./eye-Bqeu5E5T.js";import"./file-chart-column-JNyr8Y31.js";import"./upload-DChwtLwA.js";import"./info-BxVK_QQP.js";import"./lamp-desk-BuU65hLe.js";import"./list-check-BXnhOgOl.js";import"./sheet-DpK6f7TI.js";import"./loader-circle-STsD5zM4.js";import"./lock-DV4LFElZ.js";import"./mail-DW5254St.js";import"./sun-DXJdMiOU.js";import"./pencil-Ca5NdUhh.js";import"./plus-D7o3VeGu.js";import"./shield-CZSilvYv.js";import"./shopping-cart-BGN7JCwj.js";import"./soup-DBpJzvez.js";import"./trash-2-BbXwNQ5g.js";import"./trash-CWVB-1eS.js";import"./user-plus-BW3GV--J.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-C1S457e7.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang--evU5lfn.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-SuVbo-Nw.js";import"./Label.vue_vue_type_script_setup_true_lang-F3LFEp_u.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-BU__5AnL.js";const ne={class:"p-4 md:p-8 space-y-6 bg-slate-50/50 min-h-screen"},de={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6"},me={class:"flex items-center gap-4"},pe={class:"h-14 w-14 rounded-2xl bg-blue-600 flex items-center justify-center text-white shadow-lg shadow-blue-200 rotate-3 transition-transform hover:rotate-0"},ue={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full lg:w-auto"},ce={class:"min-w-[200px]"},fe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},xe={class:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary transition-colors group-hover:bg-primary group-hover:text-white"},_e={class:"text-3xl font-bold"},be={class:"h-10 w-10 rounded-xl bg-orange-100 flex items-center justify-center text-orange-600 transition-colors group-hover:bg-orange-500 group-hover:text-white"},ge={class:"text-3xl font-bold"},he={class:"h-10 w-10 rounded-xl bg-blue-100 flex items-center justify-center text-blue-600 transition-colors group-hover:bg-blue-500 group-hover:text-white"},ve={class:"text-3xl font-bold"},we={class:"bg-white p-4 rounded-2xl shadow-sm border border-slate-200/60 transition-all hover:shadow-md"},ye={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ke={class:"relative"},$e={class:"flex items-center gap-2"},Ce={class:"flex items-center gap-2"},je={class:"bg-white rounded-2xl shadow-sm border border-slate-200/60 overflow-hidden"},Ve={class:"overflow-x-auto"},Te={class:"flex items-center gap-4"},Se={class:"h-11 w-11 rounded-2xl bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20 flex items-center justify-center text-primary font-bold text-base shadow-sm group-hover:scale-110 transition-transform"},ze={class:"flex flex-col"},Me={class:"text-sm font-bold text-slate-900 leading-none mb-1"},Ne={class:"text-[11px] text-slate-400 font-medium uppercase tracking-tight"},De={class:"flex flex-col gap-1"},Ie={class:"text-[13px] font-semibold text-slate-700"},Ee={key:0,class:"text-[11px] text-slate-400 flex items-center gap-1"},Le={class:"flex flex-col gap-2"},Ae={class:"flex justify-end gap-2"},Be={class:"flex flex-col items-center justify-center gap-4 max-w-sm mx-auto"},Ue={class:"h-24 w-24 rounded-full bg-slate-50 flex items-center justify-center text-slate-200"},Fe={key:0,class:"flex items-center justify-between px-6 py-4 border-t border-slate-100 bg-slate-50/30"},He={class:"text-xs font-semibold text-slate-500"},Pe={class:"text-slate-900 font-bold"},qe={class:"text-slate-900 font-bold"},We={class:"flex items-center gap-1.5"},Ge=["innerHTML"],Oe=R({__name:"Index",props:{dinners:{},cafes:{},subdealerships:{},filters:{}},setup(F){const C=F,H=[{title:"Ventas",href:"/sales"},{title:"Comensales",href:"/sales"}],y=g(!1),j=g(null),x=g(C.filters.search||""),_=g(C.filters.cafe_id||"all"),b=g(C.filters.subdealership_id||"all"),P=J({}),q=()=>{j.value=null,y.value=!0},W=i=>{j.value=i,y.value=!0},G=i=>{confirm("¿Estás seguro de que deseas eliminar este comensal?")&&P.delete(route("dinners.destroy",i),{preserveScroll:!0})};let V=null;const O=()=>{V&&clearTimeout(V),V=setTimeout(()=>{Z.get(route("sales.index"),{search:x.value,cafe_id:_.value,subdealership_id:b.value},{preserveState:!0,preserveScroll:!0,replace:!0})},400)};K([x,_,b],()=>{O()});const I=()=>{x.value="",_.value="all",b.value="all"};return(i,s)=>(m(),c(ee,{breadcrumbs:H},{default:a(()=>[e(t(Q),{title:"Comensales - Ventas"}),l("div",ne,[l("div",de,[l("div",me,[l("div",pe,[e(d,{name:"users",size:"28"})]),s[4]||(s[4]=l("div",null,[l("h1",{class:"text-2xl md:text-3xl font-extrabold tracking-tight text-slate-900 uppercase"},"Gestión de Comensales"),l("p",{class:"text-slate-500 font-medium text-sm flex items-center gap-2"},[l("span",{class:"flex h-2 w-2 rounded-full bg-blue-500 animate-pulse"}),r(" Administración del Padrón y Asignaciones ")])],-1))]),l("div",ue,[l("div",ce,[e(re)]),e(t(v),{onClick:q,class:"h-11 bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg shadow-primary/20 transition-all active:scale-95 px-8 rounded-xl font-bold text-xs uppercase tracking-wider flex items-center justify-center gap-2"},{default:a(()=>[e(d,{name:"plus",size:"18"}),s[5]||(s[5]=r(" Nuevo Comensal "))]),_:1})])]),l("div",fe,[e(t(z),{class:"border-none shadow-sm bg-white overflow-hidden group"},{default:a(()=>[e(t(N),{class:"pb-2 flex flex-row items-center justify-between space-y-0"},{default:a(()=>[e(t(D),{class:"text-sm font-semibold text-slate-500 uppercase tracking-wider"},{default:a(()=>s[6]||(s[6]=[r("Total Comensales")])),_:1}),l("div",xe,[e(d,{name:"users",class:"h-5 w-5"})])]),_:1}),e(t(M),null,{default:a(()=>[l("div",_e,n(i.dinners.total),1),s[7]||(s[7]=l("p",{class:"text-xs text-slate-400 mt-1"},"Registrados en el sistema",-1))]),_:1})]),_:1}),e(t(z),{class:"border-none shadow-sm bg-white overflow-hidden group"},{default:a(()=>[e(t(N),{class:"pb-2 flex flex-row items-center justify-between space-y-0"},{default:a(()=>[e(t(D),{class:"text-sm font-semibold text-slate-500 uppercase tracking-wider"},{default:a(()=>s[8]||(s[8]=[r("Cafeterías")])),_:1}),l("div",be,[e(d,{name:"coffee",class:"h-5 w-5"})])]),_:1}),e(t(M),null,{default:a(()=>[l("div",ge,n(i.cafes.length),1),s[9]||(s[9]=l("p",{class:"text-xs text-slate-400 mt-1"},"Puntos de servicio activos",-1))]),_:1})]),_:1}),e(t(z),{class:"border-none shadow-sm bg-white overflow-hidden group"},{default:a(()=>[e(t(N),{class:"pb-2 flex flex-row items-center justify-between space-y-0"},{default:a(()=>[e(t(D),{class:"text-sm font-semibold text-slate-500 uppercase tracking-wider"},{default:a(()=>s[10]||(s[10]=[r("Subconcesionarias")])),_:1}),l("div",he,[e(d,{name:"building",class:"h-5 w-5"})])]),_:1}),e(t(M),null,{default:a(()=>[l("div",ve,n(i.subdealerships.length),1),s[11]||(s[11]=l("p",{class:"text-xs text-slate-400 mt-1"},"Empresas vinculadas",-1))]),_:1})]),_:1})]),l("div",we,[l("div",ye,[l("div",ke,[e(d,{name:"search",class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e(t(le),{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=o=>x.value=o),placeholder:"Buscar por nombre, DNI...",class:"pl-10 h-11 border-slate-200 focus:ring-primary/20 focus:border-primary transition-all rounded-xl"},null,8,["modelValue"])]),e(t(L),{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=o=>_.value=o)},{default:a(()=>[e(t(A),{class:"h-11 border-slate-200 rounded-xl"},{default:a(()=>[l("div",$e,[e(d,{name:"coffee",class:"h-4 w-4 text-slate-400"}),e(t(B),{placeholder:"Todas las cafeterías"})])]),_:1}),e(t(U),null,{default:a(()=>[e(t($),{value:"all"},{default:a(()=>s[12]||(s[12]=[r("Todas las cafeterías")])),_:1}),(m(!0),u(h,null,k(i.cafes,o=>(m(),c(t($),{key:o.id,value:o.id.toString()},{default:a(()=>[r(n(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(t(L),{modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=o=>b.value=o)},{default:a(()=>[e(t(A),{class:"h-11 border-slate-200 rounded-xl"},{default:a(()=>[l("div",Ce,[e(d,{name:"building-2",class:"h-4 w-4 text-slate-400"}),e(t(B),{placeholder:"Todas las subconcesionarias"})])]),_:1}),e(t(U),null,{default:a(()=>[e(t($),{value:"all"},{default:a(()=>s[13]||(s[13]=[r("Todas las subconcesionarias")])),_:1}),(m(!0),u(h,null,k(i.subdealerships,o=>(m(),c(t($),{key:o.id,value:o.id.toString()},{default:a(()=>[r(n(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(t(v),{variant:"outline",onClick:I,class:"h-11 rounded-xl text-slate-500 hover:text-slate-900 border-slate-200"},{default:a(()=>[e(d,{name:"x",class:"mr-2 h-4 w-4"}),s[14]||(s[14]=r(" Limpiar Filtros "))]),_:1})])]),l("div",je,[l("div",Ve,[e(t(te),null,{default:a(()=>[e(t(se),null,{default:a(()=>[e(t(S),{class:"bg-slate-50/80 hover:bg-slate-50/80 border-b-slate-200"},{default:a(()=>[e(t(w),{class:"w-[320px] py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>s[15]||(s[15]=[r("Comensal")])),_:1}),e(t(w),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>s[16]||(s[16]=[r("Identificación")])),_:1}),e(t(w),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>s[17]||(s[17]=[r("Contacto")])),_:1}),e(t(w),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>s[18]||(s[18]=[r("Asignación")])),_:1}),e(t(w),{class:"text-right py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>s[19]||(s[19]=[r("Acciones")])),_:1})]),_:1})]),_:1}),e(t(ae),null,{default:a(()=>[(m(!0),u(h,null,k(i.dinners.data,o=>(m(),c(t(S),{key:o.id,class:"hover:bg-slate-50/50 transition-all border-b-slate-100 last:border-0 group"},{default:a(()=>[e(t(f),{class:"py-4"},{default:a(()=>[l("div",Te,[l("div",Se,n(o.name.charAt(0).toUpperCase()),1),l("div",ze,[l("span",Me,n(o.name),1),l("span",Ne,"ID Sistema: #"+n(o.id),1)])])]),_:2},1024),e(t(f),{class:"py-4"},{default:a(()=>[l("div",De,[l("span",Ie,"DNI "+n(o.dni),1),o.phone?(m(),u("span",Ee,[e(d,{name:"phone",size:"10"}),r(" "+n(o.phone),1)])):T("",!0)])]),_:2},1024),e(t(f),{class:"py-4"},{default:a(()=>[l("div",Le,[e(t(E),{variant:"secondary",class:"font-bold text-[10px] w-fit rounded-lg px-2 py-0.5 bg-slate-100 text-slate-600 border-none"},{default:a(()=>{var p;return[e(d,{name:"building-2",size:"10",class:"mr-1"}),r(" "+n((p=o.subdealership)==null?void 0:p.name),1)]}),_:2},1024)])]),_:2},1024),e(t(f),{class:"py-4"},{default:a(()=>[e(t(E),{variant:"outline",class:"font-bold text-[10px] w-fit rounded-lg px-2 py-0.5 border-primary/20 bg-primary/5 text-primary"},{default:a(()=>{var p;return[e(d,{name:"coffee",size:"10",class:"mr-1"}),r(" "+n((p=o.cafe)==null?void 0:p.name),1)]}),_:2},1024)]),_:2},1024),e(t(f),{class:"text-right py-4 px-6"},{default:a(()=>[l("div",Ae,[e(t(v),{variant:"ghost",size:"icon",onClick:p=>W(o),title:"Editar",class:"h-9 w-9 rounded-xl hover:bg-primary/10 hover:text-primary transition-colors"},{default:a(()=>[e(d,{name:"pencil",class:"h-4.5 w-4.5"})]),_:2},1032,["onClick"]),e(t(v),{variant:"ghost",size:"icon",class:"h-9 w-9 rounded-xl text-slate-400 hover:text-destructive hover:bg-destructive/10 transition-colors",onClick:p=>G(o.id),title:"Eliminar"},{default:a(()=>[e(d,{name:"trash",class:"h-4.5 w-4.5"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),i.dinners.data.length===0?(m(),c(t(S),{key:0},{default:a(()=>[e(t(f),{colspan:"5",class:"h-[400px] text-center"},{default:a(()=>[l("div",Be,[l("div",Ue,[e(d,{name:"users",size:"48",strokeWidth:"1.5"})]),s[21]||(s[21]=l("div",{class:"space-y-1"},[l("p",{class:"text-lg font-bold text-slate-900"},"No se encontraron resultados"),l("p",{class:"text-sm text-slate-500"},"No hay comensales que coincidan con los criterios de búsqueda actuales.")],-1)),e(t(v),{variant:"outline",onClick:I,class:"mt-2"},{default:a(()=>s[20]||(s[20]=[r("Ver todos los comensales")])),_:1})])]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1})]),i.dinners.total>0?(m(),u("div",Fe,[l("div",He,[s[22]||(s[22]=r(" Mostrando ")),l("span",Pe,n(i.dinners.from)+" - "+n(i.dinners.to),1),s[23]||(s[23]=r(" de ")),l("span",qe,n(i.dinners.total),1),s[24]||(s[24]=r(" comensales "))]),l("div",We,[(m(!0),u(h,null,k(i.dinners.links,(o,p)=>(m(),u(h,{key:p},[o.url===null?(m(),u("div",{key:0,class:"h-9 min-w-[36px] px-3 flex items-center justify-center text-xs font-bold text-slate-300 rounded-xl pointer-events-none",innerHTML:o.label},null,8,Ge)):(m(),c(t(X),{key:1,href:o.url,class:Y(["h-9 min-w-[36px] px-3 flex items-center justify-center text-xs font-bold rounded-xl transition-all border shadow-sm",{"bg-primary text-primary-foreground border-primary shadow-primary/20 scale-105":o.active,"bg-white hover:bg-slate-50 border-slate-200 text-slate-600":!o.active}]),innerHTML:o.label,"preserve-scroll":""},null,8,["href","class","innerHTML"]))],64))),128))])])):T("",!0)])]),e(oe,{open:y.value,"onUpdate:open":s[3]||(s[3]=o=>y.value=o),dinner:j.value,cafes:i.cafes,subdealerships:i.subdealerships},null,8,["open","dinner","cafes","subdealerships"])]),_:1}))}}),_s=ie(Oe,[["__scopeId","data-v-d086c2dc"]]);export{_s as default};
