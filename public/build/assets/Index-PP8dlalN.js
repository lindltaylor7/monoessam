import{d as K,j as h,s as R,v as E,r as F,c as m,o as r,a,u as s,m as W,w as i,b as t,P as T,e as u,x as A,F as P,p as L,g as D,t as d,i as C}from"./app-BSYY2x3I.js";import{a as X,b as Y,c as Z,_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-7Rp8E7rc.js";import{_}from"./index-CzRwObbK.js";import{_ as te}from"./Input.vue_vue_type_script_setup_true_lang-QrOvc_ge.js";import{_ as se,a as ae,b as oe,c as le,d as O}from"./SelectValue.vue_vue_type_script_setup_true_lang-B4ra6waW.js";import{u as ie}from"./useStaffFilter-NcdM_cJk.js";import{_ as ne}from"./StaffClothesDialog.vue_vue_type_script_setup_true_lang-Mki_HAKt.js";import{E as re}from"./eye-CaQ4A2Na.js";import{C as de}from"./chevron-left-BYYGiRzC.js";import{C as me}from"./chevron-right-CCgcOFeU.js";import"./utils-bRKmu4jq.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-nQoiCY0p.js";import"./Presence-CYnJC9Ch.js";import"./Primitive-DqXB6Jgu.js";import"./useForwardExpose-C86SAsBm.js";import"./PopperContent-BpSOQfhT.js";import"./Teleport-CvhE5Qlz.js";import"./VisuallyHidden-DqryfdbW.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-bC97h4Qu.js";import"./utils-CY7YhvcD.js";import"./useTypeahead-BZu2fJWY.js";import"./RovingFocusGroup-BXWLKtHZ.js";import"./usePrimitiveElement-BmeYF2q3.js";import"./Collection-DuLfU3Sg.js";import"./utensils-DPL8eAw-.js";import"./createLucideIcon-DQy2-422.js";import"./DialogTitle-BVvHrq5Y.js";import"./x-DI0sEkZf.js";import"./DialogDescription-ChWbEjzs.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./hand-helping-DJYhg-QO.js";import"./building-2-rmyYnFo-.js";import"./user-C_NZDzSf.js";import"./chevron-down-D7KNJsic.js";import"./chevron-up-GgawKPfE.js";import"./check-BEW7Qrj_.js";import"./useFormControl-B3mg4S4y.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-Bxq2eJij.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-Q3H8nHY_.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-wMFcP5fs.js";const ue={class:"p-6"},ce={class:"flex justify-between items-center mb-6"},fe={class:"flex flex-wrap gap-2"},pe={class:"flex items-center mb-6"},_e={class:"bg-white rounded-xl border shadow-sm overflow-hidden"},ge={class:"overflow-x-auto"},ve={class:"w-full text-sm text-left"},he={class:"divide-y divide-gray-100"},be={class:"p-4"},xe={class:"flex items-center gap-3"},ye={class:"font-medium text-gray-900"},we={class:"p-4"},ke={key:0,class:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10"},Pe={key:1,class:"text-gray-400 italic"},Ce={class:"p-4"},$e={key:0,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-700/10"},Se={key:1,class:"text-gray-400 italic"},Ve={class:"p-4 text-right"},ze={key:0},Ne={key:0,class:"flex items-center justify-between border-t p-4"},Ue={class:"text-sm text-muted-foreground"},je={class:"flex items-center gap-2"},Be={class:"text-sm font-medium"},g=10,yt=K({__name:"Index",props:{staff:{},roleClothes:{},units:{},colors:{}},setup(Q){const $=Q,S=h($.staff),f=h(null);R(()=>$.staff,l=>{if(S.value=l,f.value){const e=l.find(w=>{var v;return w.id===((v=f.value)==null?void 0:v.id)});e&&(f.value=e)}});const{filteredStaff:p,searchQuery:b,selectedUnitId:x}=ie(S),n=h(1),c=E(()=>Math.ceil(p.value.length/g)),V=E(()=>{n.value>c.value&&c.value>0&&(n.value=1);const l=(n.value-1)*g,e=l+g;return p.value.slice(l,e)}),q=()=>{n.value<c.value&&n.value++},G=()=>{n.value>1&&n.value--};R(p,()=>{n.value=1});const y=h(!1),H=l=>{f.value=l,y.value=!0},J=l=>l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(l,e)=>{const w=F("Package"),v=F("Plus");return r(),m(P,null,[a(s(W),{title:"Registro de Tallas"}),a(ee,{breadcrumbs:[{title:"Personal",href:l.route("staff.index")},{title:"Tallas",href:l.route("clothes.index")}]},{default:i(()=>[t("div",ue,[t("div",ce,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-3xl font-bold tracking-tight"},"Asignación de Prendas por Rol y Café"),t("p",{class:"text-muted-foreground text-xs sm:text-sm mt-1"}," Selecciona las prendas asignadas a cada rol/cargo en el café seleccionado ")],-1)),t("div",fe,[a(s(T),{href:l.route("inventory.index")},{default:i(()=>[a(s(_),{variant:"outline",class:"gap-2"},{default:i(()=>[a(w,{class:"h-4 w-4"}),e[3]||(e[3]=u(" Inventario "))]),_:1})]),_:1},8,["href"]),a(s(T),{href:l.route("clothes.manage")},{default:i(()=>[a(s(_),{class:"gap-2"},{default:i(()=>[a(v,{class:"h-4 w-4"}),e[4]||(e[4]=u(" Configurar Prendas "))]),_:1})]),_:1},8,["href"])])]),t("div",pe,[a(s(te),{type:"text",placeholder:"Buscar personal por dni o nombre",modelValue:s(b),"onUpdate:modelValue":e[0]||(e[0]=o=>A(b)?b.value=o:null)},null,8,["modelValue"]),a(s(se),{modelValue:s(x),"onUpdate:modelValue":e[1]||(e[1]=o=>A(x)?x.value=o:null)},{default:i(()=>[a(s(ae),{class:"h-10 border-zinc-200 bg-white hover:bg-zinc-50 ml-2 w-[200px]"},{default:i(()=>[a(s(oe),{placeholder:"Seleccionar unidad"})]),_:1}),a(s(le),{class:"border-zinc-200 bg-white shadow-lg"},{default:i(()=>[a(s(O),{value:"0",class:"hover:bg-zinc-50"},{default:i(()=>e[6]||(e[6]=[u(" Ninguna ")])),_:1}),(r(!0),m(P,null,L(l.units,o=>(r(),D(s(O),{value:String(o.id),class:"hover:bg-zinc-50",key:o.id},{default:i(()=>[u(d(o.mine.name)+" - "+d(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),t("div",_e,[t("div",ge,[t("table",ve,[e[8]||(e[8]=t("thead",{class:"bg-gray-50 text-gray-500 border-b"},[t("tr",null,[t("th",{class:"p-4 font-medium"},"Personal"),t("th",{class:"p-4 font-medium"},"Cargo"),t("th",{class:"p-4 font-medium"},"Unidad"),t("th",{class:"p-4 font-medium w-16"},"Prendas")])],-1)),t("tbody",he,[(r(!0),m(P,null,L(V.value,o=>{var z,N,U,j,B,M;return r(),m("tr",{key:o.id,class:"hover:bg-gray-50/50"},[t("td",be,[t("div",xe,[a(s(X),{class:"h-9 w-9 border"},{default:i(()=>{var k,I;return[(k=o.photo)!=null&&k.url?(r(),D(s(Y),{key:0,src:`/storage/${(I=o.photo)==null?void 0:I.url}`,class:"object-cover"},null,8,["src"])):C("",!0),a(s(Z),null,{default:i(()=>[u(d(J(o.name)),1)]),_:2},1024)]}),_:2},1024),t("div",ye,d(o.name),1)])]),t("td",we,[o.role?(r(),m("span",ke,d(o.role.name),1)):(r(),m("span",Pe,"Sin cargo"))]),t("td",Ce,[(z=o.staffable)!=null&&z.unit?(r(),m("span",$e,d((U=(N=o.staffable)==null?void 0:N.unit)==null?void 0:U.name)+" - "+d((M=(B=(j=o.staffable)==null?void 0:j.unit)==null?void 0:B.mine)==null?void 0:M.name),1)):(r(),m("span",Se,"Sin unidad"))]),t("td",Ve,[a(s(_),{variant:"ghost",size:"icon",onClick:k=>H(o)},{default:i(()=>[a(s(re),{class:"h-4 w-4 text-gray-500"})]),_:2},1032,["onClick"])])])}),128)),V.value.length===0?(r(),m("tr",ze,e[7]||(e[7]=[t("td",{colspan:"5",class:"p-8 text-center text-gray-500"}," No se encontró personal. ",-1)]))):C("",!0)])])]),c.value>1?(r(),m("div",Ne,[t("div",Ue," Mostrando "+d((n.value-1)*g+1)+" - "+d(Math.min(n.value*g,s(p).length))+" de "+d(s(p).length)+" registros ",1),t("div",je,[a(s(_),{variant:"outline",size:"sm",disabled:n.value===1,onClick:G},{default:i(()=>[a(s(de),{class:"h-4 w-4"}),e[9]||(e[9]=u(" Anterior "))]),_:1},8,["disabled"]),t("div",Be," Página "+d(n.value)+" de "+d(c.value),1),a(s(_),{variant:"outline",size:"sm",disabled:n.value===c.value,onClick:q},{default:i(()=>[e[10]||(e[10]=u(" Siguiente ")),a(s(me),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])):C("",!0)])]),a(ne,{open:y.value,staff:f.value,colors:l.colors,"onUpdate:open":e[2]||(e[2]=o=>y.value=o)},null,8,["open","staff","colors"])]),_:1},8,["breadcrumbs"])],64)}}});export{yt as default};
