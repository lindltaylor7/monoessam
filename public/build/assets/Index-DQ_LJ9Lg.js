import{d as U,r as _,C as W,q as G,g as b,o as m,w as a,a as e,b as o,u as s,m as O,e as l,t as n,c,F as w,l as j,i as V,P as R,n as J,W as K}from"./app-C6NgE5un.js";import{_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bfz7RLeB.js";import{_ as g}from"./index-BmJWyXmo.js";import{e as X,_ as Y,a as T,b as h,c as Z,d as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-DttXGtY5.js";import{_ as I}from"./index-B7Y7Swmj.js";import{_ as ee}from"./Input.vue_vue_type_script_setup_true_lang-Dj7OXP1P.js";import{_ as te,a as se,b as oe,c as ae,d as E}from"./SelectValue.vue_vue_type_script_setup_true_lang-CVTY1Om0.js";import{_ as S}from"./Card.vue_vue_type_script_setup_true_lang-BUCipc_G.js";import{_ as z}from"./CardContent.vue_vue_type_script_setup_true_lang-Cp8uTEV6.js";import{_ as M,a as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-BFaGa1Ps.js";import{_ as d}from"./Icon.vue_vue_type_script_setup_true_lang-DdcXvFqV.js";import re from"./DinnerModal-lqi1Lasd.js";import{_ as le}from"./ExcelDialog.vue_vue_type_script_setup_true_lang-DmVEvbjy.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-bRKmu4jq.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CCrX9P3n.js";import"./Presence-C16l6f-G.js";import"./Primitive-Dz6BdNAh.js";import"./useForwardExpose-BDT-UiQT.js";import"./PopperContent-B_JZLYSE.js";import"./Teleport-BBbXjpWz.js";import"./VisuallyHidden-C2WY4yzo.js";import"./index-dkW4UkYo.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-Dvu_yPnN.js";import"./utils-CCA9cgE0.js";import"./useTypeahead-Dlbq4Drc.js";import"./RovingFocusGroup-DUjpD9wM.js";import"./usePrimitiveElement-C_w-ra6U.js";import"./Collection-B31zlixO.js";import"./utensils-SXUV3_1e.js";import"./createLucideIcon-pIRXmFBY.js";import"./DialogTitle-pKaoQwGU.js";import"./x-FW5yYcVL.js";import"./DialogDescription-CNBlE0bV.js";import"./hand-helping-DpA0nQ7T.js";import"./building-2-BaGfwV9A.js";import"./user-D381w6S0.js";import"./chevron-right-CXPRo_oF.js";import"./chevron-down-CUDz6jDX.js";import"./chevron-up-Cm2KSEGw.js";import"./check-DTc0zkRx.js";import"./useFormControl-BuEAf5cm.js";import"./settings-2-Z0_N8aW6.js";import"./briefcase-DbXjoM5U.js";import"./lock-BCAGohpt.js";import"./shopping-bag-CqKw3JF-.js";import"./between-horizontal-start-YvfhDmVy.js";import"./user-round-YdiyTD60.js";import"./person-standing-C_uxTpWq.js";import"./paperclip-Bt3-EBzH.js";import"./calendar-BPD7dOMY.js";import"./chevron-left-I6WNv15m.js";import"./circle-alert-B0QtNVvI.js";import"./triangle-alert-DakYSp0v.js";import"./circle-check-qKimrRig.js";import"./circle-plus-DIIMjnvQ.js";import"./shirt-Bz2bPrSj.js";import"./dollar-sign-BDPolzNe.js";import"./message-square-DLpEsMO0.js";import"./eye-D3NUh0UK.js";import"./file-chart-column-B9PfWGKS.js";import"./upload-CbGEQMSL.js";import"./info-DykMJMNb.js";import"./lamp-desk-1DxmQ-cF.js";import"./list-check-CD6MMguq.js";import"./sheet-l63kWwTi.js";import"./loader-circle-Bdd3n5dg.js";import"./mail-Cc3htuuI.js";import"./monitor-LaA8iJfE.js";import"./sun-C0z-lIJb.js";import"./package-plus-Cs4Lm_Ox.js";import"./package-DQPdHXKJ.js";import"./pencil-Ds7PI5jk.js";import"./phone-Co4xXJTo.js";import"./plus-3kbiyMl6.js";import"./search-DSA6q9gj.js";import"./shield-BDqDk_E1.js";import"./shopping-cart-D-LgB7Px.js";import"./soup-Dtx74fsj.js";import"./trash-2-BgQSWW6E.js";import"./trash-XPAzA87D.js";import"./truck-BoGdqZzJ.js";import"./user-plus-BwITTWRX.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-CXfPcHb6.js";import"./DialogDescription.vue_vue_type_script_setup_true_lang-ntb8WBlm.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-vrE2xWgX.js";import"./Label.vue_vue_type_script_setup_true_lang-C6oWO7ic.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-B6jo_znV.js";const ne={class:"p-4 md:p-8 space-y-6 bg-slate-50/50 min-h-screen"},de={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6"},me={class:"flex items-center gap-4"},pe={class:"h-14 w-14 rounded-2xl bg-blue-600 flex items-center justify-center text-white shadow-lg shadow-blue-200 rotate-3 transition-transform hover:rotate-0"},ce={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full lg:w-auto"},ue={class:"min-w-[200px]"},fe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},xe={class:"h-10 w-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary transition-colors group-hover:bg-primary group-hover:text-white"},_e={class:"text-3xl font-bold"},be={class:"h-10 w-10 rounded-xl bg-orange-100 flex items-center justify-center text-orange-600 transition-colors group-hover:bg-orange-500 group-hover:text-white"},ge={class:"text-3xl font-bold"},he={class:"h-10 w-10 rounded-xl bg-blue-100 flex items-center justify-center text-blue-600 transition-colors group-hover:bg-blue-500 group-hover:text-white"},ve={class:"text-3xl font-bold"},we={class:"bg-white p-4 rounded-2xl shadow-sm border border-slate-200/60 transition-all hover:shadow-md"},ye={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ke={class:"relative"},$e={class:"flex items-center gap-2"},Ce={class:"bg-white rounded-2xl shadow-sm border border-slate-200/60 overflow-hidden"},je={class:"overflow-x-auto"},Ve={class:"flex items-center gap-4"},Te={class:"h-11 w-11 rounded-2xl bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20 flex items-center justify-center text-primary font-bold text-base shadow-sm group-hover:scale-110 transition-transform"},Se={class:"flex flex-col"},ze={class:"text-sm font-bold text-slate-900 leading-none mb-1"},Me={class:"text-[11px] text-slate-400 font-medium uppercase tracking-tight"},Ne={class:"flex flex-col gap-1"},De={class:"text-[13px] font-semibold text-slate-700"},Ie={key:0,class:"text-[11px] text-slate-400 flex items-center gap-1"},Ee={class:"flex flex-col gap-2"},Le={class:"flex justify-end gap-2"},Ae={class:"flex flex-col items-center justify-center gap-4 max-w-sm mx-auto"},Be={class:"h-24 w-24 rounded-full bg-slate-50 flex items-center justify-center text-slate-200"},qe={key:0,class:"flex items-center justify-between px-6 py-4 border-t border-slate-100 bg-slate-50/30"},Fe={class:"text-xs font-semibold text-slate-500"},He={class:"text-slate-900 font-bold"},Pe={class:"text-slate-900 font-bold"},Ue={class:"flex items-center gap-1.5"},We=["innerHTML"],Ge=U({__name:"Index",props:{dinners:{},cafes:{},subdealerships:{},filters:{}},setup(L){const y=L,A=[{title:"Ventas",href:"/sales"},{title:"Comensales",href:"/sales"}],v=_(!1),k=_(null),f=_(y.filters.search||""),x=_(y.filters.cafe_id||"all"),$=_(y.filters.subdealership_id||"all"),B=W({}),q=()=>{k.value=null,v.value=!0},F=i=>{k.value=i,v.value=!0},H=i=>{confirm("¿Estás seguro de que deseas eliminar este comensal?")&&B.delete(route("dinners.destroy",i),{preserveScroll:!0})};let C=null;const P=()=>{C&&clearTimeout(C),C=setTimeout(()=>{K.get(route("sales.index"),{search:f.value,cafe_id:x.value,subdealership_id:$.value},{preserveState:!0,preserveScroll:!0,replace:!0})},400)};G([f,x,$],()=>{P()});const D=()=>{f.value="",x.value="all",$.value="all"};return(i,t)=>(m(),b(Q,{breadcrumbs:A},{default:a(()=>[e(s(O),{title:"Comensales - Ventas"}),o("div",ne,[o("div",de,[o("div",me,[o("div",pe,[e(d,{name:"users",size:"28"})]),t[3]||(t[3]=o("div",null,[o("h1",{class:"text-2xl md:text-3xl font-extrabold tracking-tight text-slate-900 uppercase"},"Gestión de Comensales"),o("p",{class:"text-slate-500 font-medium text-sm flex items-center gap-2"},[o("span",{class:"flex h-2 w-2 rounded-full bg-blue-500 animate-pulse"}),l(" Administración del Padrón y Asignaciones ")])],-1))]),o("div",ce,[o("div",ue,[e(le)]),e(s(g),{onClick:q,class:"h-11 bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg shadow-primary/20 transition-all active:scale-95 px-8 rounded-xl font-bold text-xs uppercase tracking-wider flex items-center justify-center gap-2"},{default:a(()=>[e(d,{name:"plus",size:"18"}),t[4]||(t[4]=l(" Nuevo Comensal "))]),_:1})])]),o("div",fe,[e(s(S),{class:"border-none shadow-sm bg-white overflow-hidden group"},{default:a(()=>[e(s(M),{class:"pb-2 flex flex-row items-center justify-between space-y-0"},{default:a(()=>[e(s(N),{class:"text-sm font-semibold text-slate-500 uppercase tracking-wider"},{default:a(()=>t[5]||(t[5]=[l("Total Comensales")])),_:1}),o("div",xe,[e(d,{name:"users",class:"h-5 w-5"})])]),_:1}),e(s(z),null,{default:a(()=>[o("div",_e,n(i.dinners.total),1),t[6]||(t[6]=o("p",{class:"text-xs text-slate-400 mt-1"},"Registrados en el sistema",-1))]),_:1})]),_:1}),e(s(S),{class:"border-none shadow-sm bg-white overflow-hidden group"},{default:a(()=>[e(s(M),{class:"pb-2 flex flex-row items-center justify-between space-y-0"},{default:a(()=>[e(s(N),{class:"text-sm font-semibold text-slate-500 uppercase tracking-wider"},{default:a(()=>t[7]||(t[7]=[l("Cafeterías")])),_:1}),o("div",be,[e(d,{name:"coffee",class:"h-5 w-5"})])]),_:1}),e(s(z),null,{default:a(()=>[o("div",ge,n(i.cafes.length),1),t[8]||(t[8]=o("p",{class:"text-xs text-slate-400 mt-1"},"Puntos de servicio activos",-1))]),_:1})]),_:1}),e(s(S),{class:"border-none shadow-sm bg-white overflow-hidden group"},{default:a(()=>[e(s(M),{class:"pb-2 flex flex-row items-center justify-between space-y-0"},{default:a(()=>[e(s(N),{class:"text-sm font-semibold text-slate-500 uppercase tracking-wider"},{default:a(()=>t[9]||(t[9]=[l("Subconcesionarias")])),_:1}),o("div",he,[e(d,{name:"building",class:"h-5 w-5"})])]),_:1}),e(s(z),null,{default:a(()=>[o("div",ve,n(i.subdealerships.length),1),t[10]||(t[10]=o("p",{class:"text-xs text-slate-400 mt-1"},"Empresas vinculadas",-1))]),_:1})]),_:1})]),o("div",we,[o("div",ye,[o("div",ke,[e(d,{name:"search",class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e(s(ee),{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=r=>f.value=r),placeholder:"Buscar por nombre, DNI...",class:"pl-10 h-11 border-slate-200 focus:ring-primary/20 focus:border-primary transition-all rounded-xl"},null,8,["modelValue"])]),e(s(te),{modelValue:x.value,"onUpdate:modelValue":t[1]||(t[1]=r=>x.value=r)},{default:a(()=>[e(s(se),{class:"h-11 border-slate-200 rounded-xl"},{default:a(()=>[o("div",$e,[e(d,{name:"coffee",class:"h-4 w-4 text-slate-400"}),e(s(oe),{placeholder:"Todas las cafeterías"})])]),_:1}),e(s(ae),null,{default:a(()=>[e(s(E),{value:"all"},{default:a(()=>t[11]||(t[11]=[l("Todas las cafeterías")])),_:1}),(m(!0),c(w,null,j(i.cafes,r=>(m(),b(s(E),{key:r.id,value:r.id.toString()},{default:a(()=>[l(n(r.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(s(g),{variant:"outline",onClick:D,class:"h-11 rounded-xl text-slate-500 hover:text-slate-900 border-slate-200"},{default:a(()=>[e(d,{name:"x",class:"mr-2 h-4 w-4"}),t[12]||(t[12]=l(" Limpiar Filtros "))]),_:1})])]),o("div",Ce,[o("div",je,[e(s(X),null,{default:a(()=>[e(s(Y),null,{default:a(()=>[e(s(T),{class:"bg-slate-50/80 hover:bg-slate-50/80 border-b-slate-200"},{default:a(()=>[e(s(h),{class:"w-[320px] py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[13]||(t[13]=[l("Comensal")])),_:1}),e(s(h),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[14]||(t[14]=[l("Identificación")])),_:1}),e(s(h),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[15]||(t[15]=[l("Contacto")])),_:1}),e(s(h),{class:"py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[16]||(t[16]=[l("Asignación")])),_:1}),e(s(h),{class:"text-right py-4 text-slate-600 font-bold uppercase tracking-wider text-[11px]"},{default:a(()=>t[17]||(t[17]=[l("Acciones")])),_:1})]),_:1})]),_:1}),e(s(Z),null,{default:a(()=>[(m(!0),c(w,null,j(i.dinners.data,r=>(m(),b(s(T),{key:r.id,class:"hover:bg-slate-50/50 transition-all border-b-slate-100 last:border-0 group"},{default:a(()=>[e(s(u),{class:"py-4"},{default:a(()=>[o("div",Ve,[o("div",Te,n(r.name.charAt(0).toUpperCase()),1),o("div",Se,[o("span",ze,n(r.name),1),o("span",Me,"ID Sistema: #"+n(r.id),1)])])]),_:2},1024),e(s(u),{class:"py-4"},{default:a(()=>[o("div",Ne,[o("span",De,"DNI "+n(r.dni),1),r.phone?(m(),c("span",Ie,[e(d,{name:"phone",size:"10"}),l(" "+n(r.phone),1)])):V("",!0)])]),_:2},1024),e(s(u),{class:"py-4"},{default:a(()=>[o("div",Ee,[e(s(I),{variant:"secondary",class:"font-bold text-[10px] w-fit rounded-lg px-2 py-0.5 bg-slate-100 text-slate-600 border-none"},{default:a(()=>{var p;return[e(d,{name:"building-2",size:"10",class:"mr-1"}),l(" "+n((p=r.subdealership)==null?void 0:p.name),1)]}),_:2},1024)])]),_:2},1024),e(s(u),{class:"py-4"},{default:a(()=>[e(s(I),{variant:"outline",class:"font-bold text-[10px] w-fit rounded-lg px-2 py-0.5 border-primary/20 bg-primary/5 text-primary"},{default:a(()=>{var p;return[e(d,{name:"coffee",size:"10",class:"mr-1"}),l(" "+n((p=r.cafe)==null?void 0:p.name),1)]}),_:2},1024)]),_:2},1024),e(s(u),{class:"text-right py-4 px-6"},{default:a(()=>[o("div",Le,[e(s(g),{variant:"ghost",size:"icon",onClick:p=>F(r),title:"Editar",class:"h-9 w-9 rounded-xl hover:bg-primary/10 hover:text-primary transition-colors"},{default:a(()=>[e(d,{name:"pencil",class:"h-4.5 w-4.5"})]),_:2},1032,["onClick"]),e(s(g),{variant:"ghost",size:"icon",class:"h-9 w-9 rounded-xl text-slate-400 hover:text-destructive hover:bg-destructive/10 transition-colors",onClick:p=>H(r.id),title:"Eliminar"},{default:a(()=>[e(d,{name:"trash",class:"h-4.5 w-4.5"})]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),i.dinners.data.length===0?(m(),b(s(T),{key:0},{default:a(()=>[e(s(u),{colspan:"5",class:"h-[400px] text-center"},{default:a(()=>[o("div",Ae,[o("div",Be,[e(d,{name:"users",size:"48",strokeWidth:"1.5"})]),t[19]||(t[19]=o("div",{class:"space-y-1"},[o("p",{class:"text-lg font-bold text-slate-900"},"No se encontraron resultados"),o("p",{class:"text-sm text-slate-500"},"No hay comensales que coincidan con los criterios de búsqueda actuales.")],-1)),e(s(g),{variant:"outline",onClick:D,class:"mt-2"},{default:a(()=>t[18]||(t[18]=[l("Ver todos los comensales")])),_:1})])]),_:1})]),_:1})):V("",!0)]),_:1})]),_:1})]),i.dinners.total>0?(m(),c("div",qe,[o("div",Fe,[t[20]||(t[20]=l(" Mostrando ")),o("span",He,n(i.dinners.from)+" - "+n(i.dinners.to),1),t[21]||(t[21]=l(" de ")),o("span",Pe,n(i.dinners.total),1),t[22]||(t[22]=l(" comensales "))]),o("div",Ue,[(m(!0),c(w,null,j(i.dinners.links,(r,p)=>(m(),c(w,{key:p},[r.url===null?(m(),c("div",{key:0,class:"h-9 min-w-[36px] px-3 flex items-center justify-center text-xs font-bold text-slate-300 rounded-xl pointer-events-none",innerHTML:r.label},null,8,We)):(m(),b(s(R),{key:1,href:r.url,class:J(["h-9 min-w-[36px] px-3 flex items-center justify-center text-xs font-bold rounded-xl transition-all border shadow-sm",{"bg-primary text-primary-foreground border-primary shadow-primary/20 scale-105":r.active,"bg-white hover:bg-slate-50 border-slate-200 text-slate-600":!r.active}]),innerHTML:r.label,"preserve-scroll":""},null,8,["href","class","innerHTML"]))],64))),128))])])):V("",!0)])]),e(re,{open:v.value,"onUpdate:open":t[2]||(t[2]=r=>v.value=r),dinner:k.value,cafes:i.cafes,subdealerships:i.subdealerships},null,8,["open","dinner","cafes","subdealerships"])]),_:1}))}}),js=ie(Ge,[["__scopeId","data-v-be6cd156"]]);export{js as default};
