import{d as z,C as A,q as M,g as b,o as d,w as i,a as t,u as e,b as l,e as m,t as n,h as D,c as p,i as c,n as _,F as x,l as v}from"./app-D-LqQbZa.js";import{_ as k}from"./index-DpgMMlKQ.js";import{_ as F,a as P,b as q,c as G}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DwCCe1VU.js";import{_ as J}from"./DialogDescription.vue_vue_type_script_setup_true_lang-LhN1IvpN.js";import{_ as L}from"./DialogFooter.vue_vue_type_script_setup_true_lang-B0NV6Kd9.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-B6C72Mwn.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-DM9lszr3.js";import{_ as h,a as $,b as V,c as C,d as U}from"./SelectValue.vue_vue_type_script_setup_true_lang-CToYXGco.js";import{_ as R}from"./Checkbox.vue_vue_type_script_setup_true_lang-C-N8GeW7.js";import{_ as S}from"./Icon.vue_vue_type_script_setup_true_lang-gEMWzwnX.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Primitive-D2E4zh-F.js";import"./utils-bRKmu4jq.js";import"./index-dkW4UkYo.js";import"./Presence-5rM4SnOx.js";import"./useForwardExpose-C0s566w4.js";import"./DialogTitle-CIiJ2IkS.js";import"./Teleport-C90D5m2n.js";import"./utils-DrB2bsOv.js";import"./x-b92faefF.js";import"./createLucideIcon-Ds2iLTpM.js";import"./DialogDescription-zqXnhQK4.js";import"./chevron-down-CLUrzGV_.js";import"./chevron-up-a8bJVb19.js";import"./Collection-D9d2Sq_a.js";import"./usePrimitiveElement-EZ5wwPph.js";import"./check-DoDSKdKK.js";import"./PopperContent-BmDe8RlA.js";import"./useTypeahead-D3motRUW.js";import"./useFormControl-CdIo0Tlf.js";import"./VisuallyHidden-BMVg-pqG.js";import"./RovingFocusItem-1ihwZVcP.js";import"./RovingFocusGroup-D3Tsaytf.js";import"./settings-2-B1OirUe9.js";import"./briefcase-Xmtl9DiM.js";import"./lock-VA-0N1cL.js";import"./shopping-bag-DFapWeEq.js";import"./zap-BNzybbBh.js";import"./between-horizontal-start-xyVwXBMu.js";import"./user-round-CISTvNYs.js";import"./building-2-BVTNxSIJ.js";import"./person-standing-COxu-rZm.js";import"./scale-CZ8pgDg-.js";import"./paperclip-CyL3-0Wt.js";import"./calendar-CWgTl_K1.js";import"./chevron-left-qEn28Xtk.js";import"./chevron-right-Cq55BZVf.js";import"./utensils-BSk9kXbm.js";import"./circle-alert-52ZMIOm6.js";import"./triangle-alert-BPPxmAm6.js";import"./circle-check-VP-ZzmRA.js";import"./circle-plus-DkW3G8dO.js";import"./shirt-D5iYOZ7I.js";import"./copy-BNuVN1l6.js";import"./dollar-sign-pfe3naiy.js";import"./message-square-lUeyvym4.js";import"./eye-mSdyq9CV.js";import"./file-chart-column-BNBba-8G.js";import"./file-BvbRlJBE.js";import"./hand-helping-B2OrTdtM.js";import"./info-CA5ot4fU.js";import"./lamp-desk-BC4R8tFo.js";import"./list-check-CEU2RqGa.js";import"./sheet-CTwanoGL.js";import"./loader-circle-DpQTt_Uh.js";import"./mail-DnloGrzi.js";import"./monitor-CAzvVKRW.js";import"./sun-viAVOpRf.js";import"./package-plus-BAuL2zDf.js";import"./package-CR6_iB-i.js";import"./pencil-Bs-09YM6.js";import"./phone-DvDUiVmq.js";import"./plus-D4e7NBze.js";import"./search-B5XbEvtW.js";import"./shield-CoKnK0eR.js";import"./shopping-cart-BlNgnin8.js";import"./soup-C33LeQjk.js";import"./trash-2-BCJ-1ccr.js";import"./trash-BvV3zZaY.js";import"./truck-B8h0KZmM.js";import"./upload-BciA0lU5.js";import"./user-plus-giM89TS3.js";import"./user-Cwyi-5P7.js";const H={class:"bg-primary px-6 py-8 text-primary-foreground relative"},I={class:"absolute -bottom-6 right-6 h-12 w-12 rounded-full bg-background flex items-center justify-center shadow-lg border"},K={class:"space-y-4 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar"},O={class:"grid gap-2"},Q={key:0,class:"text-[0.7rem] font-semibold text-destructive uppercase tracking-tight"},W={class:"grid gap-2"},X={key:0,class:"text-[0.7rem] font-semibold text-destructive uppercase tracking-tight"},Y={class:"grid gap-2"},Z={key:0,class:"text-muted-foreground/60 font-normal lowercase"},ee={key:0,class:"text-[0.7rem] font-semibold text-destructive uppercase tracking-tight"},re={class:"grid grid-cols-2 gap-4"},oe={class:"grid gap-2"},se={key:0,class:"text-[0.7rem] font-semibold text-destructive uppercase tracking-tight"},te={class:"grid gap-2"},ie={key:0,class:"text-[0.7rem] font-semibold text-destructive uppercase tracking-tight"},ae={class:"grid gap-3 pt-2"},de={class:"grid grid-cols-2 gap-3 p-3 border rounded-lg bg-muted/5"},le=["for"],me={key:0,class:"text-xs italic text-muted-foreground"},ne=z({__name:"UserModal",props:{open:{type:Boolean},user:{},roles:{},areas:{},units:{}},emits:["update:open","success"],setup(N,{emit:B}){const u=N,g=B,r=A({name:"",email:"",password:"",role_id:"",area_id:"",unit_ids:[]});M(()=>u.open,a=>{var o,s;a&&(u.user?(r.name=u.user.name,r.email=u.user.email,r.password="",r.role_id=((o=u.user.roles[0])==null?void 0:o.id.toString())||"",r.area_id=((s=u.user.areas[0])==null?void 0:s.id.toString())||"",r.unit_ids=u.user.units.map(y=>y.id)):r.reset(),r.clearErrors())});const E=()=>{u.user?r.put(route("users.update",u.user.id),{onSuccess:()=>{g("update:open",!1),g("success")}}):r.post(route("users.store"),{onSuccess:()=>{g("update:open",!1),g("success")}})},j=a=>{console.log("calling unit"),r.unit_ids.includes(a)?r.unit_ids=r.unit_ids.filter(s=>s!==a):r.unit_ids=[...r.unit_ids,a]};return(a,o)=>(d(),b(e(G),{open:a.open,"onUpdate:open":o[6]||(o[6]=s=>a.$emit("update:open",s))},{default:i(()=>[t(e(F),{class:"sm:max-w-[500px] overflow-hidden p-0 gap-0 border-none shadow-2xl"},{default:i(()=>[l("div",H,[t(e(P),null,{default:i(()=>[t(e(q),{class:"text-2xl font-bold"},{default:i(()=>[m(n(a.user?"Editar Usuario":"Crear Usuario"),1)]),_:1}),t(e(J),{class:"text-primary-foreground/70"},{default:i(()=>[m(n(a.user?"Actualiza la información y permisos del usuario.":"Ingresa los datos del nuevo usuario para el sistema."),1)]),_:1})]),_:1}),l("div",I,[t(S,{name:a.user?"user-cog":"user-plus",class:"h-6 w-6 text-primary"},null,8,["name"])])]),l("form",{onSubmit:D(E,["prevent"]),class:"px-6 pt-10 pb-6 bg-background"},[l("div",K,[l("div",O,[t(e(f),{for:"name",class:"text-xs font-bold uppercase tracking-wider text-muted-foreground"},{default:i(()=>o[7]||(o[7]=[m("Nombre Completo")])),_:1}),t(e(w),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":o[0]||(o[0]=s=>e(r).name=s),placeholder:"Ej. Juan Pérez",class:_([{"border-destructive shadow-sm":e(r).errors.name},"h-10 border-muted-foreground/20 focus-visible:ring-primary"])},null,8,["modelValue","class"]),e(r).errors.name?(d(),p("p",Q,n(e(r).errors.name),1)):c("",!0)]),l("div",W,[t(e(f),{for:"email",class:"text-xs font-bold uppercase tracking-wider text-muted-foreground"},{default:i(()=>o[8]||(o[8]=[m("Correo Electrónico")])),_:1}),t(e(w),{id:"email",type:"email",modelValue:e(r).email,"onUpdate:modelValue":o[1]||(o[1]=s=>e(r).email=s),placeholder:"juan@empresa.com",class:_([{"border-destructive shadow-sm":e(r).errors.email},"h-10 border-muted-foreground/20 focus-visible:ring-primary"])},null,8,["modelValue","class"]),e(r).errors.email?(d(),p("p",X,n(e(r).errors.email),1)):c("",!0)]),l("div",Y,[t(e(f),{for:"password",class:"text-xs font-bold uppercase tracking-wider text-muted-foreground"},{default:i(()=>[o[9]||(o[9]=m(" Contraseña ")),a.user?(d(),p("span",Z,"(Dejar en blanco para no cambiar)")):c("",!0)]),_:1}),t(e(w),{id:"password",type:"password",modelValue:e(r).password,"onUpdate:modelValue":o[2]||(o[2]=s=>e(r).password=s),class:_([{"border-destructive shadow-sm":e(r).errors.password},"h-10 border-muted-foreground/20 focus-visible:ring-primary"])},null,8,["modelValue","class"]),e(r).errors.password?(d(),p("p",ee,n(e(r).errors.password),1)):c("",!0)]),l("div",re,[l("div",oe,[t(e(f),{for:"role_id",class:"text-xs font-bold uppercase tracking-wider text-muted-foreground"},{default:i(()=>o[10]||(o[10]=[m("Rol Asignado")])),_:1}),t(e(h),{modelValue:e(r).role_id,"onUpdate:modelValue":o[3]||(o[3]=s=>e(r).role_id=s)},{default:i(()=>[t(e($),{class:_([{"border-destructive shadow-sm":e(r).errors.role_id},"h-10 border-muted-foreground/20 focus:ring-primary"])},{default:i(()=>[t(e(V),{placeholder:"Seleccionar"})]),_:1},8,["class"]),t(e(C),null,{default:i(()=>[(d(!0),p(x,null,v(a.roles,s=>(d(),b(e(U),{key:s.id,value:s.id.toString()},{default:i(()=>[m(n(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.role_id?(d(),p("p",se,n(e(r).errors.role_id),1)):c("",!0)]),l("div",te,[t(e(f),{for:"area_id",class:"text-xs font-bold uppercase tracking-wider text-muted-foreground"},{default:i(()=>o[11]||(o[11]=[m("Área Principal")])),_:1}),t(e(h),{modelValue:e(r).area_id,"onUpdate:modelValue":o[4]||(o[4]=s=>e(r).area_id=s)},{default:i(()=>[t(e($),{class:_([{"border-destructive shadow-sm":e(r).errors.area_id},"h-10 border-muted-foreground/20 focus:ring-primary"])},{default:i(()=>[t(e(V),{placeholder:"Seleccionar"})]),_:1},8,["class"]),t(e(C),null,{default:i(()=>[(d(!0),p(x,null,v(a.areas,s=>(d(),b(e(U),{key:s.id,value:s.id.toString()},{default:i(()=>[m(n(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(r).errors.area_id?(d(),p("p",ie,n(e(r).errors.area_id),1)):c("",!0)])]),l("div",ae,[t(e(f),{class:"text-xs font-bold uppercase tracking-wider text-muted-foreground"},{default:i(()=>o[12]||(o[12]=[m("Unidades de Acceso")])),_:1}),l("div",de,[(d(!0),p(x,null,v(a.units,s=>(d(),p("div",{key:s.id,class:"flex items-center space-x-2"},[t(e(R),{id:"unit-"+s.id,checked:e(r).unit_ids.includes(s.id),onClick:y=>j(s.id)},null,8,["id","checked","onClick"]),l("label",{for:"unit-"+s.id,class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer"},n(s.name),9,le)]))),128))]),a.units.length===0?(d(),p("p",me,"No hay unidades disponibles.")):c("",!0)])]),t(e(L),{class:"pt-8 flex gap-2"},{default:i(()=>[t(e(k),{type:"button",variant:"ghost",onClick:o[5]||(o[5]=s=>a.$emit("update:open",!1)),class:"border"},{default:i(()=>o[13]||(o[13]=[m("Cancelar")])),_:1}),t(e(k),{type:"submit",disabled:e(r).processing,class:"flex-1 bg-primary hover:bg-primary/90 shadow-md"},{default:i(()=>[e(r).processing?(d(),b(S,{key:0,name:"loader-2",class:"mr-2 h-4 w-4 animate-spin"})):c("",!0),m(" "+n(a.user?"Guardar Cambios":"Crear Usuario"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]))}}),Gr=T(ne,[["__scopeId","data-v-13f8632d"]]);export{Gr as default};
